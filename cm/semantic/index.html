<html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta charset="UTF-8"><meta name="generator" content="bildumilo 1.0 https://github.com/yoosofan/bildumilo"><link rel="stylesheet" href="css/hovercraft.css" media="all"><link rel="stylesheet" href="css/highlight.css" media="all"><link rel="stylesheet" href="css/style.css" media="all"><link rel="stylesheet" href="css/semantic.css" media="all"><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script></head><body class="impress-not-supported"><div id="impress" data-width="1024" data-transition-duration="1000"><div class="step step-level-1" step="0" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="semantic-analyzer">Semantic Analyzer</h1><p>Ahmad Yoosofan</p><p>Compiler course</p><p>University of Kashan</p></div><div class="step step-level-1 grid-2col-class" step="1" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><ol><li>E &#8594; E + a</li><li>E &#8594; a</li></ol><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>` `</p></th><th><p>a</p></th><th><p>+</p></th><th><p>$</p></th><th><p>E</p></th></tr></thead><tbody><tr><td><p>0</p></td><td><p>s2</p></td><td></td><td></td><td><p>1</p></td></tr><tr><td><p>1</p></td><td></td><td><p>s3</p></td><td><p>acc</p></td><td></td></tr><tr><td><p>2</p></td><td></td><td><p>r2</p></td><td><p>r2</p></td><td></td></tr><tr><td><p>3</p></td><td><p>s4</p></td><td></td><td></td><td></td></tr><tr><td><p>4</p></td><td></td><td><p>r1</p></td><td><p>r1</p></td><td></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft"><thead><tr><th><p>Stack</p></th><th><p>Input</p></th><th><p>Action</p></th></tr></thead><tbody><tr><td><p><span class="math ">\(I_0\)</span></p></td><td><p>a[8]+a[9]$</p></td><td></td></tr><tr><td><p><span class="math ">\(I_0\)</span> a[8] <span class="math ">\(I_2\)</span></p></td><td><p>+a[9]$</p></td><td><p>r2(E &#8594; a)</p></td></tr><tr><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span></p></td><td><p>+a[9]$</p></td><td></td></tr><tr><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span></p></td><td><p>a[9]$</p></td><td></td></tr><tr><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span> a[9] <span class="math ">\(I_4\)</span></p></td><td><p>$</p></td><td><p>r1(E&#8594;E+a)</p></td></tr><tr><td><p><span class="math ">\(I_0\)</span> E[17] <span class="math ">\(I_1\)</span></p></td><td><p>$</p></td><td></td></tr><tr><td><p>acc</p></td><td></td><td></td></tr></tbody></table><img src="img/yoo_graphviz_a0aae387a03a0fb11a4d72644df9a6ba.png"></div><div class="step step-level-1 grid-2col-class" step="2" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft"><thead><tr><th><p>` `</p></th><th><p>Production</p></th><th><p>Semantic</p></th></tr></thead><tbody><tr><td><p>1</p></td><td><p>E &#8594; a</p></td><td><p>E.val = lexValue(a)</p></td></tr><tr><td><p>2</p></td><td><p>E &#8594; E + a</p></td><td><p>E.val = <span class="math ">\(E_1\)</span>.val + lexValue(a)</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>` `</p></th><th><p>a</p></th><th><p>+</p></th><th><p>$</p></th><th><p>E</p></th></tr></thead><tbody><tr><td><p>0</p></td><td><p>s2</p></td><td></td><td></td><td><p>1</p></td></tr><tr><td><p>1</p></td><td></td><td><p>s3</p></td><td><p>acc</p></td><td></td></tr><tr><td><p>2</p></td><td></td><td><p>r2</p></td><td><p>r2</p></td><td></td></tr><tr><td><p>3</p></td><td><p>s4</p></td><td></td><td></td><td></td></tr><tr><td><p>4</p></td><td></td><td><p>r1</p></td><td><p>r1</p></td><td></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft"><thead><tr><th><p>n</p></th><th><p>Stack</p></th><th><p>Input</p></th><th><p>Action</p></th></tr></thead><tbody><tr><td><p>0</p></td><td><p><span class="math ">\(I_0\)</span></p></td><td><p>a[8]+a[9]+a[2]$</p></td><td></td></tr><tr><td><p>1</p></td><td><p><span class="math ">\(I_0\)</span> a[8] <span class="math ">\(I_2\)</span></p></td><td><p>+a[9]+a[2]$</p></td><td><p>r2(E &#8594; a)</p></td></tr><tr><td><p>2</p></td><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span></p></td><td><p>+a[9]+a[2]$</p></td><td></td></tr><tr><td><p>3</p></td><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span></p></td><td><p>a[9]+a[2]$</p></td><td></td></tr><tr><td><p>4</p></td><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span> a[9] <span class="math ">\(I_4\)</span></p></td><td><p>+a[2]$</p></td><td><p>r1(E&#8594;E+a)</p></td></tr><tr><td><p>5</p></td><td><p><span class="math ">\(I_0\)</span> E[17] <span class="math ">\(I_1\)</span></p></td><td><p>+a[2]$</p></td><td></td></tr><tr><td><p>6</p></td><td><p><span class="math ">\(I_0\)</span> E[17] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span></p></td><td><p>a[2]$</p></td><td></td></tr><tr><td><p>7</p></td><td><p><span class="math ">\(I_0\)</span> E[17] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span> a[2] <span class="math ">\(I_4\)</span></p></td><td><p>$</p></td><td><p>r1(E&#8594;E+a)</p></td></tr><tr><td><p>8</p></td><td><p><span class="math ">\(I_0\)</span> E[19] <span class="math ">\(I_1\)</span></p></td><td><p>$</p></td><td></td></tr><tr><td><p>9</p></td><td><p>acc</p></td><td></td><td></td></tr></tbody></table><img src="img/yoo_graphviz_9ff2670c8847235ac1021ec821e2d646.png"></div><div class="step step-level-1" step="3" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><h1 id="anotated-parse-tree">Anotated parse tree</h1><p>a[8]+a[9]+a[2]</p><img src="img/yoo_graphviz_4a8826d1ea1ad57870f5d0271884d445.png"></div><div class="step step-level-1 t2c" step="4" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><h1 id="dependency-graph">Dependency Graph</h1><ol><li>E &#8594; T + E</li><li>E &#8594; T</li><li>T &#8594; F * T</li><li>T &#8594; F</li><li>F &#8594; ( E )</li><li>F &#8594; a</li></ol><img src="img/yoo_graphviz_4a8826d1ea1ad57870f5d0271884d445.png"></div><div class="step step-level-1 t2c" step="5" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><h1 id="syntax-directed-definition">Syntax-Directed Definition</h1><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>S &#8594; E n</p></td><td><p>print(E.v)</p></td></tr><tr><td><p>E &#8594; <span class="math ">\(E_1+T\)</span></p></td><td><p><span class="math ">\(E.v=E_1.v + T.v\)</span></p></td></tr><tr><td><p>E &#8594; T</p></td><td><p><span class="math ">\(E.v=T.v\)</span></p></td></tr><tr><td><p>T &#8594; <span class="math ">\(T_1*F.v\)</span></p></td><td><p><span class="math ">\(T.v=T_1.v * F.v\)</span></p></td></tr><tr><td><p>T &#8594; F</p></td><td><p><span class="math ">\(T.v=F.v\)</span></p></td></tr><tr><td><p>F &#8594; ( E )</p></td><td><p><span class="math ">\(F.v=E.v\)</span></p></td></tr><tr><td><p>F &#8594; a</p></td><td><p><span class="math ">\(F.v=a.lexval\)</span></p></td></tr></tbody></table><img src="img/yoo_graphviz_9bd2c52f42f12fdb16f874b95869154f.png"></div><div class="step step-level-1 grid-2col-class" step="6" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><pre class="highlight code python"><span class="ln"> 1 </span><span class="n">tokens</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'NUMBER'</span><span class="p">,</span><span class="s1">'PLUS'</span><span class="p">,</span> <span class="s1">'MINUS'</span><span class="p">,</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="s1">'MUL'</span><span class="p">,</span> <span class="s1">'DIV'</span><span class="p">,</span> <span class="s1">'LPAR'</span><span class="p">,</span> <span class="s1">'RPAR'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">t_PLUS</span>     <span class="o">=</span> <span class="sa">r</span><span class="s1">'\+'</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">t_MINUS</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\-'</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">t_MUL</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\*'</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">t_DIV</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'/'</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">t_LPAR</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\('</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">t_RPAR</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\)'</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">t_NUMBER</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="sa">r</span><span class="s1">'[0-9]+'</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="n">t</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="k">return</span> <span class="n">t</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">t_ignore</span> <span class="o">=</span> <span class="s2">" </span><span class="se">\t</span><span class="s2">"</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="k">def</span> <span class="nf">t_error</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Illegal character '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="n">t</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.lex</span> <span class="k">as</span> <span class="nn">lex</span><span class="p">;</span><span class="n">lex</span><span class="o">.</span><span class="n">lex</span><span class="p">()</span></pre><pre class="highlight code python"><span class="ln">1 </span><span class="kn">import</span> <span class="nn">ply.yacc</span> <span class="k">as</span> <span class="nn">yacc</span><span class="p">;</span> <span class="n">yacc</span><span class="o">.</span><span class="n">yacc</span><span class="p">()</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span>  <span class="k">try</span><span class="p">:</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span>    <span class="n">s</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'calc &gt; '</span><span class="p">)</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span>    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="s1">''</span><span class="p">:</span><span class="k">break</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span>    <span class="n">yacc</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="ln">7 </span><span class="w"></span>  <span class="k">except</span><span class="p">:</span><span class="w">
</span><span class="ln">8 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'unexpected error'</span><span class="p">)</span></pre></div><div class="step step-level-1 grid-2col-class" step="7" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><pre class="highlight code python"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">p_S</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="s1">'S : E'</span> <span class="c1"># S &#8594; E</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'S &#8594; E '</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_E_plus_T</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>  <span class="s1">'E : E PLUS T'</span> <span class="c1"># E &#8594; E + T</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_E_MINUS_T</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="s1">'E : E MINUS T'</span> <span class="c1"># E &#8594; E - T</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="ln">12 </span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_E_T</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="s1">'E : T'</span> <span class="c1"># E &#8594; T</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">16 </span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_T_MUL_F</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="s1">'T : T MUL F'</span> <span class="c1"># T &#8594; T * F</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span></pre><pre class="highlight code python"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">p_T_DIV_F</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="s1">'T : T DIV F'</span> <span class="c1"># T &#8594; T / F</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'Error: Divide by zero '</span><span class="p">);</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>    <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_T_F</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="s1">'T : F'</span> <span class="c1"># T &#8594; F</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">12 </span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_F_a</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="s1">'F : NUMBER'</span> <span class="c1"># F &#8594; a</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">16 </span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_F_lpar_E_rpar</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="s1">'F : LPAR E RPAR'</span> <span class="c1"># F &#8594; ( E )</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></pre></div><div class="step step-level-1" step="8" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><h1 id="inherited-attribute">Inherited Attribute</h1><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>D &#8594; T L</p></td><td><p>L.in = T.type</p></td></tr><tr><td><p>T &#8594; int</p></td><td><p>T.type = integer</p></td></tr><tr><td><p>T &#8594; real</p></td><td><p>T.type = real</p></td></tr><tr><td><p>L &#8594; L1, id</p></td><td><p>L1.in = L.in,   addtype(id.entry,L.in)</p></td></tr><tr><td><p>L &#8594; id</p></td><td><p>addtype(id.entry,L.in)</p></td></tr></tbody></table><ul><li>int i</li><li>int a,b,c</li><li>real x,y</li></ul><ol><li>D &#8594; T {L.in = T.type} L</li><li>T &#8594; int {T.type = integer}</li><li>T &#8594; real {T.type = real}</li><li>L &#8594; {L1.in = L.in} L1, id {addtype(id.entry,L.in)}</li><li>L &#8594; id {addtype(id.entry,L.in)}</li></ol></div><div class="step step-level-1" step="9" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><p>real a, b, c</p><img src="img/dependency_graph_for_declaration.png" align="center"></div><div class="step step-level-1 t2c" step="10" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><pre class="highlight code python substep"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'a B</span><span class="se">\t</span><span class="s1"> a: '</span><span class="p">,</span>  <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">','</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">B: '</span><span class="p">,</span>  <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="k">return</span> <span class="n">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Synatx Error: number expected'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Reminder: '</span><span class="p">,</span><span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">10 </span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">def</span> <span class="nf">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">:</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'+E,</span><span class="se">\t</span><span class="s1">E:'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:]</span> <span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="k">return</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'EOF'</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Error a a:'</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">19 </span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>  <span class="n">lex1</span> <span class="o">=</span> <span class="n">lexical_number_plus</span><span class="o">.</span><span class="n">lexical</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">))</span></pre><pre class="highlight code python substep"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'a B</span><span class="se">\t</span><span class="s1"> a: '</span><span class="p">,</span>  <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">','</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">B: '</span><span class="p">,</span>  <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="k">return</span> <span class="n">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Synatx Error: number expected'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Reminder: '</span><span class="p">,</span><span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">10 </span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">def</span> <span class="nf">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">:</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'+E,</span><span class="se">\t</span><span class="s1">E:'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:]</span> <span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="k">return</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'EOF'</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Error a a:'</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">19 </span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>  <span class="n">lex1</span> <span class="o">=</span> <span class="n">lexical_number_plus</span><span class="o">.</span><span class="n">lexical</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">))</span></pre></div><div class="step step-level-1 t2c" step="11" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><pre class="highlight code python"><span class="ln"> 1 </span><span class="sd">"""  &#8594; , &#955;
</span><span class="ln"> 2 </span><span class="sd">S &#8594; T L ;    # L.t = T.t
</span><span class="ln"> 3 </span><span class="sd">T &#8594; INT      # T.t = INT
</span><span class="ln"> 4 </span><span class="sd">T &#8594; DOUBLE   # T.t = DOUBLE
</span><span class="ln"> 5 </span><span class="sd">L &#8594; a M      # type(a, L.t); M.t = L.t
</span><span class="ln"> 6 </span><span class="sd">M &#8594;  &#955;       #
</span><span class="ln"> 7 </span><span class="sd">M &#8594; , L      # L.t = M.t
</span><span class="ln"> 8 </span><span class="sd">"""</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">tokens</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'ID'</span><span class="p">,</span><span class="s1">'DOUBLE'</span><span class="p">,</span> <span class="s1">'INT'</span><span class="p">,</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="s1">'COMMA'</span><span class="p">,</span> <span class="s1">'SEMI'</span> <span class="p">)</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="n">t_DOUBLE</span>     <span class="o">=</span> <span class="sa">r</span><span class="s1">'\.double'</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="n">t_INT</span>        <span class="o">=</span> <span class="sa">r</span><span class="s1">'\.int'</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">t_ID</span>         <span class="o">=</span> <span class="sa">r</span><span class="s1">'[a-zA-Z_][a-zA-Z_0-9]*'</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="n">t_COMMA</span>      <span class="o">=</span> <span class="sa">r</span><span class="s1">'\,'</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="n">t_SEMI</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\;'</span><span class="w">
</span><span class="ln">16 </span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">t_ignore</span> <span class="o">=</span> <span class="s2">" </span><span class="se">\t</span><span class="s2">"</span><span class="w">
</span><span class="ln">18 </span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="k">def</span> <span class="nf">t_error</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Illegal character '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>  <span class="n">t</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span><span class="ln">23 </span><span class="w">
</span><span class="ln">24 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.lex</span> <span class="k">as</span> <span class="nn">lex</span><span class="p">;</span><span class="n">lex</span><span class="o">.</span><span class="n">lex</span><span class="p">()</span></pre><pre class="highlight code python"><span class="ln">24 </span><span class="kn">import</span> <span class="nn">ply.lex</span> <span class="k">as</span> <span class="nn">lex</span><span class="p">;</span><span class="n">lex</span><span class="o">.</span><span class="n">lex</span><span class="p">()</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span><span class="n">start</span> <span class="o">=</span> <span class="s1">'S'</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span><span class="n">ds1</span> <span class="o">=</span> <span class="p">[]</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_S</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>  <span class="s1">'S : T L SEMI'</span> <span class="c1"># S &#8594; E</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">ds1</span><span class="p">)</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_Ttype</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">32 </span><span class="w">  </span><span class="sd">"""T : INT
</span><span class="ln">33 </span><span class="sd">       | DOUBLE"""</span><span class="w">
</span><span class="ln">34 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">35 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_id_m</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">36 </span><span class="w"></span>  <span class="s1">'L : ID M'</span><span class="w">
</span><span class="ln">37 </span><span class="w"></span>  <span class="n">ds1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w">
</span><span class="ln">38 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_m_empty</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">39 </span><span class="w"></span>  <span class="s1">'M : '</span><span class="w">
</span><span class="ln">40 </span><span class="w"></span>  <span class="k">pass</span><span class="w">
</span><span class="ln">41 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_MLFcomma</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">42 </span><span class="w"></span>  <span class="s1">'M : COMMA L'</span><span class="w">
</span><span class="ln">43 </span><span class="w"></span>  <span class="k">pass</span><span class="w">
</span><span class="ln">44 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_error</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">45 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Syntax error at '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span> <span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="ln">46 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.yacc</span> <span class="k">as</span> <span class="nn">yacc</span><span class="p">;</span> <span class="n">yacc</span><span class="o">.</span><span class="n">yacc</span><span class="p">()</span><span class="w">
</span><span class="ln">47 </span><span class="w"></span><span class="n">s</span> <span class="o">=</span> <span class="s1">'.int a,b,c;'</span><span class="w">
</span><span class="ln">48 </span><span class="w"></span><span class="n">yacc</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></pre></div><div class="step step-level-1 t2c" step="12" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="19200" data-y="0" data-z="0"><pre class="highlight code python"><span class="ln"> 1 </span><span class="n">tokens</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'ID'</span><span class="p">,</span><span class="s1">'DOUBLE'</span><span class="p">,</span> <span class="s1">'INT'</span><span class="p">,</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="s1">'COMMA'</span><span class="p">,</span> <span class="s1">'SEMI'</span> <span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">t_DOUBLE</span>     <span class="o">=</span> <span class="sa">r</span><span class="s1">'\.double'</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">t_INT</span>        <span class="o">=</span> <span class="sa">r</span><span class="s1">'\.int'</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">t_ID</span>         <span class="o">=</span> <span class="sa">r</span><span class="s1">'[a-zA-Z_][a-zA-Z_0-9]*'</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">t_COMMA</span>      <span class="o">=</span> <span class="sa">r</span><span class="s1">'\,'</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">t_SEMI</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\;'</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">t_ignore</span> <span class="o">=</span> <span class="s2">" </span><span class="se">\t</span><span class="s2">"</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">t_error</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Illegal character '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">t</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.lex</span> <span class="k">as</span> <span class="nn">lex</span><span class="p">;</span><span class="n">lex</span><span class="o">.</span><span class="n">lex</span><span class="p">()</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="n">start</span> <span class="o">=</span> <span class="s1">'S'</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="n">ds1</span> <span class="o">=</span> <span class="p">[]</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_S</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="s1">'S : T L SEMI'</span> <span class="c1"># S &#8594; E</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">ds1</span><span class="p">)</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_Ttype</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">21 </span><span class="w">  </span><span class="sd">"""T : INT
</span><span class="ln">22 </span><span class="sd">       | DOUBLE"""</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_id_m</span><span class="p">(</span><span class="n">p</span><span class="p">):</span></pre><pre class="highlight code python"><span class="ln">24 </span><span class="k">def</span> <span class="nf">p_id_m</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>  <span class="s1">'L : ID M'</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>  <span class="n">ds1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_m_empty</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>  <span class="s1">'M : '</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>  <span class="k">pass</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_MLFcomma</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span>  <span class="s1">'M : COMMA L'</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>  <span class="k">pass</span><span class="w">
</span><span class="ln">33 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_error</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">34 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Syntax error at '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span> <span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="ln">35 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.yacc</span> <span class="k">as</span> <span class="nn">yacc</span><span class="p">;</span> <span class="n">yacc</span><span class="o">.</span><span class="n">yacc</span><span class="p">()</span><span class="w">
</span><span class="ln">36 </span><span class="w"></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">37 </span><span class="w"></span>  <span class="k">try</span><span class="p">:</span>  <span class="c1"># .double x,y;</span><span class="w">
</span><span class="ln">38 </span><span class="w"></span>    <span class="n">s</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'.int a,b,c; &gt; '</span><span class="p">)</span><span class="w">
</span><span class="ln">39 </span><span class="w"></span>    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="s1">''</span><span class="p">:</span><span class="k">break</span><span class="w">
</span><span class="ln">40 </span><span class="w"></span>    <span class="n">yacc</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="ln">41 </span><span class="w"></span>  <span class="k">except</span><span class="p">:</span><span class="w">
</span><span class="ln">42 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'unexpected error'</span><span class="p">)</span><span class="w">
</span><span class="ln">43 </span><span class="w"></span>  <span class="k">finally</span><span class="p">:</span><span class="w">
</span><span class="ln">44 </span><span class="w"></span>    <span class="n">ds1</span> <span class="o">=</span> <span class="p">[]</span></pre></div><div class="step step-level-1 t2c" step="13" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="20800" data-y="0" data-z="0"><pre class="highlight code python"><span class="ln"> 1 </span><span class="n">keywords</span> <span class="o">=</span>  <span class="p">(</span><span class="s1">'double'</span><span class="p">,</span> <span class="s1">'int'</span><span class="p">,</span> <span class="p">)</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">tokens</span> <span class="o">=</span> <span class="n">keywords</span> <span class="o">+</span> <span class="p">(</span><span class="s1">'ID'</span><span class="p">,</span> <span class="s1">'COMMA'</span><span class="p">,</span> <span class="s1">'SEMI'</span> <span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">t_COMMA</span>      <span class="o">=</span> <span class="sa">r</span><span class="s1">'\,'</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">t_SEMI</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\;'</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">t_ignore</span> <span class="o">=</span> <span class="s2">" </span><span class="se">\t</span><span class="s2">"</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">def</span> <span class="nf">t_ID</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="sa">r</span><span class="s1">'[a-zA-Z_][a-zA-Z_0-9]*'</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="k">return</span> <span class="n">t</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">def</span> <span class="nf">t_error</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Illegal character '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="n">t</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.lex</span> <span class="k">as</span> <span class="nn">lex</span><span class="p">;</span><span class="n">lex</span><span class="o">.</span><span class="n">lex</span><span class="p">()</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="n">start</span> <span class="o">=</span> <span class="s1">'S'</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">ds1</span> <span class="o">=</span> <span class="p">[]</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_S</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="s1">'S : T L SEMI'</span> <span class="c1"># S &#8594; E</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">ds1</span><span class="p">)</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_Ttype</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">23 </span><span class="w">  </span><span class="sd">"""T : int
</span><span class="ln">24 </span><span class="sd">       | double"""</span></pre><pre class="highlight code python"><span class="ln">24 </span>       <span class="o">|</span> <span class="n">double</span><span class="s2">"""
</span><span class="ln">25 </span><span class="s2">  p[0] = p[1]
</span><span class="ln">26 </span><span class="s2">def p_id_m(p):
</span><span class="ln">27 </span><span class="s2">  'L : ID M'
</span><span class="ln">28 </span><span class="s2">  ds1.append(p[1])
</span><span class="ln">29 </span><span class="s2">def p_m_empty(p):
</span><span class="ln">30 </span><span class="s2">  'M : '
</span><span class="ln">31 </span><span class="s2">  pass
</span><span class="ln">32 </span><span class="s2">def p_MLFcomma(p):
</span><span class="ln">33 </span><span class="s2">  'M : COMMA L'
</span><span class="ln">34 </span><span class="s2">  pass
</span><span class="ln">35 </span><span class="s2">def p_error(p):
</span><span class="ln">36 </span><span class="s2">  print("Syntax error at '</span><span class="si">%s</span><span class="s2">'" % p)
</span><span class="ln">37 </span><span class="s2">import ply.yacc as yacc; yacc.yacc()
</span><span class="ln">38 </span><span class="s2">while True:
</span><span class="ln">39 </span><span class="s2">  try:  # .double x,y;
</span><span class="ln">40 </span><span class="s2">    s = input('int a,b,c; &gt; ')
</span><span class="ln">41 </span><span class="s2">    if s.strip()=='':break
</span><span class="ln">42 </span><span class="s2">    yacc.parse(s)
</span><span class="ln">43 </span><span class="s2">    ds1=[]
</span><span class="ln">44 </span><span class="s2">  except:
</span><span class="ln">45 </span><span class="s2">    print('unexpected error')</span></pre></div><div class="step step-level-1 t2c" step="14" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="22400" data-y="0" data-z="0"><pre class="highlight code python"><span class="ln"> 1 </span><span class="n">keywords</span> <span class="o">=</span>  <span class="p">(</span><span class="s1">'double'</span><span class="p">,</span> <span class="s1">'int'</span><span class="p">,</span> <span class="p">)</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">tokens</span> <span class="o">=</span> <span class="n">keywords</span> <span class="o">+</span> <span class="p">(</span><span class="s1">'ID'</span><span class="p">,</span> <span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">literals</span> <span class="o">=</span> <span class="p">[</span><span class="s1">','</span><span class="p">,</span> <span class="s1">';'</span><span class="p">]</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">t_ignore</span> <span class="o">=</span> <span class="s2">" </span><span class="se">\t</span><span class="s2">"</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">def</span> <span class="nf">t_ID</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>  <span class="sa">r</span><span class="s1">'[a-zA-Z_][a-zA-Z_0-9]*'</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>  <span class="k">return</span> <span class="n">t</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">def</span> <span class="nf">t_error</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Illegal '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span><span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">t</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.lex</span> <span class="k">as</span> <span class="nn">lex</span><span class="p">;</span><span class="n">lex</span><span class="o">.</span><span class="n">lex</span><span class="p">()</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="n">start</span> <span class="o">=</span> <span class="s1">'S'</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="n">ds1</span> <span class="o">=</span> <span class="p">[]</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_S</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="s1">'S : T L ";"'</span> <span class="c1"># S &#8594; E</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">ds1</span><span class="p">)</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_Ttype</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">21 </span><span class="w">  </span><span class="sd">"""T : int
</span><span class="ln">22 </span><span class="sd">       | double"""</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_id_m</span><span class="p">(</span><span class="n">p</span><span class="p">):</span></pre><pre class="highlight code python"><span class="ln">24 </span><span class="k">def</span> <span class="nf">p_id_m</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>  <span class="s1">'L : ID M'</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>  <span class="n">ds1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_m_empty</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>  <span class="s1">'M :'</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>  <span class="k">pass</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_MLFcomma</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span>  <span class="s1">'M : "," L'</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>  <span class="k">pass</span><span class="w">
</span><span class="ln">33 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_error</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">34 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Syntax error at '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span> <span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="ln">35 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.yacc</span> <span class="k">as</span> <span class="nn">yacc</span><span class="p">;</span> <span class="n">yacc</span><span class="o">.</span><span class="n">yacc</span><span class="p">()</span><span class="w">
</span><span class="ln">36 </span><span class="w"></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">37 </span><span class="w"></span>  <span class="k">try</span><span class="p">:</span>  <span class="c1"># .double x,y;</span><span class="w">
</span><span class="ln">38 </span><span class="w"></span>    <span class="n">s</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'int a,b,c; &gt; '</span><span class="p">)</span><span class="w">
</span><span class="ln">39 </span><span class="w"></span>    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="s1">''</span><span class="p">:</span> <span class="k">break</span><span class="w">
</span><span class="ln">40 </span><span class="w"></span>    <span class="n">yacc</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="ln">41 </span><span class="w"></span>  <span class="k">except</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">'unexpected error'</span><span class="p">)</span><span class="w">
</span><span class="ln">42 </span><span class="w"></span>  <span class="k">finally</span><span class="p">:</span> <span class="n">ds1</span> <span class="o">=</span> <span class="p">[]</span></pre></div><div class="step step-level-1" step="15" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="24000" data-y="0" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>L &#8594; E \n</p></td><td><p>print(val[top-1])</p></td></tr><tr><td><p>E &#8594; E1 + T</p></td><td><p>val[ntop] = val[top-2] + val[top]</p></td></tr><tr><td><p>E &#8594; T</p></td><td></td></tr><tr><td><p>T &#8594; T1 * F</p></td><td><p>val[ntop] = val[top-2] * val[top]</p></td></tr><tr><td><p>T &#8594; F</p></td><td></td></tr><tr><td><p>F &#8594; ( E )</p></td><td><p>val[ntop] = val[top-1]</p></td></tr><tr><td><p>F &#8594; digit</p></td><td></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="16" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="25600" data-y="0" data-z="0"><div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th></th><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>1</p></td><td><p>A &#8594; B</p></td><td><p>print(B.n0),  print(B.n1)</p></td></tr><tr><td><p>2</p></td><td><p>B &#8594; 0 <span class="math ">\(B_1\)</span></p></td><td><p>B.n0=B1.n0+1,  B.n1=B1.n1</p></td></tr><tr><td><p>3</p></td><td><p>B &#8594; 1 <span class="math ">\(B_1\)</span></p></td><td><p>B.n0=B1.n0,  B.n1=B1.n1+1</p></td></tr><tr><td><p>4</p></td><td><p>B &#8594; &#955;</p></td><td><p>B.n0=0,  B.n1=0</p></td></tr></tbody></table><p>input: 0 0 1 $</p></div><img src="img/yoo_graphviz_1976791986dfdbb8c5ac51987fa3296d.png"></div><div class="step step-level-1 t2c" step="17" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="27200" data-y="0" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th></th><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>1</p></td><td><p>A&#8594;B</p></td><td><p>print(B.n0),  print(B.n1)</p></td></tr><tr><td><p>2</p></td><td><p><span class="math ">\(B&#8594; 0 B_1\)</span></p></td><td><p><span class="math ">\(B.n_0=B_1.n_0+1, B.n_1=B_1.n_1\)</span></p></td></tr><tr><td><p>3</p></td><td><p><span class="math ">\(B&#8594; 1 B_1\)</span></p></td><td><p><span class="math ">\(B.n_0=B_1.n_0, B.n_1=B_1.n_1+1\)</span></p></td></tr><tr><td><p>4</p></td><td><p>B&#8594;&#955;</p></td><td><p><span class="math ">\(B.n_0=0,  B.n_1=0\)</span></p></td></tr></tbody></table><img src="img/yoo_graphviz_b3d002ea7950dc8c686fbf039ac18c02.png"></div><div class="step step-level-1 t2c" step="18" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="28800" data-y="0" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder equal-col"><thead><tr><th><p>t</p></th><th><p>0</p></th><th><p>1</p></th><th><p>$</p></th><th><p>A</p></th><th><p>B</p></th></tr></thead><tbody><tr><td><p>I0</p></td><td><p>s3</p></td><td><p>s4</p></td><td></td><td><p>1</p></td><td><p>2</p></td></tr><tr><td><p>I1</p></td><td></td><td></td><td><p>acc</p></td><td></td><td></td></tr><tr><td><p>I2</p></td><td></td><td></td><td><p>r1</p></td><td></td><td></td></tr><tr><td><p>I3</p></td><td><p>s3</p></td><td><p>s4</p></td><td><p>r4</p></td><td></td><td><p>5</p></td></tr><tr><td><p>I4</p></td><td><p>s3</p></td><td><p>s4</p></td><td><p>r4</p></td><td></td><td><p>6</p></td></tr><tr><td><p>I5</p></td><td></td><td></td><td><p>r2</p></td><td></td><td></td></tr><tr><td><p>I6</p></td><td></td><td></td><td><p>r3</p></td><td></td><td></td></tr></tbody></table><img src="img/yoo_graphviz_c414db9dfbe2d755bd085a2cad563bd8.png"></div><div class="step step-level-1 t2c" step="19" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="30400" data-y="0" data-z="0"><div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><tbody><tr><td><p>1</p></td><td><p>A&#8594;B</p></td><td><p>print(B.n0),  print(B.n1)</p></td></tr><tr><td><p>2</p></td><td><p><span class="math ">\(B&#8594; 0\ B_1\)</span></p></td><td><p><span class="math ">\(B.n_0=B_1.n_0+1, B.n_1=B_1.n_1\)</span></p></td></tr><tr><td><p>3</p></td><td><p><span class="math ">\(B&#8594; 1\ B_1\)</span></p></td><td><p><span class="math ">\(B.n_0=B_1.n_0, B.n_1=B_1.n_1+1\)</span></p></td></tr><tr><td><p>4</p></td><td><p>B&#8594;&#955;</p></td><td><p><span class="math ">\(B.n_0=0, B.n_1=0\)</span></p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder equal-col center"><thead><tr><th><p>t</p></th><th><p>0</p></th><th><p>1</p></th><th><p>$</p></th><th><p>A</p></th><th><p>B</p></th></tr></thead><tbody><tr><td><p><span class="math ">\(I_0\)</span></p></td><td><p>s3</p></td><td><p>s4</p></td><td></td><td><p>1</p></td><td><p>2</p></td></tr><tr><td><p><span class="math ">\(I_1\)</span></p></td><td></td><td></td><td><p>acc</p></td><td></td><td></td></tr><tr><td><p><span class="math ">\(I_2\)</span></p></td><td></td><td></td><td><p>r1</p></td><td></td><td></td></tr><tr><td><p><span class="math ">\(I_3\)</span></p></td><td><p>s3</p></td><td><p>s4</p></td><td><p>r4</p></td><td></td><td><p>5</p></td></tr><tr><td><p><span class="math ">\(I_4\)</span></p></td><td><p>s3</p></td><td><p>s4</p></td><td><p>r4</p></td><td></td><td><p>6</p></td></tr><tr><td><p><span class="math ">\(I_5\)</span></p></td><td></td><td></td><td><p>r2</p></td><td></td><td></td></tr><tr><td><p><span class="math ">\(I_6\)</span></p></td><td></td><td></td><td><p>r3</p></td><td></td><td></td></tr></tbody></table></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>Stack</p></th><th><p>input</p></th><th><p>action</p></th></tr></thead><tbody><tr><td><p><span class="math ">\(I_0\)</span></p></td><td><p>001$</p></td><td><p>Shift 3</p></td></tr><tr><td><p><span class="math ">\(I_0\ 0\ I_3\)</span></p></td><td><p>01$</p></td><td><p>Shift 3</p></td></tr><tr><td><p><span class="math ">\(I_0\ 0\ I_3\ 0\ I_3\)</span></p></td><td><p>1$</p></td><td><p>Shift 4</p></td></tr><tr><td><p><span class="math ">\(I_0\ 0\ I_3\ 0\ I_3\ 1\ I_4\)</span></p></td><td><p>$</p></td><td><p>r4 B[0&#1548;0]</p></td></tr><tr><td><p><span class="math ">\(I_0\ 0\ I_3\ 0\ I_3\ 1\ I_4\ B[0&#1548;0]\ I_6\)</span></p></td><td><p>$</p></td><td><p>r3 B[0&#1548;1]</p></td></tr><tr><td><p><span class="math ">\(I_0\ 0\ I_3\ 0\ I_3\ B[0&#1548;1]\ I_5\)</span></p></td><td><p>$</p></td><td><p>r2 B[1&#1548;1]</p></td></tr><tr><td><p><span class="math ">\(I_0\ 0\ I_3\ B[1&#1548;1]\ I_5\)</span></p></td><td><p>$</p></td><td><p>r2 B[2&#1548;1]</p></td></tr><tr><td><p><span class="math ">\(I_0\ B[2&#1548;1]\ I_2\)</span></p></td><td><p>$</p></td><td><p>r1 print(B[2&#1548;1])</p></td></tr><tr><td><p><span class="math ">\(I_0\ I_1\)</span></p></td><td><p>$</p></td><td><p>accept</p></td></tr></tbody></table></div><div class="step step-level-1" step="20" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="32000" data-y="0" data-z="0"><h1 id="similar-grammar">Similar Grammar</h1><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><tbody><tr><td><p>1</p></td><td><p>A&#8594;B</p></td><td><p>print(B.n0),  print(B.n1)</p></td></tr><tr><td><p>2</p></td><td><p><span class="math ">\(B&#8594; B_1 \ 0\)</span></p></td><td><p><span class="math ">\(B.n_0=B_1.n_0+1, B.n_1=B_1.n_1\)</span></p></td></tr><tr><td><p>3</p></td><td><p><span class="math ">\(B&#8594; B_1 \ 1\)</span></p></td><td><p><span class="math ">\(B.n_0=B_1.n_0, B.n_1=B_1.n_1+1\)</span></p></td></tr><tr><td><p>4</p></td><td><p>B&#8594;&#955;</p></td><td><p><span class="math ">\(B.n_0=0,  B.n_1=0\)</span></p></td></tr></tbody></table></div><div class="step step-level-1" step="21" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="33600" data-y="0" data-z="0"><img src="img/constructing_syntax_tree_for_simple.png" align="center"></div><div class="step step-level-1" step="22" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="35200" data-y="0" data-z="0"><img src="img/constructing_syntax_tree_for_simple_syntax_tree.png" align="center"></div><div class="step step-level-1 t2c" step="23" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="36800" data-y="0" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>E &#8594; E1 + T</p></td><td><p>E.loc=newtemp() , <br> E.code = E1.code || T.code || 'add E.loc, E1.loc, T.loc'</p></td></tr><tr><td><p>E &#8594; T</p></td><td><p>E.loc = T.loc, E.code=T.code</p></td></tr><tr><td><p>T &#8594; T1 * F</p></td><td><p>T.loc=newtemp() , <br> T.code = T1.code || F.code  || 'mult T.loc, T1.loc, F.loc'</p></td></tr><tr><td><p>T &#8594; F</p></td><td><p>T.loc = F.loc, T.code=F.code</p></td></tr><tr><td><p>F &#8594; ( E )</p></td><td><p>F.loc = E.loc,  F.code=E.code</p></td></tr><tr><td><p>F &#8594; id</p></td><td><p>F.loc = id.name,  F.code= ''</p></td></tr></tbody></table><ul><li>3 * 4 + 5</li><li>t1 &#8592; 3 * 4,  mult t1, 3 , 4</li><li>t2 &#8592; t1 + 5, add t2, t1, 5</li><li>mult t1, 3 , 4</li><li>add t2, t1, 5</li><li>(3 * 4) + 5</li><li>F &#8594; (E)</li><li>E &#8594; T</li><li>T &#8594; T * F</li><li>t1 &#8592; 3 * 4,  mult t1, 3 , 4</li><li>t2 &#8592; t1 + 5, add t2, t1, 5</li></ul></div><div class="step step-level-1 grid-2col-class" step="24" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="38400" data-y="0" data-z="0"><pre class="highlight code python"><span class="ln"> 1 </span><span class="n">lastTempValue</span> <span class="o">=</span> <span class="mi">0</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">def</span> <span class="nf">newTemp</span><span class="p">():</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">global</span> <span class="n">lastTempValue</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>  <span class="n">lastTempValue</span> <span class="o">+=</span><span class="mi">1</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>  <span class="n">s1</span> <span class="o">=</span> <span class="s1">'t'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lastTempValue</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>  <span class="k">return</span> <span class="n">s1</span><span class="p">;</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_S</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>  <span class="s1">'S : E'</span> <span class="c1"># S &#8594; E</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">"code"</span><span class="p">])</span><span class="w">
</span><span class="ln">11 </span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_E_plus_T</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="s1">'E : E PLUS T'</span> <span class="c1"># E &#8594; E + T</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">]</span> <span class="o">=</span> <span class="n">newTemp</span><span class="p">()</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span><span class="o">+</span>\
<span class="ln">17 </span>    <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span><span class="o">+</span>\
<span class="ln">18 </span>    <span class="s1">'add '</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span>\
<span class="ln">19 </span>    <span class="s1">', '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span>\
<span class="ln">20 </span>    <span class="s1">', '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="w">
</span><span class="ln">21 </span><span class="w">
</span><span class="ln">22 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_E_T</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>  <span class="s1">'E : T'</span> <span class="c1"># E &#8594; T</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">25 </span><span class="w">
</span><span class="ln">26 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_T_MUL_F</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>  <span class="s1">'T : T MUL F'</span> <span class="c1"># T &#8594; T * F</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">]</span> <span class="o">=</span> <span class="n">newTemp</span><span class="p">()</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span><span class="o">+</span>\
<span class="ln">31 </span>    <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span><span class="o">+</span>\</pre><pre class="highlight code python"><span class="ln"> 1 </span>    <span class="s1">'mult '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span>\
<span class="ln"> 2 </span>    <span class="s1">', '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span>\
<span class="ln"> 3 </span>    <span class="s1">', '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_T_F</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>  <span class="s1">'T : F'</span> <span class="c1"># T &#8594; F</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_F_a</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="s1">'F : NUMBER'</span> <span class="c1"># F &#8594; a</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span><span class="w">
</span><span class="ln">14 </span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_F_lpar_E_rpar</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="s1">'F : LPAR E RPAR'</span> <span class="c1"># F &#8594; ( E )</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w">
</span><span class="ln">18 </span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_error</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Syntax error at '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span> <span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="ln">21 </span><span class="w">
</span><span class="ln">22 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.yacc</span> <span class="k">as</span> <span class="nn">yacc</span><span class="p">;</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span><span class="n">yacc</span><span class="o">.</span><span class="n">yacc</span><span class="p">()</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>  <span class="k">try</span><span class="p">:</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>    <span class="n">s</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'calc &gt; '</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>    <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span><span class="k">break</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>    <span class="n">yacc</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>  <span class="k">except</span><span class="p">:</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'unexpected error'</span><span class="p">)</span></pre></div><div class="step step-level-1 t2c" step="25" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="40000" data-y="0" data-z="0"><h1 id="translation-scheme">Translation Scheme</h1><div><ul><li>E &#8594; T R</li><li>R &#8594; + T { print("+") } R1</li><li>R &#8594; &#955;</li><li>T &#8594; id { print(id.name) }</li></ul><ol><li>a+b+c</li><li>a b + c +</li></ol></div><ul><li>E &#8594; T R &#8594; id(a){print(id.name)} R</li><li>&#8594; R &#8594; + T {print("+")} R1</li><li>&#8594; T  {print("+")} R1 &#8594;</li><li>id(b){print(id.name)}{print("+")} R1</li><li>&#8594; {print("+")} R1</li><li>&#8594; R1 &#8594; + T {print("+")} R1</li><li>&#8594; T {print("+")} R1</li><li>&#8594; id(c){print(id.name)}{print("+")} R1</li><li>&#8594; {print("+")} R1 &#8594; R1 &#8594; &#955;</li></ul></div><div class="step step-level-1 t2c" step="26" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="41600" data-y="0" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th></th><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>1</p></td><td><p>T &#8594; F T '</p></td><td><p>T '.inh = F.val ,  T.val = T '.syn</p></td></tr><tr><td><p>2</p></td><td><p>T ' &#8594; * F <span class="math ">\(T '_1\)</span></p></td><td><p><span class="math ">\(T '_1\)</span>.inh = T '.inh * F.val,  T '.syn = <span class="math ">\(T '_1\)</span>.syn</p></td></tr><tr><td><p>3</p></td><td><p>T ' &#8594; &#955;</p></td><td><p>T '.syn = T '.inh</p></td></tr><tr><td><p>4</p></td><td><p>F &#8594; id</p></td><td><p>F.val = id.name</p></td></tr></tbody></table><img src="img/sdd_top_down_expression_dependency_graph.png" width="400px" align="center"></div><div class="step step-level-1" step="27" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="43200" data-y="0" data-z="0"><img src="img/type_definition_grammar.png" align="center"></div><div class="step step-level-1" step="28" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="44800" data-y="0" data-z="0"><img src="img/constructing_tree_top_down_parsing.png" align="center"></div><div class="step step-level-1" step="29" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="46400" data-y="0" data-z="0"><img src="img/constructing_tree_top_down_parsing_dependency_graph.png" align="center"></div><div class="step step-level-1" step="30" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="48000" data-y="0" data-z="0"><h1 id="specification">Specification</h1><ul><li class="substep">attributes</li><li class="substep">Semantic Rules</li><li class="substep">may generate intermediate codes</li><li class="substep">may put information into the symbol table</li><li class="substep">may perform type checking</li><li class="substep">may issue error messages</li><li class="substep">may perform some other activities</li><li class="substep">in fact, they may perform almost any activities.</li><li class="substep">An attribute may hold almost any thing.</li><li class="substep">a string, a number, a memory location, a complex record.</li><li class="substep">inherited attribute</li><li class="substep">synthesized attribute</li></ul></div><div class="step step-level-1" step="31" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="49600" data-y="0" data-z="0"><h1 id="s-attributed-definitions">S-Attributed Definitions</h1><ul><li class="substep">An SDD that involves only synthesized attributes is called S-attributed</li><li class="substep">An S-attributed SDD can be implemented naturally in conjunction with an LR parser.</li></ul></div><div class="step step-level-1" step="32" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="51200" data-y="0" data-z="0"><h1 id="circular-dependency">circular dependency</h1><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>A &#8594; B</p></td><td><p>A.s = B.i  ,   B.i = A.s + 1</p></td></tr></tbody></table><img src="img/The_circular_dependency.png" align="center"></div><div class="step step-level-1" step="33" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="52800" data-y="0" data-z="0"><h1 id="l-attributed-definitions">L-Attributed Definitions</h1><p>Each attribute must be either</p><ol><li class="substep">Synthesized, or</li><li class="substep">Inherited, but for every rule like <span class="math ">\(A &#8594; X_1X_2 ... X_n\)</span> which contains an inherited attribute <span class="math ">\(X_i.a\)</span>, the rule may use only:<blockquote><ul><li class="substep">Inherited attributes associated with the head A.</li><li class="substep">attributes associated with the occurrences of symbols <span class="math ">\(X_1, X_2 , . . . , X_{i-1}\)</span> is located to the left of <span class="math ">\(X_i\)</span>.</li></ul></blockquote></li></ol></div><div class="step step-level-1" step="34" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="54400" data-y="0" data-z="0"><p>Examples</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>D &#8594; T L</p></td><td><p>L.in = T.type</p></td></tr><tr><td><p>T &#8594; int</p></td><td><p>T.type = integer</p></td></tr><tr><td><p>T &#8594; real</p></td><td><p>T.type = real</p></td></tr><tr><td><p>L &#8594; <span class="math ">\(L_1\)</span>, id</p></td><td><p><span class="math ">\(L_1\)</span>.in = L.in,   addtype(id.entry,L.in)</p></td></tr><tr><td><p>L &#8594; id</p></td><td><p>addtype(id.entry,L.in)</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>E &#8594; F R</p></td><td><p>R.inh = F.val , E.val = R.val</p></td></tr><tr><td><p>R &#8594; + F <span class="math ">\(R_1\)</span></p></td><td><p><span class="math ">\(R_1\)</span>.inh = R.inh + F.val , R.val = <span class="math ">\(R_1\)</span>.val</p></td></tr><tr><td><p>R &#8594; &#955;</p></td><td><p>R.val = R.inh</p></td></tr><tr><td><p>F &#8594; ( E )</p></td><td><p>F.val = E.val</p></td></tr><tr><td><p>F &#8594; digit</p></td><td><p>F.val = digit.lexval</p></td></tr></tbody></table></div><div class="step step-level-1" step="35" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="56000" data-y="0" data-z="0"><p>Not L-Attributed</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>A &#8594; B D</p></td><td><p>A.s = B.b , B.i = f(D.d, A.s)</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>A &#8594; L M</p></td><td><p>L.in = f1(A.i), M.in = f2(L.s), A.s = f3(M.s)</p></td></tr><tr><td><p>A &#8594; Q R</p></td><td><p>R.in = f4(A.in), Q.in = f5(R.s), A.s = f3(Q.s)</p></td></tr></tbody></table></div><div class="step step-level-1" step="36" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="57600" data-y="0" data-z="0"><h1 id="translation-scheme-vs-sdd">Translation Scheme vs SDD</h1><p>SDD</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>E &#8594; F R</p></td><td><p>R.inh = F.val , E.val = R.val</p></td></tr><tr><td><p>R &#8594; + F <span class="math ">\(R_1\)</span></p></td><td><p><span class="math ">\(R_1\)</span>.inh = R.inh + F.val , R.val = <span class="math ">\(R_1\)</span>.val</p></td></tr><tr><td><p>R &#8594; &#955;</p></td><td><p>R.val = R.inh</p></td></tr><tr><td><p>F &#8594; ( E )</p></td><td><p>F.val = E.val</p></td></tr><tr><td><p>F &#8594; digit</p></td><td><p>F.val = digit.lexval</p></td></tr></tbody></table><p>Translation Scheme</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production and Semantic Rules</p></th></tr></thead><tbody><tr><td><p>E &#8594; F {R.inh = F.val} R {E.val = R.val}</p></td></tr><tr><td><p>R &#8594; + F {<span class="math ">\(R_1\)</span>.inh = R.inh + F.val} <span class="math ">\(R_1\)</span> {R.val = <span class="math ">\(R_1\)</span>.val}</p></td></tr><tr><td><p>R &#8594; &#955; {R.val = R.inh}</p></td></tr><tr><td><p>F &#8594; ( E ) {F.val = E.val}</p></td></tr><tr><td><p>F &#8594; digit {F.val = digit.lexval}</p></td></tr></tbody></table></div><div class="step step-level-1" step="37" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="59200" data-y="0" data-z="0"><p>SDD for typesetting boxes</p><img src="img/SDD_for_typesetting_boxes.png" align="center"></div><div class="step step-level-1" step="38" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="60800" data-y="0" data-z="0"><h1 id="end">End</h1></div></div><div id="slide-number" class="slide-number">
         1
      </div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/gotoSlide.js"></script><script type="text/javascript" src="js/hovercraft.js"></script><script type="text/javascript" src="js/MathJax/es5/tex-mml-chtml.js"></script><script type="text/javascript">
      document.getElementById("impress").addEventListener("impress:stepenter", update_slide_number, false);
    </script></body></html>