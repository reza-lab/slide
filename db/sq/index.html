<html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta charset="UTF-8"><meta name="generator" content="bildumilo 1.0 https://github.com/yoosofan/bildumilo"><link rel="stylesheet" href="css/hovercraft.css" media="all"><link rel="stylesheet" href="css/highlight.css" media="all"><link rel="stylesheet" href="css/style.css" media="all"><link rel="stylesheet" href="css/sql.css" media="all"><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script></head><body class="impress-not-supported"><div id="impress" data-width="1024" data-height="768" data-transition-duration="1000"><div class="step step-level-1" step="0" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="database-course">Database Course</h1><p>Ahmad Yoosofan</p><p>SQL</p><p>University of Kashan</p></div><div class="step step-level-1" step="1" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><h1 id="create-table">create table</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">(</span><span class="w">
   </span><span class="n">sn</span><span class="w">      </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
   </span><span class="n">sname</span><span class="w">   </span><span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span><span class="w">
   </span><span class="n">status</span><span class="w">  </span><span class="nb">int</span><span class="w">  </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="n">city</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><h2 id="dsl-data-sub-language">DSL(Data Sub Language)</h2><p>SQL (Structured Query Language)</p><ul><li>DDL: Data Definition Language</li><li>DML: Data Manipluation Language</li><li>DCL: Data Control Language</li></ul><p>DDL: create table</p></div><div class="step step-level-1 t2c" step="2" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><h1 id="sqlite">SQLite</h1><div><p><em>Terminal and GUI</em></p><ol><li><a href="https://www.sqlite.org/download.html">https://www.sqlite.org/download.html</a></li><li><a href="https://sqlite.org/src/timeline">https://sqlite.org/src/timeline</a></li><li><a href="https://github.com/sqlite/sqlite">https://github.com/sqlite/sqlite</a></li><li><a href="https://www.sqlite.org/cli.html">https://www.sqlite.org/cli.html</a></li><li><a href="https://sqlitebrowser.org/">https://sqlitebrowser.org/</a></li><li><a href="https://github.com/sqlitebrowser/sqlitebrowser">https://github.com/sqlitebrowser/sqlitebrowser</a></li></ol></div><div><p><em>Online</em></p><ol><li><a href="https://sql.js.org/examples/GUI/">https://sql.js.org/examples/GUI/</a></li><li><a href="https://sql.js.org/#/">https://sql.js.org/#/</a></li><li><a href="https://www.sqlitetutorial.net/">https://www.sqlitetutorial.net/</a></li><li><a href="https://sqliteonline.com/">https://sqliteonline.com/</a></li><li><a href="https://extendsclass.com/sqlite-browser.html#">https://extendsclass.com/sqlite-browser.html#</a></li><li><a href="https://inloop.github.io/sqlite-viewer/">https://inloop.github.io/sqlite-viewer/</a></li><li><a href="https://github.com/inloop/sqlite-viewer">https://github.com/inloop/sqlite-viewer</a></li><li><a href="https://github.com/sql-js/sql.js">https://github.com/sql-js/sql.js</a></li><li><a href="https://sql.js.org/#/">https://sql.js.org/#/</a></li><li><a href="http://sqlfiddle.com/">http://sqlfiddle.com/</a></li><li><a href="https://github.com/coleifer/sqlite-web">https://github.com/coleifer/sqlite-web</a></li><li><a href="https://sqlitestudio.pl/">https://sqlitestudio.pl/</a></li><li><a href="https://www.onworks.net/programs/sqlite-online?amp=0">https://www.onworks.net/programs/sqlite-online?amp=0</a></li><li><a href="https://www.heidisql.com/#featurelist">https://www.heidisql.com/#featurelist</a></li><li><a href="https://sqlzoo.net/">https://sqlzoo.net/</a></li></ol></div></div><div class="step step-level-1" step="3" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">(</span><span class="w">
   </span><span class="n">sn</span><span class="w">      </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
   </span><span class="n">sname</span><span class="w">   </span><span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span><span class="w">
   </span><span class="n">status</span><span class="w">  </span><span class="nb">int</span><span class="w">  </span><span class="k">default</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="w">
   </span><span class="n">city</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="p">(</span><span class="w">
   </span><span class="n">pn</span><span class="w">     </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
   </span><span class="n">pname</span><span class="w">  </span><span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span><span class="w">
   </span><span class="n">color</span><span class="w">  </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
   </span><span class="n">weight</span><span class="w"> </span><span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w">
   </span><span class="n">city</span><span class="w">   </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="p">(</span><span class="w">
   </span><span class="n">sn</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w">
   </span><span class="n">pn</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w">
   </span><span class="n">qty</span><span class="w">   </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="w">
   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="4" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><h1 id="database">Database</h1><div><p>SP database includes the following</p><ul><li>s, p, sp</li></ul><p><strong>Database Schema</strong></p><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">sp</span><span class="p">;</span></pre></div><div><p><strong>DBMS(Database Management System)</strong></p><ul><li>An application</li><li>RDBMS</li><li>DB2, Oracle, PostgreSQL, MySQL, SqlServer, MariaDB</li><li>SQLite (Lack of DCL commands, each db on a file)</li></ul></div></div><div class="step step-level-1" step="5" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><h1 id="insert">insert</h1><p>DML</p><pre class="highlight code sql"><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">s</span><span class="p">(</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w">  </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'s1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Smith'</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="s1">'London'</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">s</span><span class="p">(</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w">  </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'s2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Jones'</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">s</span><span class="p">(</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w">  </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'s3'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Blake'</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">s</span><span class="p">(</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w">  </span><span class="ss">"status"</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'s4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Clark'</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="s1">'London'</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">s</span><span class="p">(</span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'Adams'</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="s1">'Athens'</span><span class="p">,</span><span class="w"> </span><span class="s1">'s5'</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'s6'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Ali'</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="s1">'&#1705;&#1575;&#1588;&#1575;&#1606;'</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1" step="6" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><h1 id="p">P</h1><pre class="highlight code sql"><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">p</span><span class="p">(</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'p1'</span><span class="p">,</span><span class="s1">'Nut'</span><span class="w">  </span><span class="p">,</span><span class="s1">'Red'</span><span class="w">  </span><span class="p">,</span><span class="mi">12</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="s1">'London'</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">p</span><span class="p">(</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="w">
    </span><span class="p">(</span><span class="s1">'p2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Bolt'</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">'Green'</span><span class="p">,</span><span class="w"> </span><span class="mi">17</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="p">),</span><span class="w">
    </span><span class="p">(</span><span class="s1">'p3'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Screw'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Blue'</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">17</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s1">'Oslo'</span><span class="w">  </span><span class="p">),</span><span class="w">
    </span><span class="p">(</span><span class="s1">'p4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Screw'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Red'</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s1">'London'</span><span class="p">),</span><span class="w">
    </span><span class="p">(</span><span class="s1">'p5'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Cam'</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="s1">'Blue'</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="p">),</span><span class="w">
    </span><span class="p">(</span><span class="s1">'p6'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Cog'</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="s1">'Red'</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s1">'London'</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">p</span><span class="p">(</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'p7'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Nut'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Red'</span><span class="p">,</span><span class="w"> </span><span class="s1">'London'</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">p</span><span class="p">(</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'p8'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Bolt'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Green'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Paris'</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1" step="7" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><h1 id="sp">SP</h1><pre class="highlight code sql"><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">sp</span><span class="p">(</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">qty</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p1'</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p2'</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p3'</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p4'</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p5'</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p6'</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p1'</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p2'</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s3'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p2'</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p2'</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p4'</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p5'</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">),</span><span class="w">
  </span><span class="p">(</span><span class="s1">'s6'</span><span class="p">,</span><span class="w"> </span><span class="s1">'p2'</span><span class="p">,</span><span class="w"> </span><span class="mi">350</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="8" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><div><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="n">p</span><span class="err">{</span><span class="n">pname</span><span class="err">}</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="9" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1608; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><div><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="n">p</span><span class="err">{</span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="err">}</span><span class="w"> </span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>Nut</p></td><td><p>12</p></td></tr><tr><td><p>Bolt</p></td><td><p>17</p></td></tr><tr><td><p>Screw</p></td><td><p>17</p></td></tr><tr><td><p>Screw</p></td><td><p>14</p></td></tr><tr><td><p>Cam</p></td><td><p>12</p></td></tr><tr><td><p>Cog</p></td><td><p>19</p></td></tr><tr><td><p>Nut</p></td><td></td></tr><tr><td><p>Bolt</p></td><td></td></tr></tbody></table></div><div class="step step-level-1" step="10" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1593;&#1591;&#1607;&#8204;&#1607;&#1575; &#1608; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1576;&#1607; &#1711;&#1585;&#1605; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th><th><p>weight * 1000</p></th></tr></thead><tbody><tr><td><p>Nut</p></td><td><p>12000</p></td></tr><tr><td><p>Bolt</p></td><td><p>17000</p></td></tr><tr><td><p>Screw</p></td><td><p>17000</p></td></tr><tr><td><p>Screw</p></td><td><p>14000</p></td></tr><tr><td><p>Cam</p></td><td><p>12000</p></td></tr><tr><td><p>Cog</p></td><td><p>19000</p></td></tr><tr><td><p>Nut</p></td><td></td></tr><tr><td><p>Bolt</p></td><td></td></tr></tbody></table></div><div class="step step-level-1" step="11" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><h1 id="as-rename">as (rename)</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">gweight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th><th><p>gweight</p></th></tr></thead><tbody><tr><td><p>Nut</p></td><td><p>12000</p></td></tr><tr><td><p>Bolt</p></td><td><p>17000</p></td></tr><tr><td><p>Screw</p></td><td><p>17000</p></td></tr><tr><td><p>Screw</p></td><td><p>14000</p></td></tr><tr><td><p>Cam</p></td><td><p>12000</p></td></tr><tr><td><p>Cog</p></td><td><p>19000</p></td></tr><tr><td><p>Nut</p></td><td></td></tr><tr><td><p>Bolt</p></td><td></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="12" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="19200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1588;&#1607;&#1585; &#1705;&#1575;&#1588;&#1575;&#1606; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><div><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'&#1705;&#1575;&#1588;&#1575;&#1606;'</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="c1">-- (s where city = '&#1705;&#1575;&#1588;&#1575;&#1606;') {pname}</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>sname</p></th></tr></thead><tbody><tr><td><p>Jones</p></td></tr><tr><td><p>Blake</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="13" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="20800" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pn</p></th></tr></thead><tbody><tr><td><p>p1</p></td></tr><tr><td><p>p2</p></td></tr><tr><td><p>p3</p></td></tr><tr><td><p>p4</p></td></tr><tr><td><p>p5</p></td></tr><tr><td><p>p6</p></td></tr><tr><td><p>p1</p></td></tr><tr><td><p>p2</p></td></tr><tr><td><p>p2</p></td></tr><tr><td><p>p2</p></td></tr><tr><td><p>p4</p></td></tr><tr><td><p>p5</p></td></tr><tr><td><p>p2</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="14" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="22400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="p">(</span><span class="w">
  </span><span class="p">(</span><span class="w">
     </span><span class="p">(</span><span class="w">
       </span><span class="n">p</span><span class="w"> </span><span class="k">rename</span><span class="w"> </span><span class="n">pn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ppn</span><span class="w">
     </span><span class="p">)</span><span class="w">
     </span><span class="n">times</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">ppn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="n">pname</span><span class="err">}</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Bolt</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="15" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="24000" data-y="0" data-z="0"><h1 id="join">join</h1><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="n">pname</span><span class="err">}</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="o">=</span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="16" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="25600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1585; &#1588;&#1607;&#1585; &#1570;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1608;&#1580;&#1608;&#1583; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1583;</p><div><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">city</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Nut</p></td></tr><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Bolt</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="17" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="27200" data-y="0" data-z="0"><p class="rtl-h1">&#1575;&#1591;&#1604;&#1575;&#1593;&#1575;&#1578; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>sn</p></th><th><p>sname</p></th><th><p>status</p></th><th><p>city</p></th></tr></thead><tbody><tr><td><p>s1</p></td><td><p>Smith</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>s2</p></td><td><p>Jones</p></td><td><p>10</p></td><td><p>Paris</p></td></tr><tr><td><p>s3</p></td><td><p>Blake</p></td><td><p>30</p></td><td><p>Paris</p></td></tr><tr><td><p>s4</p></td><td><p>Clark</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>s5</p></td><td><p>Adams</p></td><td><p>30</p></td><td><p>Athens</p></td></tr><tr><td><p>s6</p></td><td><p>Ali</p></td><td><p>40</p></td><td><p>&#1705;&#1575;&#1588;&#1575;&#1606;</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="18" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="28800" data-y="0" data-z="0"><p class="rtl-h1">&#1575;&#1591;&#1604;&#1575;&#1593;&#1575;&#1578; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1608; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607;&#8204;&#1575;&#1606;&#1583;&#1548; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">))</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pn</p></th><th><p>pname</p></th><th><p>color</p></th><th><p>weight</p></th><th><p>city</p></th><th><p>sn</p></th><th><p>qty</p></th><th><p>sname</p></th><th><p>status</p></th><th><p>city</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>Nut</p></td><td><p>Red</p></td><td><p>12</p></td><td><p>London</p></td><td><p>s1</p></td><td><p>300</p></td><td><p>Smith</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>p2</p></td><td><p>Bolt</p></td><td><p>Green</p></td><td><p>17</p></td><td><p>Paris</p></td><td><p>s1</p></td><td><p>200</p></td><td><p>Smith</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>p3</p></td><td><p>Screw</p></td><td><p>Blue</p></td><td><p>17</p></td><td><p>Oslo</p></td><td><p>s1</p></td><td><p>400</p></td><td><p>Smith</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>p4</p></td><td><p>Screw</p></td><td><p>Red</p></td><td><p>14</p></td><td><p>London</p></td><td><p>s1</p></td><td><p>200</p></td><td><p>Smith</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>p5</p></td><td><p>Cam</p></td><td><p>Blue</p></td><td><p>12</p></td><td><p>Paris</p></td><td><p>s1</p></td><td><p>100</p></td><td><p>Smith</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>p6</p></td><td><p>Cog</p></td><td><p>Red</p></td><td><p>19</p></td><td><p>London</p></td><td><p>s1</p></td><td><p>100</p></td><td><p>Smith</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>p1</p></td><td><p>Nut</p></td><td><p>Red</p></td><td><p>12</p></td><td><p>London</p></td><td><p>s2</p></td><td><p>300</p></td><td><p>Jones</p></td><td><p>10</p></td><td><p>Paris</p></td></tr><tr><td><p>p2</p></td><td><p>Bolt</p></td><td><p>Green</p></td><td><p>17</p></td><td><p>Paris</p></td><td><p>s2</p></td><td><p>400</p></td><td><p>Jones</p></td><td><p>10</p></td><td><p>Paris</p></td></tr><tr><td><p>p2</p></td><td><p>Bolt</p></td><td><p>Green</p></td><td><p>17</p></td><td><p>Paris</p></td><td><p>s3</p></td><td><p>200</p></td><td><p>Blake</p></td><td><p>30</p></td><td><p>Paris</p></td></tr><tr><td><p>p2</p></td><td><p>Bolt</p></td><td><p>Green</p></td><td><p>17</p></td><td><p>Paris</p></td><td><p>s4</p></td><td><p>200</p></td><td><p>Clark</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>p4</p></td><td><p>Screw</p></td><td><p>Red</p></td><td><p>14</p></td><td><p>London</p></td><td><p>s4</p></td><td><p>300</p></td><td><p>Clark</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>p5</p></td><td><p>Cam</p></td><td><p>Blue</p></td><td><p>12</p></td><td><p>Paris</p></td><td><p>s4</p></td><td><p>400</p></td><td><p>Clark</p></td><td><p>20</p></td><td><p>London</p></td></tr><tr><td><p>p2</p></td><td><p>Bolt</p></td><td><p>Green</p></td><td><p>17</p></td><td><p>Paris</p></td><td><p>s6</p></td><td><p>350</p></td><td><p>Ali</p></td><td><p>40</p></td><td><p>&#1705;&#1575;&#1588;&#1575;&#1606;</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="19" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="30400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1575;&#1586; &#1588;&#1607;&#1585; &#1705;&#1575;&#1588;&#1575;&#1606; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="o">=</span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'&#1705;&#1575;&#1588;&#1575;&#1606;'</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'&#1705;&#1575;&#1588;&#1575;&#1606;'</span><span class="w">
</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="20" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="32000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1608; &#1606;&#1575;&#1605; &#1587;&#1578;&#1608;&#1606; &#1570;&#1606; &#1585;&#1575; name &#1576;&#1711;&#1584;&#1575;&#1585;&#1740;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">name</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>name</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="21" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="33600" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607; &#1585;&#1575; &#1576;&#1583;&#1608;&#1606; &#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1578;&#1705;&#1585;&#1575;&#1585;&#1740; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pn</p></th></tr></thead><tbody><tr><td><p>p1</p></td></tr><tr><td><p>p2</p></td></tr><tr><td><p>p3</p></td></tr><tr><td><p>p4</p></td></tr><tr><td><p>p5</p></td></tr><tr><td><p>p6</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="22" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="35200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1575;&#1587;&#1578;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="23" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="36800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1585;&#1575; &#1576;&#1583;&#1608;&#1606; &#1578;&#1705;&#1585;&#1575;&#1585; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>city</p></th></tr></thead><tbody><tr><td><p>London</p></td></tr><tr><td><p>Paris</p></td></tr><tr><td><p>Athens</p></td></tr><tr><td><p>&#1705;&#1575;&#1588;&#1575;&#1606;</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="24" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="38400" data-y="0" data-z="0"><h1 id="use-another-name-for-a-table-in-query">Use Another name for a Table in Query</h1><div><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="n">a</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">name</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'a'</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'b'</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">M</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>a</p></th><th><p>name</p></th><th><p>a</p></th><th><p>name</p></th></tr></thead><tbody><tr><td><p>1</p></td><td><p>a</p></td><td><p>1</p></td><td><p>a</p></td></tr><tr><td><p>1</p></td><td><p>a</p></td><td><p>2</p></td><td><p>b</p></td></tr><tr><td><p>2</p></td><td><p>b</p></td><td><p>1</p></td><td><p>a</p></td></tr><tr><td><p>2</p></td><td><p>b</p></td><td><p>2</p></td><td><p>b</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">name</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">M</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">a</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>name</p></th></tr></thead><tbody><tr><td><p>a</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">M</span><span class="w">
  </span><span class="k">on</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">a</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>a</p></th><th><p>name</p></th><th><p>a</p></th><th><p>name</p></th></tr></thead><tbody><tr><td><p>1</p></td><td><p>a</p></td><td><p>2</p></td><td><p>b</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="25" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="40000" data-y="0" data-z="0"><h1 id="use-another-name-for-a-table-in-query-1">Use Another name for a Table in Query</h1><p class="substep rtl-h2">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1583;&#1587;&#1578; &#1705;&#1605; &#1575;&#1586; &#1608;&#1586;&#1606; &#1740;&#1705; &#1602;&#1591;&#1593;&#1607;&#1620; &#1583;&#1740;&#1711;&#1585; &#1576;&#1740;&#1588;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;</p><p class="substep rtl-h2">&#1606;&#1575;&#1605; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1576;&#1607; &#1580;&#1586; &#1602;&#1591;&#1593;&#1607;&#8204; &#1740;&#1575; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1705;&#1607; &#1705;&#1605;&#1578;&#1585;&#1740;&#1606; &#1608;&#1586;&#1606; &#1585;&#1575; &#1583;&#1575;&#1585;&#1606;&#1583;</p><div><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">on</span><span class="w">
  </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w">
</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Cog</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="26" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="41600" data-y="0" data-z="0"><p class="rtl-h1">&#1605;&#1575;&#1606;&#1606;&#1583; &#1605;&#1587;&#1571;&#1604;&#1607;&#1620; &#1662;&#1740;&#1588; &#1576;&#1575; &#1575;&#1740;&#1606; &#1578;&#1601;&#1575;&#1608;&#1578; &#1705;&#1607; &#1606;&#1575;&#1605;&#8204;&#1607;&#1575;&#1740; &#1578;&#1705;&#1585;&#1575;&#1585;&#1740; &#1583;&#1585;  &#1662;&#1575;&#1587;&#1582; &#1606;&#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w">
</span><span class="p">;</span></pre><p class="substep rtl-h2">&#1585;&#1575;&#1607; &#1581;&#1604; &#1583;&#1740;&#1711;&#1585;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">on</span><span class="w">
  </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cog</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="27" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="43200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1583;&#1587;&#1578; &#1705;&#1605; &#1575;&#1586; &#1608;&#1586;&#1606; &#1740;&#1705; &#1602;&#1591;&#1593;&#1607;&#1620; &#1583;&#1740;&#1711;&#1585; &#1705;&#1605;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">on</span><span class="w">
  </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cam</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="28" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="44800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1606;&#1575;&#1605; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#8204;&#1588;&#1575;&#1606; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th><th><p>sname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td><td><p>Smith</p></td></tr><tr><td><p>Bolt</p></td><td><p>Smith</p></td></tr><tr><td><p>Screw</p></td><td><p>Smith</p></td></tr><tr><td><p>Screw</p></td><td><p>Smith</p></td></tr><tr><td><p>Cam</p></td><td><p>Smith</p></td></tr><tr><td><p>Cog</p></td><td><p>Smith</p></td></tr><tr><td><p>Nut</p></td><td><p>Jones</p></td></tr><tr><td><p>Bolt</p></td><td><p>Jones</p></td></tr><tr><td><p>Bolt</p></td><td><p>Blake</p></td></tr><tr><td><p>Bolt</p></td><td><p>Clark</p></td></tr><tr><td><p>Screw</p></td><td><p>Clark</p></td></tr><tr><td><p>Cam</p></td><td><p>Clark</p></td></tr><tr><td><p>Bolt</p></td><td><p>Ali</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="29" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="46400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606;&#8204;&#1588;&#1575;&#1606; &#1583;&#1587;&#1578; &#1705;&#1605; &#1575;&#1586; &#1608;&#1586;&#1606; &#1740;&#1705; &#1602;&#1591;&#1593;&#1607;&#1620; &#1576;&#1575; &#1585;&#1606;&#1711; &#1602;&#1585;&#1605;&#1586; &#1705;&#1605;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w">
  </span><span class="k">and</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">color</span><span class="o">=</span><span class="s1">'Red'</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">on</span><span class="w">
  </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">color</span><span class="o">=</span><span class="s1">'Red'</span><span class="w">
</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cam</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">on</span><span class="w">
  </span><span class="n">p1</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">p1</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Red'</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="30" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="48000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1606;&#1575;&#1605; &#1588;&#1607;&#1585; &#1570;&#1606;&#1607;&#1575; &#1576;&#1575; L &#1570;&#1594;&#1575;&#1586; &#1588;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'L%'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Nut</p></td></tr></tbody></table><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pn</p></th><th><p>pname</p></th><th><p>color</p></th><th><p>weight</p></th><th><p>city</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>Nut</p></td><td><p>Red</p></td><td><p>12</p></td><td><p>London</p></td></tr><tr><td><p>p2</p></td><td><p>Bolt</p></td><td><p>Green</p></td><td><p>17</p></td><td><p>Paris</p></td></tr><tr><td><p>p3</p></td><td><p>Screw</p></td><td><p>Blue</p></td><td><p>17</p></td><td><p>Oslo</p></td></tr><tr><td><p>p4</p></td><td><p>Screw</p></td><td><p>Red</p></td><td><p>14</p></td><td><p>London</p></td></tr><tr><td><p>p5</p></td><td><p>Cam</p></td><td><p>Blue</p></td><td><p>12</p></td><td><p>Paris</p></td></tr><tr><td><p>p6</p></td><td><p>Cog</p></td><td><p>Red</p></td><td><p>19</p></td><td><p>London</p></td></tr><tr><td><p>p7</p></td><td><p>Nut</p></td><td><p>Red</p></td><td></td><td><p>London</p></td></tr><tr><td><p>p8</p></td><td><p>Bolt</p></td><td><p>Green</p></td><td></td><td><p>Paris</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="31" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="49600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1576;&#1575; P &#1570;&#1594;&#1575;&#1586; &#1588;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'P%'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th><th><p>city</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td><td><p>Paris</p></td></tr><tr><td><p>Cam</p></td><td><p>Paris</p></td></tr><tr><td><p>Bolt</p></td><td><p>Paris</p></td></tr></tbody></table></div><div class="step step-level-1" step="32" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="51200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1606;&#1575;&#1605; &#1588;&#1607;&#1585; &#1570;&#1606;&#1607;&#1575; &#1662;&#1606;&#1580; &#1581;&#1585;&#1601;&#1740; &#1576;&#1575;&#1588;&#1583;  &#1576;&#1575; S &#1570;&#1594;&#1575;&#1586; &#1588;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'S____'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Screw</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="33" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="52800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1585;&#1608;&#1606; &#1606;&#1575;&#1605; &#1588;&#1607;&#1585; &#1570;&#1606;&#1607;&#1575; &#1585;&#1588;&#1578;&#1607;&#1620; is &#1608;&#1580;&#1608;&#1583; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'%is%'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>city</p></th></tr></thead><tbody><tr><td><p>Paris</p></td></tr></tbody></table></div><div class="step step-level-1" step="34" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="54400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578; &#1608; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1588;&#1607;&#1585; &#1570;&#1606;&#1607;&#1575; &#1583;&#1587;&#1578; &#1705;&#1605; &#1587;&#1607;&#8204;&#1581;&#1585;&#1601;&#1740; &#1576;&#1575;&#1588;&#1606;&#1583; &#1608; &#1576;&#1575; &#1585;&#1588;&#1578;&#1607;&#1620; &#1586;&#1740;&#1585; &#1570;&#1594;&#1575;&#1586; &#1588;&#1608;&#1583;.</p><p>bn_</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'bn\_'</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1" step="35" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="56000" data-y="0" data-z="0"><h1 id="escape">escape</h1><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'P\_%'</span><span class="w"> </span><span class="k">escape</span><span class="w"> </span><span class="s1">'\'</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'P!_%'</span><span class="w"> </span><span class="k">escape</span><span class="w"> </span><span class="s1">'!'</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'P#_%'</span><span class="w"> </span><span class="k">escape</span><span class="w"> </span><span class="s1">'#'</span><span class="w">
</span><span class="p">;</span><span class="w">

</span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="ss">"an\_%"</span><span class="w"> </span><span class="k">escape</span><span class="w"> </span><span class="ss">"\"</span><span class="w">
</span><span class="p">;</span><span class="w"> </span><span class="c1">-- "</span></pre></div><div class="step step-level-1 t2c" step="36" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="57600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1606;&#1575;&#1605; &#1588;&#1607;&#1585; &#1570;&#1606;&#1607;&#1575; &#1576;&#1575; an &#1662;&#1575;&#1740;&#1575;&#1606; &#1606;&#1740;&#1575;&#1601;&#1578;&#1607; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="ss">"%an"</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr></tbody></table></div><div class="step step-level-1" step="37" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="59200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1576;&#1575;&#1588;&#1606;&#1583; &#1608; &#1662;&#1575;&#1587;&#1582; &#1576;&#1585; &#1662;&#1575;&#1740;&#1607;&#1620; &#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607; &#1575;&#1586; &#1705;&#1608;&#1670;&#1705; &#1576;&#1607; &#1576;&#1586;&#1585;&#1711; &#1605;&#1585;&#1578;&#1576; &#1588;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="p">;</span></pre><p class="rtl-h2 substep">&#1606;&#1575;&#1605; &#1608; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1607;&#1587;&#1578;&#1606;&#1583; &#1608; &#1662;&#1575;&#1587;&#1582; &#1576;&#1585; &#1662;&#1575;&#1740;&#1607;&#1620; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607; &#1575;&#1586; &#1705;&#1608;&#1670;&#1705; &#1576;&#1607; &#1576;&#1586;&#1585;&#1711; &#1605;&#1585;&#1578;&#1576; &#1588;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">asc</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="38" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="60800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1608; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1607;&#1587;&#1578;&#1606;&#1583; &#1608; &#1662;&#1575;&#1587;&#1582; &#1576;&#1585; &#1662;&#1575;&#1740;&#1607;&#1620; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607; &#1575;&#1586; &#1576;&#1586;&#1585;&#1711; &#1576;&#1607; &#1705;&#1608;&#1670;&#1705; &#1605;&#1585;&#1578;&#1576; &#1588;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">desc</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td><td><p>17</p></td></tr><tr><td><p>Cam</p></td><td><p>12</p></td></tr><tr><td><p>Bolt</p></td><td></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="39" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="62400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1608; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606;&#8204;&#1588;&#1575;&#1606; &#1576;&#1740;&#1606; &#1777;&#1778; &#1608; &#1777;&#1780; &#1576;&#1575;&#1588;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">14</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">14</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>Nut</p></td><td><p>12</p></td></tr><tr><td><p>Screw</p></td><td><p>14</p></td></tr><tr><td><p>Cam</p></td><td><p>12</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="40" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="64000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1608; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606;&#8204;&#1588;&#1575;&#1606; &#1576;&#1740;&#1606; &#1777;&#1778; &#1608; &#1777;&#1780; &#1606;&#1576;&#1575;&#1588;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">14</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">14</span><span class="w">
</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td><td><p>17</p></td></tr><tr><td><p>Screw</p></td><td><p>17</p></td></tr><tr><td><p>Cog</p></td><td><p>19</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="41" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="65600" data-y="0" data-z="0"><h1 id="record-comparison">Record Comparison</h1><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1570;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="p">)</span><span class="w">
  </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">on</span><span class="w">
  </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">on</span><span class="w">
  </span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">  </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">  </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="42" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="67200" data-y="0" data-z="0"><h1 id="union">Union</h1><div><pre class="highlight code sql"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
</span><span class="k">union</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">12</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">or</span><span class="w">
  </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">12</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'kashan'</span><span class="w">
</span><span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">10</span><span class="w">
 </span><span class="p">;</span></pre></div><div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Screw</p></td></tr></tbody></table><p>.</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Cog</p></td></tr></tbody></table></div></div><div class="step step-level-1 t2c" step="43" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="68800" data-y="0" data-z="0"><h1 id="style-of-writing">Style of Writing</h1><pre class="highlight code sql substep"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
</span><span class="k">union</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">12</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'kashan'</span><span class="w">
</span><span class="k">union</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">10</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'kashan'</span><span class="w">

</span><span class="k">union</span><span class="w">

</span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">10</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="44" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="70400" data-y="0" data-z="0"><h1 id="intersect">Intersect</h1><div><pre class="highlight code sql substep"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
</span><span class="k">intersect</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">10</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">10</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="k">intersect</span><span class="w"> </span><span class="k">all</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">10</span><span class="w">
</span><span class="p">;</span></pre></div><div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td></tr><tr><td><p>Cam</p></td></tr></tbody></table><p>.</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td></tr><tr><td><p>Cam</p></td></tr></tbody></table></div></div><div class="step step-level-1 t2c" step="45" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="72000" data-y="0" data-z="0"><h1 id="except">Except</h1><div><pre class="highlight code sql substep"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="k">except</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">14</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">weight</span><span class="o">&lt;=</span><span class="mi">14</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
</span><span class="k">except</span><span class="w"> </span><span class="k">all</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">10</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">weight</span><span class="o">&lt;=</span><span class="mi">14</span><span class="w">
</span><span class="p">;</span></pre></div><div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Cam</p></td></tr></tbody></table><p>.</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Cam</p></td></tr></tbody></table></div></div><div class="step step-level-1 t2c" step="46" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="73600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1585; &#1570;&#1606;&#1607;&#1575; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1608;&#1580;&#1608;&#1583; &#1606;&#1583;&#1575;&#1585;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">except</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>city</p></th></tr></thead><tbody><tr><td><p>Oslo</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="47" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="75200" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1608; &#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1602;&#1591;&#1593;&#1575;&#1578; &#1740;&#1575;&#1583; &#1588;&#1583;&#1607; &#1585;&#1575; &#1570;&#1606; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1593;&#1585;&#1590;&#1607; &#1606;&#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">except</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w">  </span><span class="c1">-- Wrong
</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="p">)</span><span class="w">
  </span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0"><tbody><tr><td><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sn</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>s3</p></td></tr><tr><td><p>p1</p></td><td><p>s4</p></td></tr><tr><td><p>p1</p></td><td><p>s5</p></td></tr><tr><td><p>p1</p></td><td><p>s6</p></td></tr><tr><td><p>p2</p></td><td><p>s5</p></td></tr><tr><td><p>p3</p></td><td><p>s2</p></td></tr><tr><td><p>p3</p></td><td><p>s3</p></td></tr><tr><td><p>p3</p></td><td><p>s4</p></td></tr><tr><td><p>p3</p></td><td><p>s5</p></td></tr><tr><td><p>p3</p></td><td><p>s6</p></td></tr><tr><td><p>p4</p></td><td><p>s2</p></td></tr></tbody></table></td><td><p>&#160;&#160;&#160;</p></td><td><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sn</p></th></tr></thead><tbody><tr><td><p>p4</p></td><td><p>s3</p></td></tr><tr><td><p>p4</p></td><td><p>s5</p></td></tr><tr><td><p>p4</p></td><td><p>s6</p></td></tr><tr><td><p>p5</p></td><td><p>s2</p></td></tr><tr><td><p>p5</p></td><td><p>s3</p></td></tr><tr><td><p>p5</p></td><td><p>s5</p></td></tr><tr><td><p>p5</p></td><td><p>s6</p></td></tr><tr><td><p>p6</p></td><td><p>s2</p></td></tr><tr><td><p>p6</p></td><td><p>s3</p></td></tr><tr><td><p>p6</p></td><td><p>s4</p></td></tr><tr><td><p>p6</p></td><td><p>s5</p></td></tr><tr><td><p>p6</p></td><td><p>s6</p></td></tr><tr><td><p>p7</p></td><td><p>s1</p></td></tr></tbody></table></td><td><p>&#160;&#160;&#160;</p></td><td><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sn</p></th></tr></thead><tbody><tr><td><p>p7</p></td><td><p>s2</p></td></tr><tr><td><p>p7</p></td><td><p>s3</p></td></tr><tr><td><p>p7</p></td><td><p>s4</p></td></tr><tr><td><p>p7</p></td><td><p>s5</p></td></tr><tr><td><p>p7</p></td><td><p>s6</p></td></tr><tr><td><p>p8</p></td><td><p>s1</p></td></tr><tr><td><p>p8</p></td><td><p>s2</p></td></tr><tr><td><p>p8</p></td><td><p>s3</p></td></tr><tr><td><p>p8</p></td><td><p>s4</p></td></tr><tr><td><p>p8</p></td><td><p>s5</p></td></tr><tr><td><p>p8</p></td><td><p>s6</p></td></tr></tbody></table></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="48" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="76800" data-y="0" data-z="0"><div><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">except</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w">  </span><span class="c1">-- Wrong
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="k">except</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">except</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pn</p></th><th><p>sn</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>s1</p></td></tr><tr><td><p>p1</p></td><td><p>s2</p></td></tr><tr><td><p>p2</p></td><td><p>s1</p></td></tr><tr><td><p>p2</p></td><td><p>s2</p></td></tr><tr><td><p>p2</p></td><td><p>s3</p></td></tr><tr><td><p>p2</p></td><td><p>s4</p></td></tr><tr><td><p>p2</p></td><td><p>s6</p></td></tr><tr><td><p>p3</p></td><td><p>s1</p></td></tr><tr><td><p>p4</p></td><td><p>s1</p></td></tr><tr><td><p>p4</p></td><td><p>s4</p></td></tr><tr><td><p>p5</p></td><td><p>s1</p></td></tr><tr><td><p>p5</p></td><td><p>s4</p></td></tr><tr><td><p>p6</p></td><td><p>s1</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="49" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="78400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578; &#1608; &#1606;&#1575;&#1605; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1602;&#1591;&#1593;&#1575;&#1578; &#1740;&#1575;&#1583; &#1588;&#1583;&#1607; &#1585;&#1575; &#1570;&#1606; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1593;&#1585;&#1590;&#1607; &#1606;&#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="w">  </span><span class="c1">-- &#1606;&#1575;&#1583;&#1585;&#1587;&#1578;
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">except</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">except</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="k">except</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="p">(</span><span class="n">sn</span><span class="p">);</span></pre></div><table cellpadding="0" cellspacing="0"><tbody><tr><td><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th><th><p>sname</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td><td><p>Adams</p></td></tr><tr><td><p>Cam</p></td><td><p>Adams</p></td></tr><tr><td><p>Cam</p></td><td><p>Ali</p></td></tr><tr><td><p>Cam</p></td><td><p>Blake</p></td></tr><tr><td><p>Cam</p></td><td><p>Jones</p></td></tr><tr><td><p>Cog</p></td><td><p>Adams</p></td></tr><tr><td><p>Cog</p></td><td><p>Ali</p></td></tr><tr><td><p>Cog</p></td><td><p>Blake</p></td></tr></tbody></table></td><td><p>&#160;&#160;&#160;</p></td><td><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th><th><p>sname</p></th></tr></thead><tbody><tr><td><p>Cog</p></td><td><p>Clark</p></td></tr><tr><td><p>Cog</p></td><td><p>Jones</p></td></tr><tr><td><p>Nut</p></td><td><p>Adams</p></td></tr><tr><td><p>Nut</p></td><td><p>Ali</p></td></tr><tr><td><p>Nut</p></td><td><p>Blake</p></td></tr><tr><td><p>Nut</p></td><td><p>Clark</p></td></tr><tr><td><p>Screw</p></td><td><p>Adams</p></td></tr><tr><td><p>Screw</p></td><td><p>Ali</p></td></tr><tr><td><p>Screw</p></td><td><p>Blake</p></td></tr><tr><td><p>Screw</p></td><td><p>Jones</p></td></tr></tbody></table></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="50" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="80000" data-y="0" data-z="0"><p class="rtl-h1">&#1586;&#1608;&#1580; &#1606;&#1575;&#1605; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1585; &#1740;&#1705; &#1588;&#1607;&#1585; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql substep"><span class="c1">-- (1) &#1606;&#1575;&#1583;&#1585;&#1587;&#1578;
</span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="c1">-- (2) &#1606;&#1575;&#1583;&#1585;&#1587;&#1578;
</span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="c1">-- (3)
</span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="c1">-- (4)
</span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">city</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="c1">-- (5)
</span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">on</span><span class="w">
  </span><span class="n">T</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>sname</p></th><th><p>sname</p></th></tr></thead><tbody><tr><td><p>Smith</p></td><td><p>Clark</p></td></tr><tr><td><p>Jones</p></td><td><p>Blake</p></td></tr></tbody></table></div><div class="step step-level-1" step="51" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="81600" data-y="0" data-z="0"><h1 id="exists">Exists</h1><p class="rtl-h1">&#1606;&#1575;&#1605; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1570;&#1606;&#1607;&#1575; &#1576;&#1575;&#1588;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span><span class="w"> </span><span class="c1">--  may have different result</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>sname</p></th></tr></thead><tbody><tr><td><p>Smith</p></td></tr><tr><td><p>Jones</p></td></tr><tr><td><p>Blake</p></td></tr><tr><td><p>Clark</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="52" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="83200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1575;&#1586; &#1583;&#1587;&#1578; &#1705;&#1605; &#1740;&#1705; &#1602;&#1591;&#1593;&#1607;&#1620; &#1583;&#1740;&#1711;&#1585; &#1576;&#1740;&#1588;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;</p><div><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">on</span><span class="w">
  </span><span class="n">T</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w">
  </span><span class="p">;</span><span class="w"> </span><span class="c1">-- wrong</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">on</span><span class="w">
  </span><span class="n">T</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w">
  </span><span class="p">;</span><span class="w"> </span><span class="c1">-- May have different result</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cog</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="53" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="84800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1583;&#1587;&#1578; &#1705;&#1605; &#1575;&#1586; &#1740;&#1705; &#1602;&#1591;&#1593;&#1607;&#1620; &#1583;&#1740;&#1711;&#1585; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1576;&#1740;&#1588;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cog</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="54" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="86400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1575;&#1586; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1583;&#1740;&#1711;&#1585; &#1705;&#1605;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;</p><p class="rtl-h1 substep">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1575;&#1586; &#1607;&#1740;&#1670; &#1602;&#1591;&#1593;&#1607;&#1620; &#1583;&#1740;&#1711;&#1585;&#1740; &#1576;&#1740;&#1588;&#1578;&#1585; &#1606;&#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder substep"><thead><tr><th><p>pname</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>Nut</p></td><td><p>12</p></td></tr><tr><td><p>Cam</p></td><td><p>12</p></td></tr><tr><td><p>Nut</p></td><td></td></tr><tr><td><p>Bolt</p></td><td></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="55" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="88000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1585; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1607;&#1740;&#1670; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1608;&#1580;&#1608;&#1583; &#1606;&#1583;&#1575;&#1585;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">except</span><span class="w"> </span><span class="k">all</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>city</p></th></tr></thead><tbody><tr><td><p>Athens</p></td></tr><tr><td><p>&#1705;&#1575;&#1588;&#1575;&#1606;</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="56" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="89600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1601;&#1602;&#1591; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1583;&#1585;&#1608;&#1606; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583; &#1740;&#1575; &#1575;&#1589;&#1604;&#1575;&#1611; &#1593;&#1585;&#1590;&#1607; &#1606;&#1588;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;.</p><p class="rtl-h1 substep">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1582;&#1575;&#1585;&#1580; &#1575;&#1586; &#1588;&#1607;&#1585; &#1570;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1548; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1606;&#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="c1">-- or
</span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="k">exists</span><span class="p">(</span><span class="w">
        </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
        </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
        </span><span class="k">where</span><span class="w">  </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w">
          </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w">
      </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Screw</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="57" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="91200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607;&#8204;&#1575;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1601;&#1602;&#1591; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1583;&#1585;&#1608;&#1606; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">);</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Screw</p></td></tr><tr><td><p>Cog</p></td></tr><tr><td><p>Screw</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="k">exists</span><span class="p">(</span><span class="w">
        </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
        </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
        </span><span class="k">where</span><span class="w">  </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w">
          </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w">
      </span><span class="p">)</span><span class="w">
  </span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="58" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="92800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607;&#1620; &#1605;&#1578;&#1601;&#1575;&#1608;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1601;&#1602;&#1591; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1583;&#1585;&#1608;&#1606; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575;&#1548; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w"> </span><span class="c1">-- &#1585;&#1740;&#1581;&#1575;&#1606;&#1607; &#1586;&#1605;&#1575;&#1606;&#1740;&#1575;&#1606;
</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">except</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">exist</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w">
        </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Screw</p></td></tr><tr><td><p>Cog</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="59" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="94400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1607;&#1605;&#1607;&#1620; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><p class="substep rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1608;&#1580;&#1608;&#1583; &#1606;&#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1583; &#1705;&#1607; &#1575;&#1740;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1606;&#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><p class="substep rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1605;&#1740;&#8204;&#1582;&#1608;&#1575;&#1607;&#1740;&#1605; &#1705;&#1607; &#1608;&#1580;&#1608;&#1583; &#1606;&#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1583; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1705;&#1607; &#1576;&#1585;&#1575;&#1740;&#1588; &#1608;&#1580;&#1608;&#1583; &#1606;&#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1583; &#1593;&#1585;&#1590;&#1607;&#8204;&#1575;&#1740; &#1705;&#1607; &#1570;&#1606; &#1593;&#1585;&#1590;&#1607; &#1575;&#1586; &#1570;&#1606; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1608; &#1570;&#1606; &#1602;&#1591;&#1593;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
        </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
        </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
        </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w">
          </span><span class="k">and</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w">
      </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="60" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="96000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578; &#1605;&#1578;&#1601;&#1575;&#1608;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1607;&#1605;&#1607;&#1620; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1575;&#1604;&#1575;&#1740; &#1777;&#1776;&#1776; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
        </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
        </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
        </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
          </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w">
      </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
     </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
     </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
     </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="w"> </span><span class="n">sn</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pname</p></th></tr></thead><tbody><tr><td><p>Nut</p></td></tr><tr><td><p>Bolt</p></td></tr><tr><td><p>Screw</p></td></tr><tr><td><p>Cam</p></td></tr><tr><td><p>Cog</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="61" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="97600" data-y="0" data-z="0"><h1 id="delete-drop-table">DELETE / DROP TABLE</h1><div><p>DELETE</p><p>DML</p><pre class="highlight code sql"><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'s5'</span><span class="w">
</span><span class="p">;</span><span class="w">

</span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">;</span></pre></div><div><p>DROP TABLE</p><p>DDL</p><pre class="highlight code sql"><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">sp</span><span class="p">;</span><span class="w">
</span><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w">
</span><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">p</span><span class="p">;</span></pre></div></div><div class="step step-level-1" step="62" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="99200" data-y="0" data-z="0"><h1 id="alter-table">Alter Table</h1><h2 id="ddl">DDL</h2><pre class="highlight code sql"><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="ss">"comment"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span><span class="w">

</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="ss">"comment"</span><span class="p">;</span><span class="w">

</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="ss">"comment"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">''</span><span class="p">;</span></pre><img src="img/alter_table_sqlite.png"></div><div class="step step-level-1 t2c" step="63" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="100800" data-y="0" data-z="0"><h1 id="null">NULL</h1><pre class="highlight code sql substep"><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">p</span><span class="p">(</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w">
</span><span class="k">values</span><span class="p">(</span><span class="s1">'p7'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Nut'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Red'</span><span class="p">,</span><span class="w"> </span><span class="s1">'London'</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><p>.</p><ol><li class="substep">Do not know the value</li><li class="substep"><dl><dt>Not applicable</dt><dd><ul><li class="substep">Address: city, street, alley, number</li></ul></dd></dl></li></ol><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">(</span><span class="w">
 </span><span class="n">sn</span><span class="w">      </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
 </span><span class="n">sname</span><span class="w">   </span><span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
 </span><span class="n">status</span><span class="w">  </span><span class="nb">int</span><span class="w">  </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="n">city</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1" step="64" id="aggregation-functions-sum-id" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="102400" data-y="0" data-z="0"><h1 id="aggregation-functions">Aggregation Functions</h1><h2 id="sum">Sum</h2><p class="rtl-h2">&#1580;&#1605;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">asw</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>asw</p></th></tr></thead><tbody><tr><td><p>91</p></td></tr></tbody></table><p class="rtl-h2">&#1580;&#1605;&#1593; &#1607;&#1605;&#1607;&#1620; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;(qty) &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqt</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">sp</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>sqt</p></th></tr></thead><tbody><tr><td><p>3100</p></td></tr></tbody></table><p class="rtl-h2">&#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#1620; s2 &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqt</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">sp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'S2'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>sqt</p></th></tr></thead><tbody><tr><td><p>700</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>sn</p></th><th><p>pn</p></th><th><p>qty</p></th></tr></thead><tbody><tr><td><p>S1</p></td><td><p>P1</p></td><td><p>300</p></td></tr><tr><td><p>S1</p></td><td><p>P2</p></td><td><p>200</p></td></tr><tr><td><p>S1</p></td><td><p>P3</p></td><td><p>400</p></td></tr><tr><td><p>S1</p></td><td><p>P4</p></td><td><p>200</p></td></tr><tr><td><p>S1</p></td><td><p>P5</p></td><td><p>100</p></td></tr><tr><td><p>S1</p></td><td><p>P6</p></td><td><p>100</p></td></tr><tr><td><p>S2</p></td><td><p>P1</p></td><td><p>300</p></td></tr><tr><td><p>S2</p></td><td><p>P2</p></td><td><p>400</p></td></tr><tr><td><p>S3</p></td><td><p>P2</p></td><td><p>200</p></td></tr><tr><td><p>S4</p></td><td><p>P2</p></td><td><p>200</p></td></tr><tr><td><p>S4</p></td><td><p>P4</p></td><td><p>300</p></td></tr><tr><td><p>S4</p></td><td><p>P5</p></td><td><p>400</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="65" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="104000" data-y="0" data-z="0"><p class="rtl-h1">&#1580;&#1605;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1605;&#1578;&#1601;&#1575;&#1608;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;(&#1777;).</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln">4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln">6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="ln">7 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">8 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>29</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>46</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="66" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="105600" data-y="0" data-z="0"><p class="rtl-h1">&#1580;&#1605;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1605;&#1578;&#1601;&#1575;&#1608;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;(&#1778;).</p><pre class="highlight code sql substep number-lines"><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>29</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="67" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="107200" data-y="0" data-z="0"><p class="rtl-h1">&#1580;&#1605;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578;  &#1605;&#1578;&#1601;&#1575;&#1608;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;(&#1779;).</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>29</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>46</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>weight</p></th><th><p>sn</p></th><th><p>city</p></th></tr></thead><tbody><tr><td><p>P1</p></td><td><p>12</p></td><td><p>S2</p></td><td><p>Paris</p></td></tr><tr><td><p>P2</p></td><td><p>17</p></td><td><p>S2</p></td><td><p>Paris</p></td></tr><tr><td><p>P2</p></td><td><p>17</p></td><td><p>S3</p></td><td><p>Paris</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="68" id="sum-sample-weight-paris-id" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="108800" data-y="0" data-z="0"><p class="rtl-h1">&#1580;&#1605;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1605;&#1578;&#1601;&#1575;&#1608;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;(&#1780;).</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>29</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>29</p></td></tr></tbody></table><p class="substep rtl">&#1570;&#1740;&#1575; &#1575;&#1740;&#1606; &#1585;&#1575;&#1607; &#1581;&#1604; &#1570;&#1582;&#1585;&#1740; &#1576;&#1575; distinct &#1583;&#1585;&#1587;&#1578; &#1575;&#1587;&#1578;&#1567;</p><p class="substep"><a href="#/query-inside-from-id">&#1585;&#1575;&#1607; &#1581;&#1604; &#1583;&#1740;&#1711;&#1585;</a></p></div><div class="step step-level-1 t2c" step="69" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="110400" data-y="0" data-z="0"><p class="rtl-h1">&#1580;&#1605;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1605;&#1578;&#1601;&#1575;&#1608;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;(&#1781;).</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
    </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>46</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
      </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>29</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="70" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="112000" data-y="0" data-z="0"><p class="rtl-h1">&#1580;&#1605;&#1593; &#1608;&#1586;&#1606;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578; &#1593;&#1585;&#1590;&#1607;&#8204;&#1588;&#1583;&#1607; &#1576;&#1607; &#1578;&#1593;&#1583;&#1575;&#1583; qty &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>13800</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">qty</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>qty</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>300</p></td><td><p>12</p></td></tr><tr><td><p>p2</p></td><td><p>400</p></td><td><p>17</p></td></tr><tr><td><p>p2</p></td><td><p>200</p></td><td><p>17</p></td></tr></tbody></table></div><div class="step step-level-1" step="71" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="113600" data-y="0" data-z="0"><h1 id="average">Average</h1><p class="rtl-h2">&#1605;&#1740;&#1575;&#1606;&#1711;&#1740;&#1606; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">awg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><p class="rtl-h2">&#1605;&#1740;&#1575;&#1606;&#1711;&#1740;&#1606; &#1605;&#1602;&#1583;&#1575;&#1585; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;(qty) &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">qt</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqt</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">sp</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="72" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="115200" data-y="0" data-z="0"><p class="rtl-h1">&#1605;&#1740;&#1575;&#1606;&#1711;&#1740;&#1606; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">awg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>awg</p></th></tr></thead><tbody><tr><td><p>14.5</p></td></tr></tbody></table></div><div class="step step-level-1" step="73" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="116800" data-y="0" data-z="0"><p class="rtl-h1">&#1605;&#1740;&#1575;&#1606;&#1711;&#1740;&#1606; &#1605;&#1602;&#1583;&#1575;&#1585; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740;(qty) &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paqt</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1" step="74" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="118400" data-y="0" data-z="0"><h1 id="count">Count</h1><p class="rtl-h2">&#1578;&#1593;&#1583;&#1575;&#1583; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">awg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>awg</p></th></tr></thead><tbody><tr><td><p>8</p></td></tr></tbody></table><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">awg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>awg</p></th></tr></thead><tbody><tr><td><p>6</p></td></tr></tbody></table></div><div class="step step-level-1" step="75" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="120000" data-y="0" data-z="0"><h1 id="count-1">Count(*)</h1><p class="rtl-h2">&#1578;&#1593;&#1583;&#1575;&#1583; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">awg</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>awg</p></th></tr></thead><tbody><tr><td><p>8</p></td></tr></tbody></table><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">city</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ccy</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>ccy</p></th></tr></thead><tbody><tr><td><p>8</p></td></tr></tbody></table><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqt</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">sp</span><span class="p">;</span><span class="w">

  </span><span class="c1">-- &#1607;&#1605;&#1607;&#1620; &#1585;&#1705;&#1608;&#1585;&#1583;&#1607;&#1575; &#1585;&#1575; &#1605;&#1740;&#8204;&#1588;&#1605;&#1575;&#1585;&#1583; &#1576;&#1607; &#1601;&#1740;&#1604;&#1583; &#1582;&#1575;&#1589;&#1740; &#1605;&#1585;&#1576;&#1608;&#1591; &#1606;&#1740;&#1587;&#1578;.</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>sqt</p></th></tr></thead><tbody><tr><td><p>12</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="76" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="121600" data-y="0" data-z="0"><h1 id="count-distinct">count(distinct)</h1><p class="rtl-h1">&#1578;&#1593;&#1583;&#1575;&#1583; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ccy</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>ccy</p></th></tr></thead><tbody><tr><td><p>3</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>city</p></th></tr></thead><tbody><tr><td><p>Oslo</p></td></tr><tr><td><p>London</p></td></tr><tr><td><p>Paris</p></td></tr><tr><td><p>London</p></td></tr><tr><td><p>London</p></td></tr><tr><td><p>Paris</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="77" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="123200" data-y="0" data-z="0"><p class="rtl-h1">&#1578;&#1593;&#1583;&#1575;&#1583; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">sn</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqt</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="p">;</span><span class="w">
</span><span class="c1">-- &#1588;&#1605;&#1575;&#1585;&#1607;&#8204;&#1607;&#1575;&#1740; &#1578;&#1705;&#1585;&#1575;&#1585;&#1740; &#1585;&#1575; &#1606;&#1605;&#1740;&#8204;&#1588;&#1605;&#1575;&#1585;&#1583;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>sqt</p></th></tr></thead><tbody><tr><td><p>4</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>sn</p></th></tr></thead><tbody><tr><td><p>S1</p></td></tr><tr><td><p>S2</p></td></tr><tr><td><p>S3</p></td></tr><tr><td><p>S4</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="78" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="124800" data-y="0" data-z="0"><p class="rtl-h1">&#1578;&#1593;&#1583;&#1575;&#1583; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1602;&#1591;&#1593;&#1607;&#1620; &#1602;&#1585;&#1605;&#1586;&#1740; &#1585;&#1575; &#1576;&#1607; &#1578;&#1593;&#1583;&#1575;&#1583; &#1593;&#1585;&#1590;&#1607;(qty) &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1781; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">sn</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">scc</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">qty</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">p</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Red'</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>scc</p></th></tr></thead><tbody><tr><td><p>3</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="79" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="126400" data-y="0" data-z="0"><p class="rtl-h1">&#1578;&#1593;&#1583;&#1575;&#1583; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1587;&#1578; &#1705;&#1605; &#1605;&#1602;&#1583;&#1575;&#1585; &#1740;&#1705;&#1740; &#1575;&#1586; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1781; &#1576;&#1575;&#1588;&#1583; &#1608; &#1593;&#1585;&#1590;&#1607;&#8204;&#1575;&#1740; &#1575;&#1586; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1576;&#1607; &#1585;&#1606;&#1711; &#1602;&#1585;&#1605;&#1586; &#1606;&#1740;&#1586; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;(&#1777;).</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">csn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">qty</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="k">intersect</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Red'</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">csn</span><span class="w"> </span><span class="c1">-- May have error
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
      </span><span class="k">where</span><span class="w"> </span><span class="n">qty</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="k">intersect</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
        </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
      </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Red'</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="80" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="128000" data-y="0" data-z="0"><p class="rtl-h1">&#1578;&#1593;&#1583;&#1575;&#1583; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1587;&#1578; &#1705;&#1605; &#1605;&#1602;&#1583;&#1575;&#1585; &#1740;&#1705;&#1740; &#1575;&#1586; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1781; &#1576;&#1575;&#1588;&#1583; &#1608; &#1593;&#1585;&#1590;&#1607;&#8204;&#1575;&#1740; &#1575;&#1586; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1576;&#1607; &#1585;&#1606;&#1711; &#1602;&#1585;&#1605;&#1586; &#1606;&#1740;&#1586; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;(&#1778;).</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">csn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w">
          </span><span class="k">and</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">qty</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">p</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Red'</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>csn</p></th></tr></thead><tbody><tr><td><p>3</p></td></tr></tbody></table></div><div class="step step-level-1" step="81" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="129600" data-y="0" data-z="0"><h1 id="min">Min</h1><p class="rtl-h2">&#1705;&#1605;&#1578;&#1585;&#1740;&#1606; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wgt</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">p</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="c1">--- &#1705;&#1605;&#1578;&#1585;&#1740;&#1606;</span></pre></div><div class="step step-level-1" step="82" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="131200" data-y="0" data-z="0"><h1 id="max">max</h1><p class="rtl-h2">&#1576;&#1740;&#1588;&#1578;&#1585;&#1740;&#1606; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wgt</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">p</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="c1">--- &#1576;&#1740;&#1588;&#1578;&#1585;&#1740;&#1606;
--- &#1576;&#1607; &#1575;&#1740;&#1606;&#1607;&#1575; &#1578;&#1575;&#1576;&#1593; &#1578;&#1580;&#1605;&#1593;&#1740; &#1711;&#1601;&#1578;&#1607; &#1605;&#1740;&#8204;&#1588;&#1608;&#1583;. aggregation function</span></pre></div><div class="step step-level-1 t2c" step="83" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="132800" data-y="0" data-z="0"><h1 id="group-by">group by</h1><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607; &#1608; &#1605;&#1580;&#1605;&#1608;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607;&#8204;&#1575;&#1606;&#1583;.</p><div><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqt</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">sp</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="p">;</span></pre><ul class="rtl-h2"><li class="substep">&#1576;&#1585; &#1662;&#1575;&#1740;&#1607;&#1620; &#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1583;&#1587;&#1578;&#1607;&#8204;&#1576;&#1606;&#1583;&#1740; &#1605;&#1740;&#8204;&#1705;&#1606;&#1583;</li><li class="substep">&#1587;&#1662;&#1587; &#1576;&#1585;&#1575;&#1740; &#1607;&#1585; &#1583;&#1587;&#1578;&#1607;</li><li class="substep">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1570;&#1606; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; (&#1705;&#1607; &#1576;&#1575; &#1570;&#1606; &#1711;&#1585;&#1608;&#1607;&#8204;&#1576;&#1606;&#1583;&#1740; &#1575;&#1606;&#1580;&#1575;&#1605; &#1588;&#1583;&#1607; &#1575;&#1587;&#1578;)</li></ul></div><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>sn</p></th><th><p>sqt</p></th></tr></thead><tbody><tr><td><p>s1</p></td><td><p>1300</p></td></tr><tr><td><p>s2</p></td><td><p>700</p></td></tr><tr><td><p>s3</p></td><td><p>200</p></td></tr><tr><td><p>s4</p></td><td><p>900</p></td></tr><tr><td><p>s6</p></td><td><p>350</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="84" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="134400" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607; &#1608; &#1605;&#1580;&#1605;&#1608;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;.</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqt</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w">   </span><span class="n">sp</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sqt</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>600</p></td></tr><tr><td><p>p2</p></td><td><p>1350</p></td></tr><tr><td><p>p3</p></td><td><p>400</p></td></tr><tr><td><p>p4</p></td><td><p>500</p></td></tr><tr><td><p>p5</p></td><td><p>500</p></td></tr><tr><td><p>p6</p></td><td><p>100</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="85" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="136000" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1575; &#1608;&#1586;&#1606; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1778; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1607;&#1585; &#1705;&#1583;&#1575;&#1605; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqt</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">12</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="p">;</span></pre><p class="substep rtl-h2">&#1606;&#1582;&#1587;&#1578; &#1588;&#1585;&#1591; where &#1575;&#1593;&#1605;&#1575;&#1604; &#1605;&#1740;&#8204;&#1588;&#1608;&#1583; &#1587;&#1662;&#1587; &#1576;&#1585; &#1585;&#1608;&#1740; &#1585;&#1705;&#1608;&#1585;&#1583;&#1607;&#1575;&#1740; &#1576;&#1575;&#1602;&#1740;&#1605;&#1575;&#1606;&#1583;&#1607; &#1583;&#1587;&#1578;&#1607;&#8204;&#1576;&#1606;&#1583;&#1740; &#1575;&#1606;&#1580;&#1575;&#1605; &#1605;&#1740;&#8204;&#1588;&#1608;&#1583;.</p></div><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sqt</p></th></tr></thead><tbody><tr><td><p>p2</p></td><td><p>1350</p></td></tr><tr><td><p>p3</p></td><td><p>400</p></td></tr><tr><td><p>p4</p></td><td><p>500</p></td></tr><tr><td><p>p6</p></td><td><p>100</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="86" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="137600" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1575; &#1608;&#1586;&#1606; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1778; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1607;&#1585; &#1705;&#1583;&#1575;&#1605; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1576;&#1607; &#1588;&#1585;&#1591;&#1740; &#1705;&#1607; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1608; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqt</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">12</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="p">;</span></pre><p class="substep rtl-h2">&#1605;&#1575;&#1606;&#1606;&#1583; &#1662;&#1740;&#1588;&#1740;&#1606; &#1576;&#1575; &#1575;&#1740;&#1606; &#1578;&#1601;&#1575;&#1608;&#1578; &#1705;&#1607; &#1711;&#1585;&#1608;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1576;&#1585;&#1711;&#1585;&#1583;&#1575;&#1606;&#1583;&#1607; &#1605;&#1740;&#8204;&#1588;&#1608;&#1606;&#1583; &#1705;&#1607; &#1588;&#1585;&#1591; having &#1585;&#1575; &#1606;&#1740;&#1586; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;.</p><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sqt</p></th></tr></thead><tbody><tr><td><p>p2</p></td><td><p>1350</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="87" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="139200" data-y="0" data-z="0"><p class="rtl-h1">&#1711;&#1575;&#1605; &#1576;&#1607; &#1711;&#1575;&#1605;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">qty</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqt</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="o">&gt;</span><span class="mi">12</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sn</p></th><th><p>qty</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>s1</p></td><td><p>300</p></td></tr><tr><td><p>p1</p></td><td><p>s2</p></td><td><p>300</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sn</p></th><th><p>qty</p></th></tr></thead><tbody><tr><td><p>p2</p></td><td><p>s1</p></td><td><p>200</p></td></tr><tr><td><p>p2</p></td><td><p>s2</p></td><td><p>400</p></td></tr><tr><td><p>p2</p></td><td><p>s3</p></td><td><p>200</p></td></tr><tr><td><p>p2</p></td><td><p>s4</p></td><td><p>200</p></td></tr><tr><td><p>p2</p></td><td><p>s6</p></td><td><p>350</p></td></tr></tbody></table><div><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sn</p></th><th><p>qty</p></th></tr></thead><tbody><tr><td><p>p3</p></td><td><p>s1</p></td><td><p>400</p></td></tr></tbody></table><p>.</p><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sn</p></th><th><p>qty</p></th></tr></thead><tbody><tr><td><p>p6</p></td><td><p>s1</p></td><td><p>100</p></td></tr></tbody></table></div><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sn</p></th><th><p>qty</p></th></tr></thead><tbody><tr><td><p>p4</p></td><td><p>s1</p></td><td><p>200</p></td></tr><tr><td><p>p4</p></td><td><p>s4</p></td><td><p>300</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sn</p></th><th><p>qty</p></th></tr></thead><tbody><tr><td><p>p5</p></td><td><p>s1</p></td><td><p>100</p></td></tr><tr><td><p>p5</p></td><td><p>s4</p></td><td><p>400</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="88" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="140800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1608; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">    </span><span class="n">T</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">      </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">      </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T2</span><span class="w">
</span><span class="ln">10 </span><span class="w">      </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">11 </span><span class="w">        </span><span class="n">T2</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">12 </span><span class="w">        </span><span class="n">T2</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">13 </span><span class="w">        </span><span class="n">T2</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="ln">14 </span><span class="w">    </span><span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="p">)</span></pre><pre class="highlight code sql"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln"> 3 </span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">  </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">  </span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">sn</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="p">);</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="c1">-- Second solution
</span><span class="ln">10 </span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w">
</span><span class="ln">12 </span><span class="w">  </span><span class="n">sp</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T1</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w">
</span><span class="ln">13 </span><span class="w">  </span><span class="n">sp</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T2</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">T1</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">15 </span><span class="w">  </span><span class="n">T2</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">16 </span><span class="w">  </span><span class="n">T2</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">T1</span><span class="p">.</span><span class="n">sn</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="89" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="142400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776; &#1606;&#1740;&#1586; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1607;&#1585; &#1705;&#1583;&#1575;&#1605; &#1575;&#1586; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1575;&#1588;&#1583;(&#1777;)</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">pcity</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">pcity</span><span class="w"> </span><span class="c1">--wrong
</span><span class="ln">2 </span><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">7 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">pcity</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="90" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="144000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776; &#1606;&#1740;&#1586; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1607;&#1585; &#1705;&#1583;&#1575;&#1605; &#1575;&#1586; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1575;&#1588;&#1583;(&#1778;)</p><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">pcity</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="91" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="145600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776; &#1606;&#1740;&#1586; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1607;&#1585; &#1705;&#1583;&#1575;&#1605; &#1575;&#1586; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>city</p></th></tr></thead><tbody><tr><td><p>London</p></td></tr><tr><td><p>Oslo</p></td></tr><tr><td><p>Paris</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">  </span><span class="c1">--- &#1606;&#1575;&#1583;&#1585;&#1587;&#1578;
</span><span class="ln"> 2 </span><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="ln"> 3 </span><span class="w">  </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="p">;</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="c1">-- &#1606;&#1575;&#1583;&#1585;&#1587;&#1578;
</span><span class="ln">10 </span><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">10</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="92" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="147200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1601;&#1602;&#1591; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776;  &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583; &#1608; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1607;&#1585; &#1705;&#1583;&#1575;&#1605; &#1575;&#1586; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">7 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>city</p></th></tr></thead><tbody><tr><td><p>London</p></td></tr><tr><td><p>Oslo</p></td></tr><tr><td><p>Paris</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w">
</span><span class="ln"> 3 </span><span class="w">  </span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="93" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="148800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1662;&#1585;&#1608;&#1688;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1606;&#1740;&#1586; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583; &#1608; &#1580;&#1605;&#1593; &#1608;&#1586;&#1606;&#1740; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1607;&#1585; &#1705;&#1583;&#1575;&#1605; &#1575;&#1586; &#1570;&#1606; &#1662;&#1585;&#1608;&#1688;&#1607;&#8204;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776;&#1776; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">jname</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">jn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w">  </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spj</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">      </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">jn</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">having</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="o">*</span><span class="n">qty</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">jname</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln"> 3 </span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">jn</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">jn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">      </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">      </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">      </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spj</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">10 </span><span class="w">        </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">11 </span><span class="w">    </span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w">  </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">jn</span><span class="w">
</span><span class="ln">13 </span><span class="w">  </span><span class="k">having</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="o">*</span><span class="n">qty</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="94" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="150400" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1575; &#1608;&#1586;&#1606; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1778; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1607;&#1585; &#1705;&#1583;&#1575;&#1605; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1608; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">12</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="c1">-- same result
</span><span class="ln">2 </span><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">12</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">sn</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="c1">-- wrong
</span><span class="ln">2 </span><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">12</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">12</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">sn</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="95" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="152000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1607; &#1548; &#1583;&#1587;&#1578; &#1705;&#1605; &#1740;&#1705;&#1740; &#1575;&#1586; &#1602;&#1591;&#1593;&#1575;&#1578; &#1583;&#1585;&#1608;&#1606; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608; &#1605;&#1580;&#1605;&#1608;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1575;&#1588;&#1583; &#1576;&#1607; &#1588;&#1585;&#1591;&#1740; &#1705;&#1607; &#1578;&#1593;&#1583;&#1575;&#1583; &#1602;&#1591;&#1593;&#1575;&#1578; &#1583;&#1585; &#1570;&#1606; &#1588;&#1607;&#1585; &#1602;&#1591;&#1593;&#1607; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1608; &#1576;&#1575;&#1588;&#1583;(I).</p><div><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="c1">-- wrong answer
</span><span class="ln">2 </span><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">7 </span><span class="w">  </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="ln">8 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">SELECT</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">  </span><span class="c1">-- wrong answer
</span><span class="ln"> 2 </span><span class="c1"></span><span class="k">FROM</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="k">EXISTS</span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">  </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">  </span><span class="k">WHERE</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="o">=</span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">AND</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">HAVING</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">20</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="p">;</span></pre></div><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="c1">-- Mohammad Javad Akbari
</span><span class="ln"> 6 </span><span class="c1"></span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">      </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">11 </span><span class="w">  </span><span class="k">count</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="96" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="153600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1607; &#1548; &#1583;&#1587;&#1578; &#1705;&#1605; &#1740;&#1705;&#1740; &#1575;&#1586; &#1602;&#1591;&#1593;&#1575;&#1578; &#1583;&#1585;&#1608;&#1606; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608; &#1605;&#1580;&#1605;&#1608;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1575;&#1588;&#1583; &#1576;&#1607; &#1588;&#1585;&#1591;&#1740; &#1705;&#1607; &#1578;&#1593;&#1583;&#1575;&#1583; &#1602;&#1591;&#1593;&#1575;&#1578; &#1583;&#1585; &#1570;&#1606; &#1588;&#1607;&#1585; &#1602;&#1591;&#1593;&#1607; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1608; &#1576;&#1575;&#1588;&#1583;(II).</p><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">      </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">11 </span><span class="w">  </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">      </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">10 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">p2</span><span class="w">
</span><span class="ln">11 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">12 </span><span class="w">      </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">13 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="97" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="155200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1662;&#1585;&#1608;&#1688;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1585;&#1575;&#1740; &#1570;&#1606; &#1662;&#1585;&#1608;&#1688;&#1607;&#8204;&#1607;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608; &#1605;&#1580;&#1605;&#1608;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607; &#1576;&#1585;&#1575;&#1740; &#1570;&#1606; &#1606;&#1575;&#1605; &#1662;&#1585;&#1608;&#1688;&#1607; (&#1740;&#1575; &#1662;&#1585;&#1608;&#1688;&#1607;&#8204;&#1607;&#1575;) &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776;&#1776; &#1576;&#1575;&#1588;&#1583;</p><p class="substep rtl-h2">&#1583;&#1602;&#1578; &#1705;&#1606;&#1740;&#1583; &#1605;&#1580;&#1605;&#1608;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1575;&#1740;&#1583; &#1578;&#1593;&#1583;&#1575;&#1583;  &#1583;&#1585; &#1608;&#1586;&#1606; &#1590;&#1585;&#1576; &#1588;&#1608;&#1583;</p><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">jname</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w">
</span><span class="ln"> 3 </span><span class="w">  </span><span class="n">spj</span><span class="p">.</span><span class="n">jn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">jn</span><span class="w"> </span><span class="k">join</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">  </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spj</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">      </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">10 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">jname</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="k">having</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="o">*</span><span class="n">qty</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="98" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="156800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1662;&#1585;&#1608;&#1688;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1585;&#1575;&#1740; &#1570;&#1606; &#1662;&#1585;&#1608;&#1688;&#1607;&#8204;&#1607;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608; &#1605;&#1580;&#1605;&#1608;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607; &#1576;&#1585;&#1575;&#1740; &#1570;&#1606; &#1662;&#1585;&#1608;&#1688;&#1607; (&#1608; &#1606;&#1607; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1607;&#1605;&#8204;&#1606;&#1575;&#1605;&#8204;&#1607;&#1575;&#1740;&#1588;) &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776;&#1776; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">jname</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w">
</span><span class="ln"> 3 </span><span class="w">  </span><span class="n">spj</span><span class="p">.</span><span class="n">jn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">jn</span><span class="w"> </span><span class="k">join</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">  </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spj</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">      </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">10 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">jn</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="k">having</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="o">*</span><span class="n">qty</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">jname</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln"> 3 </span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">jn</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">      </span><span class="n">spj</span><span class="p">.</span><span class="n">jn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">jn</span><span class="w"> </span><span class="k">join</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">      </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">        </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">        </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln">10 </span><span class="w">        </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spj</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="ln">11 </span><span class="w">          </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="ln">12 </span><span class="w">      </span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w">    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">jn</span><span class="w">
</span><span class="ln">14 </span><span class="w">    </span><span class="k">having</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="o">*</span><span class="n">qty</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="99" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="158400" data-y="0" data-z="0"><p class="rtl-h1">&#1583;&#1587;&#1578;&#1607;&#8204;&#1576;&#1606;&#1583;&#1740; &#1583;&#1585; &#1740;&#1705; &#1711;&#1585;&#1608;&#1607;</p><pre class="highlight code sql"><span class="ln">1 </span><span class="c1">-- Totally wrong
</span><span class="ln">2 </span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="c1">-- having count(distinct pn) &gt; 1
</span><span class="ln">6 </span><span class="c1"></span><span class="p">;</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="c1">-- having count(distinct pn) &gt; 1
</span><span class="ln">5 </span><span class="c1"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="100" id="query-inside-from-id" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="160000" data-y="0" data-z="0"><p class="rtl-h1">&#1580;&#1605;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1587;&#1578;&#1616;&#8204;&#1705;&#1605; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1575;&#1586; &#1662;&#1575;&#1585;&#1740;&#1587; &#1606;&#1740;&#1586; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>46</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>weight</p></th><th><p>sn</p></th><th><p>city</p></th></tr></thead><tbody><tr><td><p>P1</p></td><td><p>12</p></td><td><p>S2</p></td><td><p>Paris</p></td></tr><tr><td><p>P2</p></td><td><p>17</p></td><td><p>S2</p></td><td><p>Paris</p></td></tr><tr><td><p>P2</p></td><td><p>17</p></td><td><p>S3</p></td><td><p>Paris</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln">3 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="ln">4 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
</span><span class="ln">5 </span><span class="w">      </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="ln">7 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">8 </span><span class="w"></span><span class="p">;</span></pre><div><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>29</p></td></tr></tbody></table></div></div><div class="step step-level-1 t2c" step="101" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="161600" data-y="0" data-z="0"><p class="rtl-h1">&#1580;&#1605;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1587;&#1578;&#1616;&#8204;&#1705;&#1605; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1575;&#1586; &#1662;&#1575;&#1585;&#1740;&#1587; &#1606;&#1740;&#1586; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">      </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>46</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">swg</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln">3 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="ln">4 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
</span><span class="ln">5 </span><span class="w">      </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="ln">7 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">8 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>swg</p></th></tr></thead><tbody><tr><td><p>29</p></td></tr></tbody></table><p class="substep"><a href="#/sum-sample-weight-paris-id">&#1576;&#1581;&#1579; &#1575;&#1589;&#1604;&#1740;</a></p></div><div class="step step-level-1 t2c" step="102" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="163200" data-y="0" data-z="0"><h1 id="limit">LIMIT</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>city</p></th></tr></thead><tbody><tr><td><p>London</p></td></tr><tr><td><p>Oslo</p></td></tr><tr><td><p>Paris</p></td></tr></tbody></table><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">limit</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>city</p></th></tr></thead><tbody><tr><td><p>London</p></td></tr><tr><td><p>Oslo</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="103" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="164800" data-y="0" data-z="0"><h1 id="scalar-value-i">Scalar value(I)</h1><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607; &#1608; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1575;&#1586; &#1605;&#1740;&#1575;&#1606;&#1711;&#1740;&#1606; &#1608;&#1586;&#1606; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1587;&#1578;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>p2</p></td><td><p>17</p></td></tr><tr><td><p>p3</p></td><td><p>17</p></td></tr><tr><td><p>p6</p></td><td><p>19</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="104" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="166400" data-y="0" data-z="0"><h1 id="scalar-value-ii">Scalar value(II)</h1><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607; &#1608; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1705;&#1605;&#1578;&#1585;&#1740;&#1606; &#1608;&#1586;&#1606; &#1585;&#1575; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">);</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>12</p></td></tr><tr><td><p>p5</p></td><td><p>12</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">weight</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">asc</span><span class="w">
    </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="105" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="168000" data-y="0" data-z="0"><h1 id="scalar-value-v">Scalar value(V)</h1><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">qt</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>qt</p></th></tr></thead><tbody><tr><td><p>P2</p></td><td><p>1</p></td></tr><tr><td><p>P5</p></td><td><p>1</p></td></tr><tr><td><p>P8</p></td><td><p>1</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="106" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="169600" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1580;&#1605;&#1593; &#1578;&#1593;&#1583;&#1575;&#1583; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; (qty) &#1570;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;(&#1777;).</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="p">;</span><span class="w">

</span><span class="c1">-- wrong</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sqty</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>600</p></td></tr><tr><td><p>p2</p></td><td><p>1350</p></td></tr><tr><td><p>p3</p></td><td><p>400</p></td></tr><tr><td><p>p4</p></td><td><p>500</p></td></tr><tr><td><p>p5</p></td><td><p>500</p></td></tr><tr><td><p>p6</p></td><td><p>100</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="107" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="171200" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1580;&#1605;&#1593; &#1578;&#1593;&#1583;&#1575;&#1583; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; (qty) &#1570;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;(&#1778;).</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sqty</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>600</p></td></tr><tr><td><p>p2</p></td><td><p>1350</p></td></tr><tr><td><p>p3</p></td><td><p>400</p></td></tr><tr><td><p>p4</p></td><td><p>500</p></td></tr><tr><td><p>p5</p></td><td><p>500</p></td></tr><tr><td><p>p6</p></td><td><p>100</p></td></tr><tr><td><p>p7</p></td><td></td></tr><tr><td><p>p8</p></td><td></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="108" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="172800" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1580;&#1605;&#1593; &#1608;&#1590;&#1593;&#1740;&#1578; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1583;&#1585;&#1608;&#1606; &#1588;&#1607;&#1585; &#1570;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1607; &#1607;&#1605;&#1585;&#1575;&#1607; &#1588;&#1607;&#1585; &#1602;&#1591;&#1593;&#1607; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1576;&#1607; &#1578;&#1585;&#1578;&#1740;&#1576; &#1606;&#1586;&#1608;&#1604;&#1740; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607; &#1606;&#1588;&#1575;&#1606; &#1583;&#1575;&#1583;&#1607; &#1588;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;.</p><div><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w">
</span><span class="ln">2 </span><span class="w">   </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln">4 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">5 </span><span class="w">   </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sum_status</span><span class="p">,</span><span class="w">
</span><span class="ln">6 </span><span class="w">   </span><span class="n">city</span><span class="w">
</span><span class="ln">7 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">8 </span><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">desc</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="c1">-- wrong</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">city</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="c1">-- wrong</span></pre></div><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sum_status</p></th><th><p>city</p></th></tr></thead><tbody><tr><td><p>p6</p></td><td><p>40</p></td><td><p>London</p></td></tr><tr><td><p>p2</p></td><td><p>40</p></td><td><p>Paris</p></td></tr><tr><td><p>p3</p></td><td></td><td><p>Oslo</p></td></tr><tr><td><p>p4</p></td><td><p>40</p></td><td><p>London</p></td></tr><tr><td><p>p1</p></td><td><p>40</p></td><td><p>London</p></td></tr><tr><td><p>p5</p></td><td><p>40</p></td><td><p>Paris</p></td></tr><tr><td><p>p7</p></td><td><p>40</p></td><td><p>London</p></td></tr><tr><td><p>p8</p></td><td><p>40</p></td><td><p>Paris</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="109" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="174400" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1580;&#1605;&#1593; &#1578;&#1593;&#1583;&#1575;&#1583; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="p">;</span><span class="w"> </span><span class="c1">-- wrong</span></pre><img src="img/left_outer_join1_wrong_inner_join.png" class="substep"><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">;</span></pre><img src="img/left_outer_join1_using_scalar.png" class="substep"></div><div class="step step-level-1 t2c" step="110" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="176000" data-y="0" data-z="0"><h1 id="left-outer-join-i">Left Outer Join(I)</h1><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>sqty</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>600</p></td></tr><tr><td><p>p2</p></td><td><p>1350</p></td></tr><tr><td><p>p3</p></td><td><p>400</p></td></tr><tr><td><p>p4</p></td><td><p>500</p></td></tr><tr><td><p>p5</p></td><td><p>500</p></td></tr><tr><td><p>p6</p></td><td><p>100</p></td></tr><tr><td><p>p7</p></td><td></td></tr><tr><td><p>p8</p></td><td></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="111" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="177600" data-y="0" data-z="0"><h1 id="left-outer-join-ii">Left Outer Join(II)</h1><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln">2 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="ln">4 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="ln">5 </span><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="112" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="179200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1607; &#1548; &#1583;&#1587;&#1578; &#1705;&#1605; &#1740;&#1705;&#1740; &#1575;&#1586; &#1602;&#1591;&#1593;&#1575;&#1578; &#1583;&#1585;&#1608;&#1606; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608; &#1605;&#1580;&#1605;&#1608;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1575;&#1588;&#1583; &#1576;&#1607; &#1588;&#1585;&#1591;&#1740; &#1705;&#1607; &#1578;&#1593;&#1583;&#1575;&#1583; &#1602;&#1591;&#1593;&#1575;&#1578; &#1583;&#1585; &#1570;&#1606; &#1588;&#1607;&#1585; &#1602;&#1591;&#1593;&#1607; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1608; &#1576;&#1575;&#1588;&#1583;(III).</p><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">      </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="k">and</span><span class="w">
</span><span class="ln">11 </span><span class="w">  </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="113" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="180800" data-y="0" data-z="0"><h1 id="full-outer-join-i">Full Outer Join(I)</h1><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">full</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">full</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqty</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">full</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="114" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="182400" data-y="0" data-z="0"><h1 id="full-outer-join-ii">Full Outer Join(II)</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">full</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w"> </span><span class="c1">-- very different result</span></pre></div><div class="step step-level-1 t2c" step="115" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="184000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1607;&#1605;&#1607;&#1620; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1585;&#1575; &#1583;&#1585; &#1705;&#1606;&#1575;&#1585; &#1606;&#1575;&#1605; &#1588;&#1607;&#1585; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1705;&#1607; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740; &#1570;&#1606;&#1607;&#1575; &#1607;&#1587;&#1578;&#1606;&#1583; &#1576;&#1606;&#1608;&#1740;&#1587;&#1740;&#1583; &#1608; &#1575;&#1711;&#1585; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740; &#1570;&#1606; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1606;&#1576;&#1608;&#1583; &#1606;&#1575;&#1605; &#1588;&#1607;&#1585; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; null &#1576;&#1740;&#1575;&#1740;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">city</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w">  </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="c1">--wrong
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">full</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w">  </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="c1">--wrong
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">full</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">city</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w">  </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="c1">--wrong
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">full</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w">  </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">right</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w">  </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="c1">--wrong
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="116" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="185600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1607;&#1605;&#1607;&#1620; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1585;&#1575; &#1583;&#1585; &#1705;&#1606;&#1575;&#1585; &#1606;&#1575;&#1605; &#1588;&#1607;&#1585; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1705;&#1607; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740; &#1570;&#1606;&#1607;&#1575; &#1607;&#1587;&#1578;&#1606;&#1583; &#1576;&#1606;&#1608;&#1740;&#1587;&#1740;&#1583; &#1608; &#1575;&#1711;&#1585; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740; &#1570;&#1606; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1606;&#1576;&#1608;&#1583; &#1606;&#1575;&#1605; &#1588;&#1607;&#1585; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; null &#1576;&#1740;&#1575;&#1740;&#1583;</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">scity</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">pcity</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">outer</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">city</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">scity</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">pcity</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="c1">--  wrong</span></pre></div><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>scity</p></th><th><p>pcity</p></th></tr></thead><tbody><tr><td><p>London</p></td><td><p>London</p></td></tr><tr><td><p>London</p></td><td><p>London</p></td></tr><tr><td><p>London</p></td><td><p>London</p></td></tr><tr><td><p>London</p></td><td><p>London</p></td></tr><tr><td><p>Paris</p></td><td><p>Paris</p></td></tr><tr><td><p>Paris</p></td><td><p>Paris</p></td></tr><tr><td><p>Paris</p></td><td><p>Paris</p></td></tr><tr><td><p>Paris</p></td><td><p>Paris</p></td></tr><tr><td><p>Paris</p></td><td><p>Paris</p></td></tr><tr><td><p>Paris</p></td><td><p>Paris</p></td></tr><tr><td><p>London</p></td><td><p>London</p></td></tr><tr><td><p>London</p></td><td><p>London</p></td></tr><tr><td><p>London</p></td><td><p>London</p></td></tr><tr><td><p>London</p></td><td><p>London</p></td></tr><tr><td><p>Athens</p></td><td></td></tr><tr><td><p>&#1705;&#1575;&#1588;&#1575;&#1606;</p></td><td></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="117" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="187200" data-y="0" data-z="0"><h1 id="is-null-is-not-null">is null / is not null</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="118" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="188800" data-y="0" data-z="0"><h1 id="scalar-value-iii">Scalar value(III)</h1><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607; &#1608; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1705;&#1605;&#1578;&#1585;&#1740;&#1606; &#1608;&#1586;&#1606; &#1585;&#1575; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;(I).</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="c1">-- wrong
</span><span class="ln">2 </span><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">asc</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>p7</p></td><td></td></tr></tbody></table><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="c1">-- wrong
</span><span class="ln">2 </span><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">asc</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>12</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="119" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="190400" data-y="0" data-z="0"><h1 id="scalar-value-iv">Scalar value(IV)</h1><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607; &#1608; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1705;&#1605;&#1578;&#1585;&#1740;&#1606; &#1608;&#1586;&#1606; &#1585;&#1575; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;(II).</p><pre class="highlight code sql"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="c1">-- wrong
</span><span class="ln">2 </span><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">asc</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>12</p></td></tr></tbody></table><pre class="highlight code sql substep"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">    </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">asc</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">    </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>12</p></td></tr><tr><td><p>p5</p></td><td><p>12</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="120" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="192000" data-y="0" data-z="0"><h1 id="scalar-value-iv-1">Scalar value(IV)</h1><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607; &#1608; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1705;&#1605;&#1578;&#1585;&#1740;&#1606; &#1608;&#1586;&#1606; &#1585;&#1575; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;(III).</p><pre class="highlight code sql"><span class="ln"> 1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">    </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">asc</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">    </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>12</p></td></tr><tr><td><p>p5</p></td><td><p>12</p></td></tr></tbody></table><pre class="highlight code sql"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln">4 </span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w">
</span><span class="ln">5 </span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">6 </span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="ln">7 </span><span class="w"></span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>pn</p></th><th><p>weight</p></th></tr></thead><tbody><tr><td><p>p1</p></td><td><p>12</p></td></tr><tr><td><p>p5</p></td><td><p>12</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="121" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="193600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578; &#1608; &#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><div><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">;</span></pre></div><table cellpadding="0" cellspacing="0" class="substep smallerelementwithfullborder"><thead><tr><th><p>pname</p></th><th><p>sn</p></th></tr></thead><tbody><tr><td><p>Nut</p></td><td><p>s1</p></td></tr><tr><td><p>Nut</p></td><td><p>s4</p></td></tr><tr><td><p>Bolt</p></td><td><p>s2</p></td></tr><tr><td><p>Bolt</p></td><td><p>s3</p></td></tr><tr><td><p>Screw</p></td><td><p>s1</p></td></tr><tr><td><p>Screw</p></td><td><p>s4</p></td></tr><tr><td><p>Cam</p></td><td><p>s2</p></td></tr><tr><td><p>Cam</p></td><td><p>s3</p></td></tr><tr><td><p>Cog</p></td><td><p>s1</p></td></tr><tr><td><p>Cog</p></td><td><p>s4</p></td></tr><tr><td><p>Nut</p></td><td><p>s1</p></td></tr><tr><td><p>Nut</p></td><td><p>s4</p></td></tr><tr><td><p>Bolt</p></td><td><p>s2</p></td></tr><tr><td><p>Bolt</p></td><td><p>s3</p></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="122" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="195200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1662;&#1585;&#1608;&#1688;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1585;&#1575;&#1740; &#1570;&#1606; &#1662;&#1585;&#1608;&#1688;&#1607;&#8204;&#1607;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608; &#1605;&#1580;&#1605;&#1608;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1593;&#1585;&#1590;&#1607; &#1588;&#1583;&#1607; &#1576;&#1585;&#1575;&#1740; &#1570;&#1606; &#1662;&#1585;&#1608;&#1688;&#1607; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776;&#1776; &#1576;&#1575;&#1588;&#1583;. &#1583;&#1602;&#1578; &#1705;&#1606;&#1740;&#1583; &#1605;&#1580;&#1605;&#1608;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1575;&#1740;&#1583; qty &#1583;&#1585; weight &#1590;&#1585;&#1576; &#1588;&#1608;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">jname</span><span class="w"> </span><span class="c1">-- &#1606;&#1575;&#1583;&#1585;&#1587;&#1578;
</span><span class="k">from</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">jn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">jn</span><span class="w">
</span><span class="k">having</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">jname</span><span class="w">  </span><span class="c1">-- &#1606;&#1575;&#1583;&#1585;&#1587;&#1578;
</span><span class="k">from</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">jn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">jname</span><span class="w"> </span><span class="c1">-- &#1583;&#1585;&#1587;&#1578;
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w">
  </span><span class="n">j</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">jn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">exits</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span><span class="n">spj</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="p">)</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">jn</span><span class="o">=</span><span class="n">j</span><span class="p">.</span><span class="n">jn</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">jn</span><span class="w">
</span><span class="k">having</span><span class="w"> </span><span class="p">(</span><span class="n">weight</span><span class="o">*</span><span class="n">qty</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">100</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">jname</span><span class="w"> </span><span class="c1">-- &#1583;&#1585;&#1587;&#1578;
</span><span class="k">from</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">jn</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w">
    </span><span class="n">j</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">jn</span><span class="p">)</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">exits</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span><span class="n">spj</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="p">)</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">jn</span><span class="o">=</span><span class="n">j</span><span class="p">.</span><span class="n">jn</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">)</span><span class="w">
  </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">jn</span><span class="w">
  </span><span class="k">having</span><span class="w"> </span><span class="p">(</span><span class="n">weight</span><span class="o">*</span><span class="n">qty</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">100</span></pre></div><div class="step step-level-1 t2c" step="123" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="196800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1607; &#1740;&#1705;&#1740; &#1575;&#1586; &#1602;&#1591;&#1593;&#1575;&#1578; &#1583;&#1585;&#1608;&#1606; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608; &#1605;&#1580;&#1605;&#1608;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1575;&#1588;&#1583; &#1576;&#1607; &#1588;&#1585;&#1591;&#1740; &#1705;&#1607; &#1578;&#1593;&#1583;&#1575;&#1583; &#1602;&#1591;&#1593;&#1575;&#1578; &#1583;&#1585; &#1570;&#1606; &#1588;&#1607;&#1585; &#1602;&#1591;&#1593;&#1607; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1608; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span></pre><p class="rtl substep">&#1662;&#1575;&#1587;&#1582; &#1606;&#1575;&#1583;&#1585;&#1587;&#1578;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">sn</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span></pre><p class="rtl substep">&#1662;&#1575;&#1587;&#1582; &#1583;&#1585;&#1587;&#1578;</p></div><div class="step step-level-1" step="124" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="198400" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1575; &#1608;&#1586;&#1606; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1778; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1607;&#1585; &#1705;&#1583;&#1575;&#1605; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1583;&#1608; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">12</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span></pre></div><div class="step step-level-1" step="125" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="200000" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1576;&#1575; &#1608;&#1586;&#1606; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1778; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1607;&#1585; &#1705;&#1583;&#1575;&#1605; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">12</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span></pre></div><div class="step step-level-1 t2c" step="126" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="201600" data-y="0" data-z="0"><h1 id="update-i">Update(I)</h1><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">P</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">pn</span><span class="o">=</span><span class="s1">'P6'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'London'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">LOWER</span><span class="p">(</span><span class="w">
    </span><span class="n">firstname</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="ss">"."</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">lastname</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="ss">"@chinookcorp.com"</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">lastname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Smith'</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">employeeid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="127" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="203200" data-y="0" data-z="0"><h1 id="update-ii">Update(II)</h1><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">tableA</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'abcd'</span><span class="p">,</span><span class="w">
  </span><span class="k">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">case</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="k">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'abc'</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">'abcd'</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="k">C</span><span class="w">
  </span><span class="k">end</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">

</span><span class="c1">-- https://stackoverflow.com/a/17081004/886607
</span><span class="k">update</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">set</span><span class="w">
  </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">case</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'london'</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="n">status</span><span class="w">
  </span><span class="k">end</span></pre><pre class="highlight code sql substep"><span class="k">update</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">set</span><span class="w">
  </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">case</span><span class="w">
  </span><span class="k">when</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'London'</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="k">when</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="k">else</span><span class="w"> </span><span class="n">status</span><span class="w">
</span><span class="k">end</span></pre><pre class="highlight code sql substep"><span class="k">update</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">set</span><span class="w">
  </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">case</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'London'</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="n">status</span><span class="w">
  </span><span class="k">end</span></pre></div><div class="step step-level-1" step="128" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="204800" data-y="0" data-z="0"><h1 id="condition-on-delete">Condition on delete</h1><pre class="highlight code sql substep"><span class="w">  </span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">qty</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">;</span></pre></div><div class="step step-level-1" step="129" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="206400" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">S</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">tot_cred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">takes</span><span class="p">,</span><span class="w"> </span><span class="n">course</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">course_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">course</span><span class="p">.</span><span class="n">course_id</span><span class="w">
    </span><span class="k">and</span><span class="w"> </span><span class="n">S</span><span class="p">.</span><span class="n">ID</span><span class="o">=</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">ID</span><span class="w"> </span><span class="k">and</span><span class="w">
    </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">'F'</span><span class="w"> </span><span class="k">and</span><span class="w">
    </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">case</span><span class="w">
  </span><span class="k">when</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w">
  </span><span class="k">else</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="k">end</span></pre></div><div class="step step-level-1 t2c" step="130" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="208000" data-y="0" data-z="0"><h1 id="with-i">with(I)</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">averagev</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">temp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">temp</span><span class="p">.</span><span class="n">averagev</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="p">(</span><span class="n">averagev</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">temp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">averagev</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="131" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="209600" data-y="0" data-z="0"><h1 id="with-ii">with(II)</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">averagev</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">temp1</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">temp2</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">temp2</span><span class="p">.</span><span class="n">total</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">temp1</span><span class="p">.</span><span class="n">averagev</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="n">temp1</span><span class="p">(</span><span class="n">averagev</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">),</span><span class="w">
  </span><span class="n">temp2</span><span class="p">(</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">temp1</span><span class="p">,</span><span class="w"> </span><span class="n">temp2</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">temp2</span><span class="p">.</span><span class="n">total</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">temp1</span><span class="p">.</span><span class="n">averagev</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="132" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="211200" data-y="0" data-z="0"><h1 id="with-iii">with(III)</h1><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="n">dept_total</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">dept_name</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">instructor</span><span class="w">
    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">dept_name</span><span class="w">
  </span><span class="p">),</span><span class="w">
  </span><span class="n">dept_total_avg</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">dept_total</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">dept_name</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">dept_total</span><span class="p">,</span><span class="w"> </span><span class="n">dept_total_avg</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">dept_total</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">dept_total_avg</span><span class="p">.</span><span class="n">value</span></pre></div><div class="step step-level-1" step="133" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="212800" data-y="0" data-z="0"><h1 id="with-diagram">With Diagram</h1><svg class="rrdiagram" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="453" height="78" viewbox="0 0 453 78"><path class="connector" d="M0 50h15m50 0h30m88 0h20m-123 0q5 0 5 5v8q0 5 5 5h98q5 0 5-5v-8q0-5 5-5m5 0h30m-5 0q-5 0-5-5v-19q0-5 5-5h85m24 0h86q5 0 5 5v19q0 5-5 5m-5 0h35"></path><polygon points="0,57 5,50 0,43"></polygon><rect class="literal" x="15" y="34" width="50" height="24" rx="7"></rect><text class="text" x="25" y="50">WITH</text><rect class="literal" x="95" y="34" width="88" height="24" rx="7"></rect><text class="text" x="105" y="50">RECURSIVE</text><rect class="literal" x="313" y="5" width="24" height="24" rx="7"></rect><text class="text" x="323" y="21">,</text><a xlink:href="#common-table-expression"><rect class="rule" x="233" y="34" width="185" height="24"></rect><text class="text" x="243" y="50">common_table_expression</text></a><polygon points="449,57 453,57 453,43 449,43"></polygon></svg><svg class="rrdiagram" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="608" height="179" viewbox="0 0 608 179"><path class="connector" d="M0 50h15m81 0h30m25 0h30m-5 0q-5 0-5-5v-19q0-5 5-5h46m24 0h46q5 0 5 5v19q0 5-5 5m-5 0h30m25 0h20m-251 0q5 0 5 5v8q0 5 5 5h226q5 0 5-5v-8q0-5 5-5m5 0h10m36 0h10m25 0h30m58 0h27m-95 24q0 5 5 5h5m60 0h10q5 0 5-5m-85 29q0 5 5 5h5m56 0h14q5 0 5-5m-85 29q0 5 5 5h5m65 0h5q5 0 5-5m-90-82q5 0 5 5v106q0 5 5 5h5m60 0h10q5 0 5-5v-106q0-5 5-5m5 0h10m25 0h15"></path><polygon points="0,57 5,50 0,43" style="fill:black;stroke-width:0"></polygon><a xlink:href="../../../syntax_resources/grammar_diagrams#cte-name"><rect class="rule" x="15" y="34" width="81" height="24"></rect><text class="text" x="25" y="50">cte_name</text></a><rect class="literal" x="126" y="34" width="25" height="24" rx="7"></rect><text class="text" x="136" y="50">(</text><rect class="literal" x="222" y="5" width="24" height="24" rx="7"></rect><text class="text" x="232" y="21">,</text><a xlink:href="../../../syntax_resources/grammar_diagrams#column-name"><rect class="rule" x="181" y="34" width="106" height="24"></rect><text class="text" x="191" y="50">column_name</text></a><rect class="literal" x="317" y="34" width="25" height="24" rx="7"></rect><text class="text" x="327" y="50">)</text><rect class="literal" x="372" y="34" width="36" height="24" rx="7"></rect><text class="text" x="382" y="50">AS</text><rect class="literal" x="418" y="34" width="25" height="24" rx="7"></rect><text class="text" x="428" y="50">(</text><a xlink:href="../../../syntax_resources/grammar_diagrams#select"><rect class="rule" x="473" y="34" width="58" height="24"></rect><text class="text" x="483" y="50">select</text></a><a xlink:href="../../../syntax_resources/grammar_diagrams#values"><rect class="rule" x="473" y="63" width="60" height="24"></rect><text class="text" x="483" y="79">values</text></a><a xlink:href="../../../syntax_resources/grammar_diagrams#insert"><rect class="rule" x="473" y="92" width="56" height="24"></rect><text class="text" x="483" y="108">insert</text></a><a xlink:href="../../../syntax_resources/grammar_diagrams#update"><rect class="rule" x="473" y="121" width="65" height="24"></rect><text class="text" x="483" y="137">update</text></a><a xlink:href="../../../syntax_resources/grammar_diagrams#delete"><rect class="rule" x="473" y="150" width="60" height="24"></rect><text class="text" x="483" y="166">delete</text></a><rect class="literal" x="568" y="34" width="25" height="24" rx="7"></rect><text class="text" x="578" y="50">)</text><polygon points="604,57 608,57 608,43 604,43" style="fill:black;stroke-width:0"></polygon></svg></div><div class="step step-level-1 t2c" step="134" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="214400" data-y="0" data-z="0"><h1 id="unknown">Unknown</h1><ul><li>3 = 2 =&gt; FALSE</li><li>3 = 3 =&gt; TRUE</li><li>NULL = 3 =&gt; UNKNOWN</li><li>3 = NULL =&gt; UNKNOWN</li><li>NULL = NULL =&gt; UNKNOWN</li><li>NULL &lt;&gt; 1 =&gt; UNKNOWN</li><li>NULL &gt; 1 =&gt; UNKNOWN</li></ul><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="c1">-- always empty
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="p">;</span><span class="w">

</span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="p">;</span><span class="w">

</span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">;</span></pre><div><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">nullif</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">TRUE</span><span class="w">
</span><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">TRUE</span><span class="w">
</span><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">FALSE</span><span class="w">
</span><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">FALSE</span><span class="w">
</span><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">UNKNOWN</span><span class="w">
</span><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">UNKNOWN</span></pre></div></div><div class="step step-level-1" step="135" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="216000" data-y="0" data-z="0"><h1 id="three-valued-logic">Three-valued logic</h1><ul><li>Boolean logic</li><li>Kleene and Priest logics</li></ul><p>(F: false; U: unknown; T: true)</p><div class="yoo-grid-auto-flow-column"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>A</p></th><th><p>~A</p></th></tr></thead><tbody><tr><td><p>F</p></td><td><p>T</p></td></tr><tr><td><p>T</p></td><td><p>F</p></td></tr><tr><td><p>U</p></td><td><p>U</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th colspan="2" rowspan="2"><p>A and B</p></th><th colspan="3"><p>B</p></th></tr><tr><th><p>T</p></th><th><p>F</p></th><th><p>U</p></th></tr></thead><tbody><tr><td rowspan="3"><p>A</p></td><td><p>T</p></td><td><p>T</p></td><td><p>F</p></td><td><p>U</p></td></tr><tr><td><p>F</p></td><td><p>F</p></td><td><p>F</p></td><td><p>F</p></td></tr><tr><td><p>U</p></td><td><p>U</p></td><td><p>F</p></td><td><p>U</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th colspan="2" rowspan="2"><p>A or B</p></th><th colspan="3"><p>B</p></th></tr><tr><th><p>T</p></th><th><p>F</p></th><th><p>U</p></th></tr></thead><tbody><tr><td rowspan="3"><p>A</p></td><td><p>T</p></td><td><p>T</p></td><td><p>T</p></td><td><p>T</p></td></tr><tr><td><p>F</p></td><td><p>T</p></td><td><p>F</p></td><td><p>U</p></td></tr><tr><td><p>U</p></td><td><p>T</p></td><td><p>U</p></td><td><p>U</p></td></tr></tbody></table></div></div><div class="step step-level-1" step="136" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="217600" data-y="0" data-z="0"><pre class="highlight code sql"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">List_of_tables</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">unknown</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">List_of_tables</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">List_of_tables</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">List_of_tables</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">;</span></pre><p class="substep">Always True</p></div><div class="step step-level-1" step="137" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="219200" data-y="0" data-z="0"><h1 id="is-not-unknown-is-unknown">"is not unknown" , "is unknown"</h1><ol><li class="substep">Always True or False</li><li class="substep">It cannot be "unknown"</li><li class="substep">The meaning of "null" and "unknown" is different</li><li class="substep">The usages of "null" and "unknown" is different</li></ol></div><div class="step step-level-1" step="138" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="220800" data-y="0" data-z="0"><h1 id="the-final-result-of-an-uknown-condition-is-false">The final result of an uknown condition is False</h1><p class="substep rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1783; &#1583;&#1575;&#1585;&#1606;&#1583;.</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">17</span><span class="p">;</span></pre></div><div class="step step-level-1" step="139" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="222400" data-y="0" data-z="0"><h1 id="only-conditions-with-known-values">Only Conditions with Known Values</h1><h2 id="pr-is-a-large-combinations-of-conditions">Pr : is a large combinations of conditions</h2><pre class="highlight code sql substep"><span class="ln">1 </span><span class="p">((</span><span class="n">pr</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">pr</span><span class="w"> </span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">List_of_tables</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">;</span></pre></div><div class="step step-level-1" step="140" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="224000" data-y="0" data-z="0"><h1 id="check">Check</h1><pre class="highlight code sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="n">a</span><span class="w"> </span><span class="nb">NUMERIC</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w">
  </span><span class="n">b</span><span class="w"> </span><span class="nb">NUMERIC</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w">
  </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1" step="141" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="225600" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">sp2</span><span class="p">;</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="n">sn</span><span class="w">      </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">sname</span><span class="w">   </span><span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">status</span><span class="w">  </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">10</span><span class="w">  </span><span class="k">check</span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">10</span><span class="p">),</span><span class="w">
  </span><span class="n">city</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">'Shiraz'</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="n">pn</span><span class="w">     </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">pname</span><span class="w">  </span><span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">color</span><span class="w">  </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
  </span><span class="n">weight</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">check</span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">90000</span><span class="p">),</span><span class="w">
  </span><span class="n">city</span><span class="w">   </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="p">(</span><span class="w">
   </span><span class="n">sn</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">cascade</span><span class="p">,</span><span class="w">
   </span><span class="n">pn</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">cascade</span><span class="p">,</span><span class="w">
   </span><span class="n">qty</span><span class="w">   </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">check</span><span class="p">(</span><span class="n">qty</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w">
   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1" step="142" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="227200" data-y="0" data-z="0"><h1 id="foreign-key-error">Foreign Key Error</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"DN"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"DeptName"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span><span class="w">
  </span><span class="ss">"MgrSSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">
</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"SSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"name"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"salary"</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">"Dn"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
    </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'computer'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
    </span><span class="k">values</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'Chemistry'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span></pre><pre class="highlight code sh">--<span class="w"> </span>SQLite<span class="w">
</span>Result:<span class="w"> </span>FOREIGN<span class="w"> </span>KEY<span class="w"> </span>constraint<span class="w"> </span>failed<span class="w">
</span>At<span class="w"> </span>line<span class="w"> </span><span class="m">14</span>:<span class="w">
</span>insert<span class="w"> </span>into<span class="w"> </span><span class="s2">"Department"</span><span class="o">(</span><span class="s2">"DN"</span>,<span class="w"> </span><span class="s2">"DeptName"</span>,<span class="w"> </span><span class="s2">"MgrSSN"</span><span class="o">)</span><span class="w">
    </span>values<span class="o">(</span><span class="m">1</span>,<span class="w"> </span><span class="s1">'computer'</span>,<span class="w"> </span><span class="s1">''</span><span class="o">)</span><span class="p">;</span></pre></div><div class="step step-level-1" step="143" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="228800" data-y="0" data-z="0"><h1 id="foreign-key-error-postgresql">Foreign Key Error(PostgreSQL)</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"DN"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"DeptName"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span><span class="w">
  </span><span class="ss">"MgrSSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sh">ERROR:<span class="w">  </span>relation<span class="w"> </span><span class="s2">"Employee"</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist</pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"SSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"name"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"salary"</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">"Dn"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sh">ERROR:<span class="w">  </span>relation<span class="w"> </span><span class="s2">"Department"</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist</pre></div><div class="step step-level-1" step="144" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="230400" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"DN"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"DeptName"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span><span class="w">
  </span><span class="ss">"MgrSSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"SSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"name"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"salary"</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">"Dn"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'computer'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'Chemistry'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">,</span><span class="w"> </span><span class="ss">"salary"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Dn"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'e2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'kamran'</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">,</span><span class="w"> </span><span class="ss">"salary"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Dn"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'e10'</span><span class="p">,</span><span class="w"> </span><span class="s1">'ali'</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span></pre></div><div class="step step-level-1" step="145" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="232000" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="ss">"Department"</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="o">=</span><span class="s1">'e2'</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ss">"DN"</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="k">update</span><span class="w"> </span><span class="ss">"Department"</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="o">=</span><span class="s1">'e10'</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ss">"DN"</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span><span class="w">

</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="ss">"departmentManager"</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">references</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">action</span><span class="p">;</span><span class="w">

</span><span class="k">update</span><span class="w"> </span><span class="ss">"Employee"</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="ss">"Dn"</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ss">"SSN"</span><span class="o">=</span><span class="s1">'e2'</span><span class="p">;</span><span class="w">
</span><span class="k">update</span><span class="w"> </span><span class="ss">"Employee"</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="ss">"Dn"</span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ss">"SSN"</span><span class="o">=</span><span class="s1">'e10'</span><span class="p">;</span><span class="w">

</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Employee"</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="ss">"employeeDepartment"</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="ss">"Dn"</span><span class="p">)</span><span class="w">
  </span><span class="k">references</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">action</span><span class="p">;</span><span class="w">
</span><span class="c1">-- set default
-- set null</span></pre></div><div class="step step-level-1" step="146" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="233600" data-y="0" data-z="0"><h1 id="sqlite-is-incomplete">SQLite is incomplete</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tte1</span><span class="p">(</span><span class="w">
  </span><span class="n">myid</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">salary</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">check</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w">
  </span><span class="n">name1</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">dept2</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">),</span><span class="w">
  </span><span class="n">fee</span><span class="w">   </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="c1">--check(salary - fee &gt; 80)
</span><span class="w">  </span><span class="k">check</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">80</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tte1</span><span class="p">(</span><span class="n">myid</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="p">,</span><span class="w"> </span><span class="n">name1</span><span class="p">,</span><span class="w"> </span><span class="n">dept2</span><span class="p">,</span><span class="w"> </span><span class="n">fee</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="p">,</span><span class="w"> </span><span class="s1">'&#1607;&#1608;&#1588;&#1606;&#1711;'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span></pre><pre class="highlight code sh">Result:<span class="w"> </span>FOREIGN<span class="w"> </span>KEY<span class="w"> </span>constraint<span class="w"> </span>failed<span class="w">
</span>At<span class="w"> </span>line<span class="w"> </span><span class="m">10</span>:<span class="w">
</span>insert<span class="w"> </span>into<span class="w"> </span>tte1<span class="o">(</span>myid,<span class="w"> </span>salary,<span class="w"> </span>name1,<span class="w"> </span>dept2,<span class="w"> </span>fee<span class="o">)</span><span class="w">
    </span>values<span class="o">(</span><span class="m">31</span>,<span class="w"> </span><span class="m">1200</span>,<span class="w"> </span><span class="s1">'&#1607;&#1608;&#1588;&#1606;&#1711;'</span>,<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="m">200</span><span class="o">)</span><span class="p">;</span></pre></div><div class="step step-level-1" step="147" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="235200" data-y="0" data-z="0"><h1 id="same-sample-in-postgresql">Same Sample in PostgreSQL</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tte1</span><span class="p">(</span><span class="w">
  </span><span class="n">myid</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">salary</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">check</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w">
  </span><span class="n">name1</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">dept2</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">),</span><span class="w">
  </span><span class="n">fee</span><span class="w">   </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="c1">--check(salary - fee &gt; 80)
</span><span class="w">  </span><span class="k">check</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">80</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tte1</span><span class="p">(</span><span class="n">myid</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="p">,</span><span class="w"> </span><span class="n">name1</span><span class="p">,</span><span class="w"> </span><span class="n">dept2</span><span class="p">,</span><span class="w"> </span><span class="n">fee</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="p">,</span><span class="w"> </span><span class="s1">'&#1607;&#1608;&#1588;&#1606;&#1711;'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span></pre><pre class="highlight code sh">INSERT<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span></pre></div><div class="step step-level-1" step="148" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="236800" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"DN"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"DeptName"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span><span class="w">
  </span><span class="ss">"MgrSSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"SSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"name"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"salary"</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">"Dn"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'computer'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'Chemistry'</span><span class="p">,</span><span class="w"> </span><span class="s1">'32'</span><span class="p">);</span><span class="w">

</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="ss">"departmentManager"</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">references</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">action</span><span class="p">;</span></pre><pre class="highlight code sh">ERROR:<span class="w">  </span>insert<span class="w"> </span>or<span class="w"> </span>update<span class="w"> </span>on<span class="w"> </span>table<span class="w"> </span><span class="s2">"Department"</span><span class="w"> </span>violates<span class="w"> </span>foreign<span class="w"> </span>key<span class="w"> </span>constraint<span class="w"> </span><span class="s2">"departmentManager"</span><span class="w">
</span>DETAIL:<span class="w">  </span>Key<span class="w"> </span><span class="o">(</span>MgrSSN<span class="o">)=(</span><span class="m">32</span><span class="o">)</span><span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>present<span class="w"> </span><span class="k">in</span><span class="w"> </span>table<span class="w"> </span><span class="s2">"Employee"</span>.</pre></div><div class="step step-level-1" step="149" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="238400" data-y="0" data-z="0"><h1 id="no-action-restrict-set-null-set-default-or-cascade">no action, restrict, set null, set default or cascade</h1><ol><li class="substep"><strong>no action</strong>: Configuring "no action" means just that: when a parent key is modified or deleted from the database, no special action is taken.</li><li class="substep"><strong>restrict</strong>: The "restrict" action means that the application is prohibited from deleting (for on delete restrict) or modifying (for on update restrict) a parent key when there exists one or more child keys mapped to it. The difference between the effect of a restrict action and normal foreign key constraint enforcement is that the restrict action processing happens as soon as the field is updated - not at the end of the current statement as it would with an immediate constraint, or at the end of the current transaction as it would with a deferred constraint. Even if the foreign key constraint it is attached to is deferred, configuring a restrict action causes SQLite to return an error immediately if a parent key with dependent child keys is deleted or modified.</li><li class="substep"><strong>set null</strong>: If the configured action is "set null", then when a parent key is deleted (for on delete set null) or modified (for on update set null), the child key columns of all rows in the child table that mapped to the parent key are set to contain SQL null values.</li><li class="substep"><strong>set default</strong>: The "set default" actions are similar to "set null", except that each of the child key columns is set to contain the columns default value instead of null. Refer to the create table documentation for details on how default values are assigned to table columns.</li><li class="substep"><strong>cascade</strong>: A "cascade" action propagates the delete or update operation on the parent key to each dependent child key. For an "on delete cascade" action, this means that each row in the child table that was associated with the deleted parent row is also deleted. For an "on update cascade" action, it means that the values stored in each dependent child key are modified to match the new parent key values.</li></ol></div><div class="step step-level-1 t2c" step="150" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="240000" data-y="0" data-z="0"><h1 id="all">All</h1><p class="substep rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1575;&#1586; &#1608;&#1586;&#1606; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1583;&#1585;&#1608;&#1606; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1576;&#1740;&#1588;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="k">all</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">weight</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="151" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="241600" data-y="0" data-z="0"><h1 id="some">Some</h1><p class="rtl-h1 substep">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1575;&#1586; &#1583;&#1587;&#1578; &#1705;&#1605; &#1608;&#1586;&#1606; &#1740;&#1705; &#1602;&#1591;&#1593;&#1607; &#1583;&#1585;&#1608;&#1606; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1576;&#1740;&#1588;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="k">some</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">weight</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="152" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="243200" data-y="0" data-z="0"><h1 id="in">IN</h1><p class="substep rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740; &#1570;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><p class="substep rtl-h2">&#1705;&#1608;&#1588;&#1588; &#1705;&#1606;&#1740;&#1583; &#1576;&#1575; exists &#1575;&#1740;&#1606; &#1662;&#1585;&#1587;&#8204;&#1608;&#1580;&#1608; &#1585;&#1575; &#1581;&#1604; &#1705;&#1606;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="153" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="244800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1607;&#1740;&#1670; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1570;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1606;&#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><p class="substep rtl-h2">&#1705;&#1608;&#1588;&#1588; &#1705;&#1606;&#1740;&#1583; &#1576;&#1575; exists &#1575;&#1740;&#1606; &#1662;&#1585;&#1587;&#8204;&#1608;&#1580;&#1608; &#1585;&#1575; &#1581;&#1604; &#1705;&#1606;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1" step="154" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="246400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1607;&#1740;&#1670; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#1620; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740;&#8204;&#1588;&#1575;&#1606; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1606;&#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><p class="substep rtl-h2">&#1705;&#1608;&#1588;&#1588; &#1705;&#1606;&#1740;&#1583; &#1576;&#1575; exists &#1575;&#1740;&#1606; &#1662;&#1585;&#1587;&#8204;&#1608;&#1580;&#1608; &#1585;&#1575; &#1581;&#1604; &#1705;&#1606;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
      </span><span class="k">and</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="155" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="248000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1607;&#1740;&#1670; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#1620; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740;&#8204;&#1588;&#1575;&#1606; &#1607;&#1740;&#1670; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1606;&#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><p class="rtl-h1 substep">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585;&#1588;&#1575;&#1606; &#1606;&#1576;&#1575;&#1588;&#1583; &#1705;&#1607; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><p class="substep rtl-h2">&#1705;&#1608;&#1588;&#1588; &#1705;&#1606;&#1740;&#1583; &#1576;&#1575; exists &#1575;&#1740;&#1606; &#1662;&#1585;&#1587;&#8204;&#1608;&#1580;&#1608; &#1585;&#1575; &#1581;&#1604; &#1705;&#1606;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">exist</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="156" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="249600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1607;&#1740;&#1670; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#1620; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740;&#8204;&#1588;&#1575;&#1606; &#1607;&#1740;&#1670; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1606;&#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w">
    </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w">
    </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">in</span><span class="w">
    </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="157" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="251200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1575;&#1586; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1705;&#1575;&#1588;&#1575;&#1606; &#1576;&#1586;&#1585;&#1711;&#8204;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="k">some</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">weight</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Kashan'</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">exist</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Kashan'</span><span class="w">
      </span><span class="k">and</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="158" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="252800" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1585; &#1588;&#1607;&#1585; &#1570;&#1606;&#1607;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1586;&#1585;&#1711;&#8204;&#1578;&#1585; &#1575;&#1586; &#1782; &#1608;&#1580;&#1608;&#1583; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">some</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">  </span><span class="c1">-- error
</span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="c1">-- result has more
-- than a row</span></pre></div><div class="step step-level-1 t2c" step="159" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="254400" data-y="0" data-z="0"><h1 id="order-by">order by</h1><p class="substep rtl-h1">&#1606;&#1575;&#1605; &#1608; &#1608;&#1590;&#1593;&#1740;&#1578; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1585;&#1575; &#1576;&#1607; &#1589;&#1608;&#1585;&#1578; &#1589;&#1593;&#1608;&#1583;&#1740; &#1576;&#1585; &#1662;&#1575;&#1740;&#1607;&#1620; &#1608;&#1590;&#1593;&#1740;&#1578; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">status</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">asc</span><span class="w">
</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>sname</p></th><th><p>status</p></th></tr></thead><tbody><tr><td><p>Jones</p></td><td><p>10</p></td></tr><tr><td><p>Smith</p></td><td><p>20</p></td></tr><tr><td><p>Clark</p></td><td><p>20</p></td></tr><tr><td><p>Blake</p></td><td><p>30</p></td></tr><tr><td><p>Adams</p></td><td><p>30</p></td></tr><tr><td><p>Ali</p></td><td><p>40</p></td></tr></tbody></table></div><div class="step step-level-1" step="160" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="256000" data-y="0" data-z="0"><h1 id="order-by-desc">order by ..... desc</h1><p class="substep rtl-h2">&#1606;&#1575;&#1605; &#1608; &#1608;&#1590;&#1593;&#1740;&#1578; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1585;&#1575; &#1576;&#1607; &#1589;&#1608;&#1585;&#1578; &#1606;&#1586;&#1608;&#1604;&#1740; &#1576;&#1585; &#1662;&#1575;&#1740;&#1607;&#1620; &#1608;&#1590;&#1593;&#1740;&#1578; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">desc</span><span class="w">
</span><span class="p">;</span></pre><img src="img/order_by_desc.png" class="substep"></div><div class="step step-level-1" step="161" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="257600" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">mytemp</span><span class="p">(</span><span class="w">
  </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">ssn</span><span class="w">  </span><span class="nb">bigint</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w">
  </span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">mytemp</span><span class="p">(</span><span class="n">ssn</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span><span class="w">
</span><span class="c1">--- Help: not null constraint failed: mytemp.name</span></pre><pre class="highlight code sql"><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">mytemp</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">mytemp</span><span class="p">(</span><span class="n">ssn</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">"ali"</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">mytemp</span><span class="p">;</span></pre></div><div class="step step-level-1" step="162" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="259200" data-y="0" data-z="0"><p>&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1580;&#1605;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607; &#1605;&#1740;&#8204;&#1705;&#1606;&#1606;&#1583; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1777; &#1607;&#1586;&#1575;&#1585; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">11000</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="mi">11000</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">qty</span><span class="p">)</span><span class="w">
             </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">spj</span><span class="w">
             </span><span class="k">where</span><span class="w"> </span><span class="n">spj</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w">
           </span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="163" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="260800" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607; &#1608; &#1606;&#1575;&#1605; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;. &#1575;&#1711;&#1585; &#1608;&#1590;&#1593;&#1740;&#1578; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607; &#1576;&#1586;&#1585;&#1711;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1608;&#1583; &#1705;&#1606;&#1575;&#1585; &#1605;&#1588;&#1582;&#1589;&#1575;&#1578; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1705;&#1604;&#1605;&#1607;&#1620; big &#1608; &#1583;&#1585; &#1594;&#1740;&#1585; &#1575;&#1740;&#1606; &#1589;&#1608;&#1585;&#1578; &#1705;&#1604;&#1605;&#1607;&#1620; small &#1576;&#1711;&#1584;&#1575;&#1585;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="k">case</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">'big'</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="s1">'small'</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="n">size_of_supplier</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1" step="164" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="262400" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="o">&gt;</span><span class="mi">6</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="o">&gt;</span><span class="mi">6</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1" step="165" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="264000" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w">
   </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
   </span><span class="p">),</span><span class="w">
   </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">desc</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w">
   </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
   </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sum_status</span><span class="p">,</span><span class="w">
   </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">desc</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="166" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="265600" data-y="0" data-z="0"><h1 id="unique-i">Unique(I)</h1><pre class="highlight code sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="n">ID</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">UNIQUE</span><span class="p">,</span><span class="w">
    </span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
    </span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
    </span><span class="n">Age</span><span class="w"> </span><span class="nb">int</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="n">ID</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
    </span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
    </span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
    </span><span class="n">Age</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w">
    </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="n">ID</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
    </span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
    </span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
    </span><span class="n">Age</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w">
    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">UC_Person</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">,</span><span class="n">LastName</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"student"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"SSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">unique</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"name"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"student_number"</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="k">Primary</span><span class="w"> </span><span class="k">key</span><span class="w">
  </span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w">
  </span><span class="ss">"student"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">,</span><span class="w"> </span><span class="ss">"student_number"</span><span class="p">)</span><span class="w">
</span><span class="k">values</span><span class="w">
</span><span class="p">(</span><span class="ss">"38947389"</span><span class="p">,</span><span class="w"> </span><span class="ss">"&#1705;&#1575;&#1605;&#1585;&#1575;&#1606; &#1582;&#1583;&#1575;&#1662;&#1585;&#1587;&#1578;&#1740;"</span><span class="p">,</span><span class="w"> </span><span class="mi">973433</span><span class="p">),</span><span class="w">
</span><span class="p">(</span><span class="ss">"38472389"</span><span class="p">,</span><span class="w"> </span><span class="ss">"&#1705;&#1608;&#1585;&#1608;&#1588; &#1662;&#1575;&#1585;&#1587;&#1575;&#1740;&#1740;"</span><span class="p">,</span><span class="w"> </span><span class="mi">9632847</span><span class="p">),</span><span class="w">
</span><span class="p">(</span><span class="ss">"38947389"</span><span class="p">,</span><span class="w"> </span><span class="ss">")&#1575;&#1581;&#1605;&#1583; &#1740;&#1608;&#1587;&#1601;&#1575;&#1606;"</span><span class="p">,</span><span class="w"> </span><span class="mi">93802932</span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="167" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="267200" data-y="0" data-z="0"><h1 id="unique-ii">Unique(II)</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">contacts</span><span class="p">(</span><span class="w">
    </span><span class="n">contact_id</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
    </span><span class="n">first_name</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w">
    </span><span class="n">last_name</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w">
    </span><span class="n">email</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">shapes</span><span class="p">(</span><span class="w">
  </span><span class="n">shape_id</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">background_color</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w">
  </span><span class="n">foreground_color</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w">
  </span><span class="k">UNIQUE</span><span class="p">(</span><span class="n">background_color</span><span class="p">,</span><span class="n">foreground_color</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="k">ADD</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="k">ADD</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">UC_Person</span><span class="w">
  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">,</span><span class="n">LastName</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="k">DROP</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">UC_Person</span><span class="p">;</span></pre></div><div class="step step-level-1" step="168" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="268800" data-y="0" data-z="0"><h1 id="unique-iii">Unique(III)</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">contacts</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="n">contact_id</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">first_name</span><span class="w"> </span><span class="nb">text</span><span class="w">    </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">last_name</span><span class="w">  </span><span class="nb">text</span><span class="w">    </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">email</span><span class="w">      </span><span class="nb">text</span><span class="p">,</span><span class="w">
  </span><span class="n">phone</span><span class="w">      </span><span class="nb">text</span><span class="w">    </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
    </span><span class="k">check</span><span class="w"> </span><span class="p">(</span><span class="k">length</span><span class="p">(</span><span class="n">phone</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="n">product_id</span><span class="w">   </span><span class="nb">integer</span><span class="w">         </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">product_name</span><span class="w"> </span><span class="nb">text</span><span class="w">            </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">list_price</span><span class="w">   </span><span class="nb">DECIMAL</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">discount</span><span class="w">     </span><span class="nb">DECIMAL</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
                              </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="k">check</span><span class="w"> </span><span class="p">(</span><span class="n">list_price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">discount</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">discount</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">list_price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1" step="169" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="270400" data-y="0" data-z="0"><h1 id="unique-condition">Unique condition</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">unique</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="c1">-- not implemented in PostgreSQL</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unique</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="c1">-- not implemented in PostgreSQL</span></pre></div><div class="step step-level-1" step="170" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="272000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1607; &#1583;&#1587;&#1578; &#1570;&#1608;&#1585;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776;&#1776;&#1776; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w">
     </span><span class="p">(</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
       </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">city</span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">status</span><span class="o">&gt;</span><span class="mi">1000</span><span class="w">
     </span><span class="p">)</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="o">&gt;</span><span class="mi">1000</span></pre></div><div class="step step-level-1" step="171" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="273600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1607; &#1583;&#1587;&#1578; &#1570;&#1608;&#1585;&#1740;&#1583; &#1705;&#1607; &#1607;&#1605;&#1607;&#1620; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776;&#1776;&#1776; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w">
     </span><span class="p">(</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
       </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">city</span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">status</span><span class="o">&lt;</span><span class="mi">1000</span><span class="w">
     </span><span class="p">)</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">except</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="o">&lt;=</span><span class="mi">1000</span></pre></div><div class="step step-level-1" step="172" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="275200" data-y="0" data-z="0"><h1 id="enum-type">ENUM TYPE</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="n">Type_of_Menu</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">enum</span><span class="w"> </span><span class="p">(</span><span class="s1">'soft_menu'</span><span class="p">,</span><span class="w"> </span><span class="s1">'vertical_menu'</span><span class="p">,</span><span class="w"> </span><span class="s1">'horizontal_menu'</span><span class="p">,</span><span class="w">
    </span><span class="s1">'reports'</span><span class="p">,</span><span class="w"> </span><span class="s1">'report_with_submenu'</span><span class="p">,</span><span class="w"> </span><span class="s1">'report_in_submenu'</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">menu_access</span><span class="p">(</span><span class="w">
  </span><span class="n">menu_type</span><span class="w"> </span><span class="n">Type_of_Menu</span><span class="p">,</span><span class="w">
  </span><span class="n">name</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">256</span><span class="p">),</span><span class="w">
  </span><span class="n">visible</span><span class="w"> </span><span class="nb">boolean</span><span class="p">,</span><span class="w">
  </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">menu_type</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w">
</span><span class="p">)</span></pre></div><div class="step step-level-1" step="173" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="276800" data-y="0" data-z="0"><h1 id="check-constraint">Check constraint</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="n">valid_colors</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">enum</span><span class="w"> </span><span class="p">(</span><span class="s1">'red'</span><span class="p">,</span><span class="w"> </span><span class="s1">'green'</span><span class="p">,</span><span class="w"> </span><span class="s1">'blue'</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="n">color</span><span class="w"> </span><span class="n">VALID_COLORS</span><span class="w">
</span><span class="p">);</span></pre><p>The following does not work</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'bl%'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="n">colors</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="p">(</span><span class="n">colors</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="s1">'red'</span><span class="p">,</span><span class="w"> </span><span class="s1">'green'</span><span class="p">,</span><span class="w"> </span><span class="s1">'blue'</span><span class="p">))</span><span class="w">
</span><span class="p">);</span></pre><p>All native string or numeric operators work.</p><p><a href="https://stackoverflow.com/a/10984951">https://stackoverflow.com/a/10984951</a></p></div><div class="step step-level-1" step="174" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="278400" data-y="0" data-z="0"><h1 id="lateral">lateral</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="k">LATERAL</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">t</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="c1">-- Error
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">t</span><span class="p">;</span></pre><pre class="highlight code sh">Error<span class="w"> </span>invalid<span class="w"> </span>reference<span class="w"> </span>to<span class="w"> </span>FROM-clause<span class="w"> </span>entry<span class="w"> </span><span class="k">for</span><span class="w"> </span>table<span class="w"> </span><span class="s2">"p"</span><span class="w">
</span>LINE<span class="w"> </span><span class="m">2</span>:<span class="w"> </span>...<span class="w"> </span>from<span class="w"> </span>p,<span class="w"> </span><span class="o">(</span><span class="k">select</span><span class="w"> </span>sn,<span class="w"> </span>s.city<span class="w"> </span>from<span class="w"> </span>s<span class="w"> </span>where<span class="w"> </span>s.city<span class="w"> </span><span class="o">=</span><span class="w"> </span>p.city<span class="o">)</span><span class="w"> </span>as...<span class="w">
                                                             </span>^<span class="w">
</span>HINT:<span class="w"> </span>There<span class="w"> </span>is<span class="w"> </span>an<span class="w"> </span>entry<span class="w"> </span><span class="k">for</span><span class="w"> </span>table<span class="w"> </span><span class="s2">"p"</span>,<span class="w"> </span>but<span class="w"> </span>it<span class="w"> </span>cannot<span class="w"> </span>be<span class="w"> </span>referenced<span class="w">
</span>from<span class="w"> </span>this<span class="w"> </span>part<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>query.</pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">;</span></pre></div><div class="step step-level-1" step="175" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="280000" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="n">psk</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">psk</span><span class="p">;</span><span class="w">

</span><span class="k">with</span><span class="w"> </span><span class="n">psk</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">psk</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">

</span><span class="k">with</span><span class="w"> </span><span class="n">psk</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">
  </span><span class="p">,</span><span class="w"> </span><span class="n">jsk</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">jn</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">jsk</span><span class="p">.</span><span class="n">jn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">psk</span><span class="p">,</span><span class="w"> </span><span class="n">jsk</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w">
    </span><span class="n">jsk</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1" step="176" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="281600" data-y="0" data-z="0"><pre class="highlight code sql"><span class="c1">-- Error
</span><span class="k">select</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">jsk</span><span class="p">.</span><span class="n">jn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">psk</span><span class="w">
  </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">jn</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">jsk</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">psk</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">jsk</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1" step="177" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="283200" data-y="0" data-z="0"><h1 id="constraint-i">Constraint(I)</h1><ul><li>Primary key</li><li>not null (No field part of primary key can be null)</li><li>foreign keys</li><li>unique</li></ul></div><div class="step step-level-1" step="178" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="284800" data-y="0" data-z="0"><h1 id="pragma-foreign-keys">pragma foreign_keys</h1><pre class="highlight code sql"><span class="n">pragma</span><span class="w"> </span><span class="n">foreign_keys</span><span class="o">=</span><span class="k">off</span><span class="p">;</span><span class="w">

</span><span class="n">pragma</span><span class="w"> </span><span class="n">foreign_keys</span><span class="o">=</span><span class="k">on</span><span class="p">;</span><span class="w">

</span><span class="n">pragma</span><span class="w"> </span><span class="n">foreign_keys</span><span class="o">=</span><span class="k">off</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"spj"</span><span class="p">(</span><span class="ss">"sn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"pn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"jn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"qty"</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="s1">'S7'</span><span class="p">,</span><span class="w"> </span><span class="s1">'P1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'J1'</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">);</span><span class="w">
</span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="ss">"SPJ"</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ss">"sn"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'S7'</span><span class="p">;</span><span class="w">
</span><span class="n">pragma</span><span class="w"> </span><span class="n">foreign_keys</span><span class="o">=</span><span class="k">on</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"spj"</span><span class="p">(</span><span class="ss">"sn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"pn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"jn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"qty"</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="s1">'S7'</span><span class="p">,</span><span class="w"> </span><span class="s1">'P1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'J1'</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">);</span><span class="w">
</span><span class="n">Error</span><span class="p">:</span><span class="w">
  </span><span class="n">Help</span><span class="p">:</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="n">failed</span></pre></div><div class="step step-level-1" step="179" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="286400" data-y="0" data-z="0"><h1 id="sqlite-uses-the-following-terminology">SQLite uses the following terminology</h1><ul><li>The parent table is the table that a foreign key constraint refers to. The parent table in the example in this section is the artist table. Some books and articles refer to this as the referenced table, which is arguably more correct, but tends to lead to confusion.</li><li>The child table is the table that a foreign key constraint is applied to and the table that contains the references clause. The example in this section uses the track table as the child table. Other books and articles refer to this as the referencing table.</li><li>The parent key is the column or set of columns in the parent table that the foreign key constraint refers to. This is normally, but not always, the primary key of the parent table. The parent key must be a named column or columns in the parent table, not the rowid.</li><li>The child key is the column or set of columns in the child table that are constrained by the foreign key constraint and which hold the references clause.</li></ul></div><div class="step step-level-1" step="180" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="288000" data-y="0" data-z="0"><h1 id="alter-table-foreign-key">Alter table Foreign key</h1><h2 id="mysql-sql-server-oracle-ms-access">MySQL / SQL Server / Oracle / MS Access</h2><pre class="highlight code sql"><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">Orders</span><span class="w">
</span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="n">FK_PersonOrder</span><span class="w">
</span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">PersonID</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">Persons</span><span class="p">(</span><span class="n">PersonID</span><span class="p">);</span></pre></div><div class="step step-level-1" step="181" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="289600" data-y="0" data-z="0"><h1 id="vacuum">Vacuum</h1><h2 id="vacuum-1">vacuum;</h2><h2 id="vacuum-full">vacuum full</h2><h2 id="sqlite-vacuum">SQLite vacuum</h2><pre class="highlight code sql"><span class="k">vacuum</span><span class="p">;</span></pre><h2 id="auto-vaccum">auto_vaccum</h2><pre class="highlight code sql"><span class="n">pragma</span><span class="w"> </span><span class="n">auto_vacuum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">full</span><span class="p">;</span><span class="w">
</span><span class="n">pragma</span><span class="w"> </span><span class="n">auto_vacuum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">incremental</span><span class="p">;</span><span class="w">
</span><span class="n">pragma</span><span class="w"> </span><span class="n">auto_vacuum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">none</span><span class="p">;</span></pre><h2 id="vacuum-with-an-into-clause">vacuum with an into clause</h2></div><div class="step step-level-1" step="182" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="291200" data-y="0" data-z="0"><h1 id="view">View</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">kashan_p</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Kashan'</span><span class="w">
</span><span class="p">);</span></pre><img src="img/create_view_postgresql.png" width="740px"></div><div class="step step-level-1 t2c" step="183" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="292800" data-y="0" data-z="0"><h1 id="sample-view">Sample View</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">student</span><span class="w">
  </span><span class="p">(</span><span class="n">ID</span><span class="w">     </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="w">
   </span><span class="n">name</span><span class="w">     </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
   </span><span class="n">dept_name</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
   </span><span class="n">tot_cred</span><span class="w">   </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="p">(</span><span class="n">tot_cred</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w">
   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">),</span><span class="w">
   </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
    </span><span class="k">references</span><span class="w"> </span><span class="n">department</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
    </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">null</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">S</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">tot_cred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">takes</span><span class="p">,</span><span class="w"> </span><span class="n">course</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">course_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">course</span><span class="p">.</span><span class="n">course_id</span><span class="w">
    </span><span class="k">and</span><span class="w"> </span><span class="n">S</span><span class="p">.</span><span class="n">ID</span><span class="o">=</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">ID</span><span class="w"> </span><span class="k">and</span><span class="w">
    </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">'F'</span><span class="w"> </span><span class="k">and</span><span class="w">
    </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">student</span><span class="w">
  </span><span class="p">(</span><span class="n">ID</span><span class="w">     </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="w">
   </span><span class="n">name</span><span class="w">     </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
   </span><span class="n">dept_name</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">),</span><span class="w">
   </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
    </span><span class="k">references</span><span class="w"> </span><span class="n">department</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
    </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">null</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">student_total</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">ID</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">dept_name</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">takes</span><span class="p">,</span><span class="w"> </span><span class="n">course</span><span class="w">
      </span><span class="k">where</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">course_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">course</span><span class="p">.</span><span class="n">course_id</span><span class="w">
        </span><span class="k">and</span><span class="w"> </span><span class="n">student</span><span class="p">.</span><span class="n">ID</span><span class="o">=</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">ID</span><span class="w"> </span><span class="k">and</span><span class="w">
        </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">'F'</span><span class="w"> </span><span class="k">and</span><span class="w">
        </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_cred</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1" step="184" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="294400" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">ALTER</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">kashan_p</span><span class="w"> </span><span class="k">RENAME</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">kashan_parts</span><span class="p">;</span><span class="w">
</span><span class="k">DROP</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">kashan_parts</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">drop</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">m2</span><span class="p">;</span><span class="w">
</span><span class="k">drop</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">m1</span><span class="p">;</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">m1</span><span class="w"> </span><span class="k">as</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">8</span><span class="w">
  </span><span class="p">;</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">m2</span><span class="w"> </span><span class="k">as</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">m1</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">;</span></pre></div><div class="step step-level-1" step="185" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="296000" data-y="0" data-z="0"><h1 id="view-1">view</h1><ul><li>select is fine</li><li>insert, update, delete is problematic</li><li>unless it depends only on one table almost</li></ul><ol><li>Speed of execution</li></ol></div><div class="step step-level-1" step="186" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="297600" data-y="0" data-z="0"><h1 id="materialized-view">MATERIALIZED VIEW</h1><pre class="highlight code sql"><span class="k">CREATE</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="k">table_name</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="p">(</span><span class="k">column_name</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">storage_parameter</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="n">TABLESPACE</span><span class="w"> </span><span class="n">tablespace_name</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="k">AS</span><span class="w"> </span><span class="n">query</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">DATA</span><span class="w"> </span><span class="p">]</span></pre></div><div class="step step-level-1" step="187" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="299200" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">ALTER</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">name</span><span class="w">
    </span><span class="n">action</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="k">ALTER</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">name</span><span class="w">
    </span><span class="k">RENAME</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">new_column_name</span><span class="w">
</span><span class="k">ALTER</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">name</span><span class="w">
    </span><span class="k">RENAME</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">new_name</span><span class="w">
</span><span class="k">ALTER</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">name</span><span class="w">
    </span><span class="k">SET</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">new_schema</span><span class="w">

</span><span class="k">where</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="k">of</span><span class="p">:</span><span class="w">

    </span><span class="k">ALTER</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">STATISTICS</span><span class="w"> </span><span class="nb">integer</span><span class="w">
    </span><span class="k">ALTER</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">attribute_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">
    </span><span class="k">ALTER</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="k">RESET</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">attribute_option</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">
    </span><span class="k">ALTER</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">STORAGE</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="n">PLAIN</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">EXTERNAL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">EXTENDED</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">MAIN</span><span class="w"> </span><span class="err">}</span><span class="w">
    </span><span class="k">CLUSTER</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">index_name</span><span class="w">
    </span><span class="k">SET</span><span class="w"> </span><span class="k">WITHOUT</span><span class="w"> </span><span class="k">CLUSTER</span><span class="w">
    </span><span class="k">SET</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">storage_parameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">
    </span><span class="k">RESET</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">storage_parameter</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">
    </span><span class="k">OWNER</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">new_owner</span><span class="w">
    </span><span class="k">SET</span><span class="w"> </span><span class="n">TABLESPACE</span><span class="w"> </span><span class="n">new_tablespace</span></pre></div><div class="step step-level-1" step="188" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="300800" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="n">materialized</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="ss">"pscity"</span><span class="w"> </span><span class="p">(</span><span class="ss">"sn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"pn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"city"</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="ss">"sn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"pn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"p"</span><span class="p">.</span><span class="ss">"city"</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="ss">"s"</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="ss">"p"</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="ss">"s"</span><span class="p">.</span><span class="ss">"city"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"p"</span><span class="p">.</span><span class="ss">"city"</span><span class="p">;</span><span class="w">

</span><span class="k">drop</span><span class="w"> </span><span class="n">materialized</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="ss">"pscity"</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="n">REFRESH</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">name</span><span class="w">
  </span><span class="p">[</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">DATA</span><span class="w"> </span><span class="p">]</span><span class="w">

</span><span class="n">REFRESH</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">order_summary</span><span class="p">;</span><span class="w">

</span><span class="n">REFRESH</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">annual_statistics_basis</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="k">DATA</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="n">materialized</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">student_total</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">ID</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">dept_name</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">takes</span><span class="p">,</span><span class="w"> </span><span class="n">course</span><span class="w">
      </span><span class="k">where</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">course_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">course</span><span class="p">.</span><span class="n">course_id</span><span class="w">
        </span><span class="k">and</span><span class="w"> </span><span class="n">student</span><span class="p">.</span><span class="n">ID</span><span class="o">=</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">ID</span><span class="w"> </span><span class="k">and</span><span class="w">
        </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">'F'</span><span class="w"> </span><span class="k">and</span><span class="w">
        </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_cred</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="n">REFRESH</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">student_total</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="189" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="302400" data-y="0" data-z="0"><h1 id="recursive-query">Recursive query</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">course</span><span class="w">
  </span><span class="p">(</span><span class="n">course_id</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="w">
   </span><span class="n">title</span><span class="w">      </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span><span class="w">
   </span><span class="n">dept_name</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
   </span><span class="n">credits</span><span class="w">    </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">
     </span><span class="k">check</span><span class="w"> </span><span class="p">(</span><span class="n">credits</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w">
   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">course_id</span><span class="p">),</span><span class="w">
   </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
     </span><span class="k">references</span><span class="w"> </span><span class="n">department</span><span class="w">
     </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
     </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">null</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">prereq</span><span class="w">
  </span><span class="p">(</span><span class="n">course_id</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="w">
   </span><span class="n">prereq_id</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="w">
   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">course_id</span><span class="p">,</span><span class="w"> </span><span class="n">prereq_id</span><span class="p">),</span><span class="w">
   </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">course_id</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">course</span><span class="w"> </span><span class="p">(</span><span class="n">course_id</span><span class="p">)</span><span class="w">
    </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">cascade</span><span class="p">,</span><span class="w">
   </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">prereq_id</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">course</span><span class="w"> </span><span class="p">(</span><span class="n">course_id</span><span class="p">)</span><span class="w">
  </span><span class="p">);</span></pre><p>.</p><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="n">rec_prereq</span><span class="p">(</span><span class="n">course_id</span><span class="p">,</span><span class="w"> </span><span class="n">prereq_id</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="n">course_id</span><span class="p">,</span><span class="w"> </span><span class="n">prereq_id</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">prereq</span><span class="w">
    </span><span class="k">union</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="n">rec_prereq</span><span class="p">.</span><span class="n">course_id</span><span class="p">,</span><span class="w"> </span><span class="n">prereq</span><span class="p">.</span><span class="n">prereq_id</span><span class="p">,</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">rec_rereq</span><span class="p">,</span><span class="w"> </span><span class="n">prereq</span><span class="w">
      </span><span class="k">where</span><span class="w"> </span><span class="n">rec_prereq</span><span class="p">.</span><span class="n">prereq_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prereq</span><span class="p">.</span><span class="n">course_id</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="err">&#8727;</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">rec_prereq</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="190" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="304000" data-y="0" data-z="0"><h1 id="general-recursive-form">General Recursive Form</h1><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="w"> </span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="c1">-- Non-recursive term.
</span><span class="w">    </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="p">...</span><span class="w">
    </span><span class="p">)</span><span class="w">

    </span><span class="k">union</span><span class="w"> </span><span class="p">[</span><span class="k">all</span><span class="p">]</span><span class="w">

    </span><span class="c1">-- Recursive term. Notice the
</span><span class="w">    </span><span class="c1">-- so-called recursive
</span><span class="w">    </span><span class="c1">-- self-reference to r.
</span><span class="w">    </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="p">...</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="p">...;</span></pre><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="c1">-- Non-recursive term.
</span><span class="w">    </span><span class="p">(</span><span class="w">
      </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
    </span><span class="p">)</span><span class="w">
    </span><span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w">
    </span><span class="c1">-- Recursive term.
</span><span class="w">    </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w">
      </span><span class="k">where</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w">

</span><span class="c1">-- n 1 2 3 4 5</span></pre></div><div class="step step-level-1" step="191" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="305600" data-y="0" data-z="0"><h1 id="maximum-one-recursive-cte-common-table-expression">Maximum one recursive CTE (Common Table Expression)</h1><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="n">a1</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="mi">42</span><span class="p">),</span><span class="w">
  </span><span class="n">a2</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">with</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
        </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
        </span><span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w">
        </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w">
        </span><span class="k">where</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">)</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w">
  </span><span class="p">),</span><span class="w"> </span><span class="n">a3</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="mi">99</span><span class="p">)(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">a1</span><span class="w">
    </span><span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">a2</span><span class="w">
    </span><span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">a3</span><span class="w">
  </span><span class="p">)</span><span class="w">
  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span><span class="w">

</span><span class="c1">--- n,  99  42  5  4  3  2  1</span></pre></div><div class="step step-level-1" step="192" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="307200" data-y="0" data-z="0"><p>END</p></div></div><div id="slide-number" class="slide-number">
         1
      </div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/gotoSlide.js"></script><script type="text/javascript" src="js/hovercraft.js"></script><script type="text/javascript" src="js/MathJax/es5/tex-mml-chtml.js"></script><script type="text/javascript">
      document.getElementById("impress").addEventListener("impress:stepenter", update_slide_number, false);
    </script></body></html>