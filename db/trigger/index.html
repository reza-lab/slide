<html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta charset="UTF-8"><meta name="generator" content="bildumilo 1.0 https://github.com/yoosofan/bildumilo"><link rel="stylesheet" href="css/hovercraft.css" media="all"><link rel="stylesheet" href="css/highlight.css" media="all"><link rel="stylesheet" href="css/style.css" media="all"><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script></head><body class="impress-not-supported"><div id="impress" data-width="1024" data-height="768" data-transition-duration="1000"><div class="step step-level-1" step="0" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="triggers">Triggers</h1><h2 id="postgresql">PostgreSQL</h2><p>Ahmad Yoosofan</p><p>Database course</p><p>University of Kashan, Spring 2020</p></div><div class="step step-level-1" step="1" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><h1 id="uses-for-triggers">Uses for triggers</h1><ul><li>Enforce business rules</li><li>Validate input data</li><li>Generate a unique value for a newly-inserted row in a different file.</li><li>Write to other files for audit trail purposes</li><li>Query from other files for cross-referencing purposes</li><li>Access system functions</li><li>Replicate data to different files to achieve data consistency</li></ul></div><div class="step step-level-1" step="2" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="3200" data-y="0" data-z="0"><h1 id="benefits-of-using-triggers-in-business">Benefits of using triggers in business</h1><ul><li>Faster application development. Because the database stores triggers, you do not have to code the trigger actions into each database application.</li><li>Global enforcement of business rules. Define a trigger once and then reuse it for any application that uses the database.</li><li>Easier maintenance. If a business policy changes, you need to change only the corresponding trigger program instead of each application program.</li><li>Improve performance in client/server environment. All rules run on the server before the result returns.</li></ul></div><div class="step step-level-1" step="3" data-y="1000" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="4800" data-z="0"><h1 id="synopsis">Synopsis</h1><pre class="highlight code sql"><span class="ln"> 1 </span><span class="k">CREATE</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">BEFORE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">AFTER</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">INSTEAD</span><span class="w"> </span><span class="k">OF</span><span class="w"> </span><span class="err">}</span><span class="w">
</span><span class="ln"> 2 </span><span class="w">    </span><span class="err">{</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="err">}</span><span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">table_name</span><span class="w">
</span><span class="ln"> 3 </span><span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">referenced_table_name</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">DEFERRABLE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">DEFERRABLE</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">        </span><span class="p">[</span><span class="w"> </span><span class="k">INITIALLY</span><span class="w"> </span><span class="k">IMMEDIATE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">INITIALLY</span><span class="w"> </span><span class="k">DEFERRED</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">    </span><span class="p">]</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="k">REFERENCING</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">OLD</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NEW</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">        </span><span class="n">transition_relation_name</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">    </span><span class="p">]</span><span class="w">
</span><span class="ln">10 </span><span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">EACH</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">ROW</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">STATEMENT</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="ln">11 </span><span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">condition</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="ln">12 </span><span class="w">    </span><span class="k">EXECUTE</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="n">function_name</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="p">)</span></pre><h2 id="where-event-can-be-one-of">where <em>event</em> can be one of:</h2><ul><li>INSERT</li><li>UPDATE [ OF column_name [, ... ] ]</li><li>DELETE</li><li>TRUNCATE</li></ul></div><div class="step step-level-1" step="4" data-y="2000" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="6400" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>When</p></th><th><p>Event</p></th><th><p>Row-level</p></th><th><p>Statement-level</p></th></tr></thead><tbody><tr><td><p>BEFORE</p></td><td><p>INSERT/UPDATE/DELETE</p></td><td><p>Tables and foreign tables</p></td><td><p>Tables, views, and foreign tables</p></td></tr><tr><td><p>BEFORE</p></td><td><p>TRUNCATE</p></td><td><p>&#8212;</p></td><td><p>Tables</p></td></tr><tr><td><p>AFTER</p></td><td><p>INSERT/UPDATE/DELETE</p></td><td><p>Tables and foreign tables</p></td><td><p>Tables, views, and foreign tables</p></td></tr><tr><td><p>AFTER</p></td><td><p>TRUNCATE</p></td><td><p>&#8212;</p></td><td><p>Tables</p></td></tr><tr><td><p>INSTEAD OF</p></td><td><p>INSERT/UPDATE/DELETE</p></td><td><p>Views</p></td><td><p>&#8212;</p></td></tr><tr><td><p>INSTEAD OF</p></td><td><p>TRUNCATE</p></td><td><p>&#8212;</p></td><td><p>&#8212;</p></td></tr></tbody></table></div><div class="step step-level-1" step="5" data-y="3000" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="8000" data-z="0"><pre class="highlight code sql"><span class="ln"> 1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">test</span><span class="p">()</span><span class="w">
</span><span class="ln"> 2 </span><span class="w">  </span><span class="k">RETURNS</span><span class="w"> </span><span class="k">trigger</span><span class="w"> </span><span class="k">AS</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="err">$$</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="k">BEGIN</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">  </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">test_table</span><span class="p">(</span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">col2</span><span class="p">,</span><span class="w"> </span><span class="n">col3</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">  </span><span class="k">VALUES</span><span class="p">(</span><span class="k">NEW</span><span class="p">.</span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">col2</span><span class="p">,</span><span class="w"> </span><span class="k">current_date</span><span class="p">);</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">
</span><span class="ln"> 8 </span><span class="w">  </span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">END</span><span class="p">;</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="err">$$</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">LANGUAGE</span><span class="w"> </span><span class="s1">'plpgsql'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="n">test_trigger</span><span class="w">
</span><span class="ln">2 </span><span class="w">  </span><span class="k">AFTER</span><span class="w"> </span><span class="k">INSERT</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">ON</span><span class="w"> </span><span class="n">test_table</span><span class="w">
</span><span class="ln">4 </span><span class="w">  </span><span class="k">FOR</span><span class="w"> </span><span class="k">EACH</span><span class="w"> </span><span class="k">ROW</span><span class="w">
</span><span class="ln">5 </span><span class="w">  </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">test</span><span class="p">();</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="ss">"test_table"</span><span class="p">(</span><span class="ss">"col1"</span><span class="p">,</span><span class="w"> </span><span class="ss">"col2"</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="ss">"A"</span><span class="p">,</span><span class="w"> </span><span class="ss">"B"</span><span class="p">);</span></pre></div><div class="step step-level-1" step="6" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="9600" data-y="4000" data-z="0"><pre class="highlight code sql"><span class="ln"> 1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">rec_insert</span><span class="p">()</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">RETURNS</span><span class="w"> </span><span class="k">trigger</span><span class="w"> </span><span class="k">AS</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="err">$$</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="k">BEGIN</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">  </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">emp_log</span><span class="p">(</span><span class="n">emp_id</span><span class="p">,</span><span class="n">salary</span><span class="p">,</span><span class="n">edittime</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">  </span><span class="k">VALUES</span><span class="p">(</span><span class="k">NEW</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">salary</span><span class="p">,</span><span class="w"> </span><span class="k">current_date</span><span class="p">);</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">  </span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="k">END</span><span class="p">;</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="err">$$</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">LANGUAGE</span><span class="w"> </span><span class="s1">'plpgsql'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="n">ins_same_rec</span><span class="w">
</span><span class="ln">2 </span><span class="w">  </span><span class="k">AFTER</span><span class="w"> </span><span class="k">INSERT</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">ON</span><span class="w"> </span><span class="n">emp_details</span><span class="w">
</span><span class="ln">4 </span><span class="w">  </span><span class="k">FOR</span><span class="w"> </span><span class="k">EACH</span><span class="w"> </span><span class="k">ROW</span><span class="w">
</span><span class="ln">5 </span><span class="w">  </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">rec_insert</span><span class="p">();</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">emp_details</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="mi">236</span><span class="p">,</span><span class="w"> </span><span class="s1">'RABI'</span><span class="p">,</span><span class="w"> </span><span class="s1">'CHANDRA'</span><span class="p">,</span><span class="w"> </span><span class="s1">'RABI'</span><span class="p">,</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="s1">'590.423.45700'</span><span class="p">,</span><span class="w"> </span><span class="s1">'2013-01-12'</span><span class="p">,</span><span class="w"> </span><span class="s1">'AD_VP'</span><span class="p">,</span><span class="w"> </span><span class="mi">15000</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="mi">5</span><span class="p">);</span></pre></div><div class="step step-level-1" step="7" id="ThreeD" data-y="5200" data-rotate-x="180" style="width: 1024px;" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="11200" data-z="0"><pre class="highlight code sql"><span class="ln">1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">befo_insert</span><span class="p">()</span><span class="w">
</span><span class="ln">2 </span><span class="w">  </span><span class="k">RETURNS</span><span class="w"> </span><span class="k">trigger</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="err">$$</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">BEGIN</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">NEW</span><span class="p">.</span><span class="n">FIRST_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LTRIM</span><span class="p">(</span><span class="k">NEW</span><span class="p">.</span><span class="n">FIRST_NAME</span><span class="p">);</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span><span class="k">NEW</span><span class="p">.</span><span class="n">LAST_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LTRIM</span><span class="p">(</span><span class="k">NEW</span><span class="p">.</span><span class="n">LAST_NAME</span><span class="p">);</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span><span class="k">NEW</span><span class="p">.</span><span class="n">JOB_ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">UPPER</span><span class="p">(</span><span class="k">NEW</span><span class="p">.</span><span class="n">JOB_ID</span><span class="p">);</span><span class="w">
</span><span class="ln">7 </span><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span><span class="w">
</span><span class="ln">8 </span><span class="w"></span><span class="k">END</span><span class="p">;</span><span class="w"> </span><span class="err">$$</span><span class="w"> </span><span class="k">LANGUAGE</span><span class="w"> </span><span class="s1">'plpgsql'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="n">che_val_befo_ins</span><span class="w">
</span><span class="ln">2 </span><span class="w">  </span><span class="k">BEFORE</span><span class="w"> </span><span class="k">INSERT</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">ON</span><span class="w"> </span><span class="n">emp_details</span><span class="w">
</span><span class="ln">4 </span><span class="w">  </span><span class="k">FOR</span><span class="w"> </span><span class="k">EACH</span><span class="w"> </span><span class="k">ROW</span><span class="w">
</span><span class="ln">5 </span><span class="w">  </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">befo_insert</span><span class="p">();</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">emp_details</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">334</span><span class="p">,</span><span class="w"> </span><span class="s1">' Ana '</span><span class="p">,</span><span class="w"> </span><span class="s1">' King'</span><span class="p">,</span><span class="w"> </span><span class="s1">'ANA'</span><span class="p">,</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="s1">'690.432.45701'</span><span class="p">,</span><span class="w"> </span><span class="s1">'2013-02-05'</span><span class="p">,</span><span class="w"> </span><span class="s1">'it_prog'</span><span class="p">,</span><span class="w"> </span><span class="mi">17000</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="mi">50</span><span class="p">);</span></pre></div><div class="step step-level-1" step="8" data-x="12000" style="width: 1024px;" data-rotate-x="180" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="6400" data-z="0"><pre class="highlight code sql"><span class="n">postgres</span><span class="o">=#</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">student_mast</span><span class="p">;</span><span class="w">
 </span><span class="n">student_id</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="n">name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">st_class</span><span class="w">
</span><span class="c1">------------+---------------------------+----------
</span><span class="w">          </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w"> </span><span class="n">King</span><span class="w">               </span><span class="o">|</span><span class="w">        </span><span class="mi">7</span><span class="w">
          </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Neena</span><span class="w">  </span><span class="n">Kochhar</span><span class="w">            </span><span class="o">|</span><span class="w">        </span><span class="mi">8</span><span class="w">
          </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Lex</span><span class="w">  </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">              </span><span class="o">|</span><span class="w">        </span><span class="mi">8</span><span class="w">
          </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Alexander</span><span class="w"> </span><span class="n">Hunold</span><span class="w">          </span><span class="o">|</span><span class="w">       </span><span class="mi">10</span><span class="w">
</span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span></pre><ul><li>stu_log table has two columns user_id and description</li></ul></div><div class="step step-level-1" step="9" style="width: 1024px;" data-rotate-x="180" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="12800" data-y="7600" data-z="0"><pre class="highlight code sql"><span class="ln">1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">aft_update</span><span class="p">()</span><span class="w">
</span><span class="ln">2 </span><span class="w">  </span><span class="k">RETURNS</span><span class="w"> </span><span class="k">trigger</span><span class="w"> </span><span class="k">AS</span><span class="w">   </span><span class="err">$$</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">BEGIN</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">stu_log</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="k">user</span><span class="p">,</span><span class="w"> </span><span class="n">CONCAT</span><span class="p">(</span><span class="s1">'Update '</span><span class="p">,</span><span class="w">
</span><span class="ln">5 </span><span class="w">         </span><span class="k">OLD</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span><span class="s1">' Previous:'</span><span class="p">,</span><span class="k">OLD</span><span class="p">.</span><span class="n">ST_CLASS</span><span class="p">,</span><span class="s1">' Present: '</span><span class="p">,</span><span class="w">
</span><span class="ln">6 </span><span class="w">         </span><span class="k">NEW</span><span class="p">.</span><span class="n">st_class</span><span class="p">));</span><span class="w">
</span><span class="ln">7 </span><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span><span class="w">
</span><span class="ln">8 </span><span class="w"></span><span class="k">END</span><span class="p">;</span><span class="w"> </span><span class="err">$$</span><span class="w">  </span><span class="k">LANGUAGE</span><span class="w"> </span><span class="s1">'plpgsql'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="n">updt_log</span><span class="w">
</span><span class="ln">2 </span><span class="w">  </span><span class="k">AFTER</span><span class="w"> </span><span class="k">UPDATE</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">ON</span><span class="w"> </span><span class="n">student_mast</span><span class="w">
</span><span class="ln">4 </span><span class="w">  </span><span class="k">FOR</span><span class="w"> </span><span class="k">EACH</span><span class="w"> </span><span class="k">ROW</span><span class="w">
</span><span class="ln">5 </span><span class="w">  </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">aft_update</span><span class="p">();</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">UPDATE</span><span class="w"> </span><span class="n">STUDENT_MAST</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">ST_CLASS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ST_CLASS</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span></pre></div><div class="step step-level-1" step="10" style="width: 1024px;" data-rotate-x="180" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="13600" data-y="8800" data-z="0"><pre class="highlight code sql"><span class="n">postgres</span><span class="o">=#</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">student_mast</span><span class="p">;</span><span class="w">
 </span><span class="n">student_id</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="n">name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">st_class</span><span class="w">
</span><span class="c1">------------+---------------------------+----------
</span><span class="w">          </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w"> </span><span class="n">King</span><span class="w">               </span><span class="o">|</span><span class="w">        </span><span class="mi">8</span><span class="w">
          </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Neena</span><span class="w">  </span><span class="n">Kochhar</span><span class="w">            </span><span class="o">|</span><span class="w">        </span><span class="mi">9</span><span class="w">
          </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Lex</span><span class="w">  </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">              </span><span class="o">|</span><span class="w">        </span><span class="mi">9</span><span class="w">
          </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Alexander</span><span class="w"> </span><span class="n">Hunold</span><span class="w">          </span><span class="o">|</span><span class="w">       </span><span class="mi">11</span><span class="w">
</span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span><span class="w">

</span><span class="n">postgres</span><span class="o">=#</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stu_log</span><span class="p">;</span><span class="w">
</span><span class="n">user_id</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="n">description</span><span class="w">
</span><span class="c1">--------+---------------------------------------------------
</span><span class="n">postgres</span><span class="o">|</span><span class="w"> </span><span class="k">Update</span><span class="w"> </span><span class="n">Steven</span><span class="w"> </span><span class="n">King</span><span class="w">       </span><span class="n">Previous</span><span class="p">:</span><span class="mi">7</span><span class="w"> </span><span class="n">Present</span><span class="w"> </span><span class="mi">8</span><span class="w">
</span><span class="n">postgres</span><span class="o">|</span><span class="w"> </span><span class="k">Update</span><span class="w"> </span><span class="n">Neena</span><span class="w">  </span><span class="n">Kochhar</span><span class="w">    </span><span class="n">Previous</span><span class="p">:</span><span class="mi">8</span><span class="w"> </span><span class="n">Present</span><span class="w"> </span><span class="mi">9</span><span class="w">
</span><span class="n">postgres</span><span class="o">|</span><span class="w"> </span><span class="k">Update</span><span class="w"> </span><span class="n">Lex</span><span class="w">  </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">      </span><span class="n">Previous</span><span class="p">:</span><span class="mi">8</span><span class="w"> </span><span class="n">Present</span><span class="w"> </span><span class="mi">9</span><span class="w">
</span><span class="n">postgres</span><span class="o">|</span><span class="w"> </span><span class="k">Update</span><span class="w"> </span><span class="n">Alexander</span><span class="w"> </span><span class="n">Hunold</span><span class="w">  </span><span class="n">Previous</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="n">Present</span><span class="w"> </span><span class="mi">11</span><span class="w">
</span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span></pre></div><div class="step step-level-1" step="11" style="width: 1024px;" data-rotate-x="180" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="14400" data-y="10000" data-z="0"><pre class="highlight code sql"><span class="ln"> 1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">befo_update</span><span class="p">()</span><span class="w">
</span><span class="ln"> 2 </span><span class="w">  </span><span class="k">RETURNS</span><span class="w"> </span><span class="k">trigger</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="err">$$</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">BEGIN</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="k">NEW</span><span class="p">.</span><span class="n">TOTAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">SUB1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">SUB2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">SUB3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">SUB4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">SUB5</span><span class="p">;</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">NEW</span><span class="p">.</span><span class="n">PER_MARKS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">TOTAL</span><span class="o">/</span><span class="mi">5</span><span class="p">;</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">IF</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">PER_MARKS</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">90</span><span class="w"> </span><span class="k">THEN</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="k">NEW</span><span class="p">.</span><span class="n">GRADE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'EXCELLENT'</span><span class="p">;</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">ELSEIF</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">PER_MARKS</span><span class="o">&gt;=</span><span class="mi">75</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">PER_MARKS</span><span class="o">&lt;</span><span class="mi">90</span><span class="w"> </span><span class="k">THEN</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">NEW</span><span class="p">.</span><span class="n">GRADE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'VERY GOOD'</span><span class="p">;</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">ELSEIF</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">PER_MARKS</span><span class="o">&gt;=</span><span class="mi">60</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">PER_MARKS</span><span class="o">&lt;</span><span class="mi">75</span><span class="w"> </span><span class="k">THEN</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">NEW</span><span class="p">.</span><span class="n">GRADE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'GOOD'</span><span class="p">;</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="n">ELSEIF</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">PER_MARKS</span><span class="o">&gt;=</span><span class="mi">40</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">PER_MARKS</span><span class="o">&lt;</span><span class="mi">60</span><span class="w"> </span><span class="k">THEN</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="k">NEW</span><span class="p">.</span><span class="n">GRADE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'AVERAGE'</span><span class="p">;</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="k">ELSE</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="k">NEW</span><span class="p">.</span><span class="n">GRADE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'NOT PROMOTED'</span><span class="p">;</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="k">END</span><span class="w"> </span><span class="k">IF</span><span class="p">;</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="k">END</span><span class="p">;</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="err">$$</span><span class="w"> </span><span class="k">LANGUAGE</span><span class="w"> </span><span class="s1">'plpgsql'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="n">updt_marks</span><span class="w">
</span><span class="ln">2 </span><span class="w">  </span><span class="k">BEFORE</span><span class="w"> </span><span class="k">UPDATE</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">ON</span><span class="w"> </span><span class="n">student_marks</span><span class="w">
</span><span class="ln">4 </span><span class="w">  </span><span class="k">FOR</span><span class="w"> </span><span class="k">EACH</span><span class="w"> </span><span class="k">ROW</span><span class="w">
</span><span class="ln">5 </span><span class="w">  </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">befo_update</span><span class="p">();</span></pre><pre class="highlight code sql"><span class="n">postgres</span><span class="o">=#</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">STUDENT_MARKS</span><span class="p">;</span><span class="w">
 </span><span class="n">student_id</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="n">name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">sub1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">sub2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">sub3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">sub4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">sub5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">per_marks</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="n">grade</span><span class="w">
</span><span class="c1">------------+---------------------------+------+------+------+------+------+-------+-----------+----------------------
</span><span class="w">          </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Neena</span><span class="w">  </span><span class="n">Kochhar</span><span class="w">            </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">           </span><span class="o">|</span><span class="w">
          </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Lex</span><span class="w">  </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">              </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">           </span><span class="o">|</span><span class="w">
          </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Alexander</span><span class="w"> </span><span class="n">Hunold</span><span class="w">          </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">           </span><span class="o">|</span><span class="w">
          </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w"> </span><span class="n">King</span><span class="w">               </span><span class="o">|</span><span class="w">   </span><span class="mi">54</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">69</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">87</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">59</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">358</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">71</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">GOOD</span><span class="w">
</span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span></pre></div><div class="step step-level-1" step="12" style="width: 1024px;" data-rotate-x="180" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="15200" data-y="11200" data-z="0"><pre class="highlight code sql"><span class="ln">1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="n">aft_delete</span><span class="p">()</span><span class="w">
</span><span class="ln">2 </span><span class="w">  </span><span class="k">RETURNS</span><span class="w"> </span><span class="k">trigger</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="err">$$</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">BEGIN</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">stu_log</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="k">user</span><span class="p">,</span><span class="w"> </span><span class="n">CONCAT</span><span class="p">(</span><span class="s1">'Update Student Record '</span><span class="p">,</span><span class="w">
</span><span class="ln">5 </span><span class="w">         </span><span class="k">OLD</span><span class="p">.</span><span class="n">NAME</span><span class="p">,</span><span class="s1">' Class :'</span><span class="p">,</span><span class="k">OLD</span><span class="p">.</span><span class="n">ST_CLASS</span><span class="p">,</span><span class="s1">' -&gt; Deleted on '</span><span class="p">,</span><span class="w">
</span><span class="ln">6 </span><span class="w">         </span><span class="n">NOW</span><span class="p">()));</span><span class="w">
</span><span class="ln">7 </span><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="k">NEW</span><span class="p">;</span><span class="w">
</span><span class="ln">8 </span><span class="w"></span><span class="k">END</span><span class="p">;</span><span class="w">  </span><span class="err">$$</span><span class="w"> </span><span class="k">LANGUAGE</span><span class="w"> </span><span class="s1">'plpgsql'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="n">delete_stu</span><span class="w">
</span><span class="ln">2 </span><span class="w">  </span><span class="k">AFTER</span><span class="w"> </span><span class="k">DELETE</span><span class="w">
</span><span class="ln">3 </span><span class="w">  </span><span class="k">ON</span><span class="w"> </span><span class="n">student_mast</span><span class="w">
</span><span class="ln">4 </span><span class="w">  </span><span class="k">FOR</span><span class="w"> </span><span class="k">EACH</span><span class="w"> </span><span class="k">ROW</span><span class="w">
</span><span class="ln">5 </span><span class="w">  </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">aft_delete</span><span class="p">();</span></pre><pre class="highlight code sql"><span class="n">postgres</span><span class="o">=#</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">STUDENT_MAST</span><span class="p">;</span><span class="w">
 </span><span class="n">student_id</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="n">name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">st_class</span><span class="w">
</span><span class="c1">------------+---------------------------+----------
</span><span class="w">          </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Neena</span><span class="w">  </span><span class="n">Kochhar</span><span class="w">            </span><span class="o">|</span><span class="w">        </span><span class="mi">9</span><span class="w">
          </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Lex</span><span class="w">  </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">              </span><span class="o">|</span><span class="w">        </span><span class="mi">9</span><span class="w">
          </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Alexander</span><span class="w"> </span><span class="n">Hunold</span><span class="w">          </span><span class="o">|</span><span class="w">       </span><span class="mi">11</span><span class="w">
</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span><span class="w">

</span><span class="n">postgres</span><span class="o">=#</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stu_log</span><span class="p">;</span><span class="w">
          </span><span class="n">user_id</span><span class="w">          </span><span class="o">|</span><span class="w">                                             </span><span class="n">description</span><span class="w">
</span><span class="c1">---------------------------+------------------------------------------------------------------------------------------------------
</span><span class="w"> </span><span class="n">postgres</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="k">Update</span><span class="w"> </span><span class="n">Student</span><span class="w"> </span><span class="n">Record</span><span class="w"> </span><span class="n">Steven</span><span class="w"> </span><span class="n">King</span><span class="w">               </span><span class="n">Previous</span><span class="w"> </span><span class="k">Class</span><span class="w"> </span><span class="p">:</span><span class="mi">7</span><span class="w"> </span><span class="n">Present</span><span class="w"> </span><span class="k">Class</span><span class="w"> </span><span class="mi">8</span><span class="w">
 </span><span class="n">postgres</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="k">Update</span><span class="w"> </span><span class="n">Student</span><span class="w"> </span><span class="n">Record</span><span class="w"> </span><span class="n">Neena</span><span class="w">  </span><span class="n">Kochhar</span><span class="w">            </span><span class="n">Previous</span><span class="w"> </span><span class="k">Class</span><span class="w"> </span><span class="p">:</span><span class="mi">8</span><span class="w"> </span><span class="n">Present</span><span class="w"> </span><span class="k">Class</span><span class="w"> </span><span class="mi">9</span><span class="w">
 </span><span class="n">postgres</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="k">Update</span><span class="w"> </span><span class="n">Student</span><span class="w"> </span><span class="n">Record</span><span class="w"> </span><span class="n">Lex</span><span class="w">  </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">              </span><span class="n">Previous</span><span class="w"> </span><span class="k">Class</span><span class="w"> </span><span class="p">:</span><span class="mi">8</span><span class="w"> </span><span class="n">Present</span><span class="w"> </span><span class="k">Class</span><span class="w"> </span><span class="mi">9</span><span class="w">
 </span><span class="n">postgres</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="k">Update</span><span class="w"> </span><span class="n">Student</span><span class="w"> </span><span class="n">Record</span><span class="w"> </span><span class="n">Alexander</span><span class="w"> </span><span class="n">Hunold</span><span class="w">          </span><span class="n">Previous</span><span class="w"> </span><span class="k">Class</span><span class="w"> </span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="n">Present</span><span class="w"> </span><span class="k">Class</span><span class="w"> </span><span class="mi">11</span><span class="w">
 </span><span class="n">postgres</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="k">Update</span><span class="w"> </span><span class="n">Student</span><span class="w"> </span><span class="n">Record</span><span class="w"> </span><span class="n">Steven</span><span class="w"> </span><span class="n">King</span><span class="w">               </span><span class="k">Class</span><span class="w"> </span><span class="p">:</span><span class="mi">7</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Deleted</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">2014</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">16</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">35</span><span class="p">.</span><span class="mi">093</span><span class="o">+</span><span class="mi">05</span><span class="p">:</span><span class="mi">30</span><span class="w">
</span><span class="p">(</span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span></pre></div><div class="step step-level-1" step="13" style="width: 1024px;" data-rotate-x="180" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="16000" data-y="12400" data-z="0"><pre class="highlight code sql"><span class="ln">1 </span><span class="k">DROP</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">table_name</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">CASCADE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">RESTRICT</span><span class="w"> </span><span class="p">]</span></pre><pre class="highlight code sql"><span class="ln">1 </span><span class="k">DROP</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w"> </span><span class="n">delete_stu</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">student_mast</span><span class="p">;</span></pre></div><div class="step step-level-1" step="14" style="width: 1024px;" data-rotate-x="180" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="16800" data-y="13600" data-z="0"><table cellpadding="0" cellspacing="0" class="colwidths-given">Frozen Delights!<thead><tr><th><p>Treat</p></th><th><p>Quantity</p></th><th><p>Description</p></th></tr></thead><tbody><tr><td><p>Albatross</p></td><td><p>2.99</p></td><td><p>On a stick!</p></td></tr><tr><td><p>Crunchy Frog</p></td><td><p>1.49</p></td><td><p>If we took the bones out, it wouldn't be
crunchy, now would it?</p></td></tr><tr><td><p>Gannet Ripple</p></td><td><p>1.99</p></td><td><p>On a stick!</p></td></tr></tbody></table><h1 id="related">Related</h1><ul><li><a href="https://w3resource.com/PostgreSQL/postgresql-triggers.php">https://w3resource.com/PostgreSQL/postgresql-triggers.php</a></li><li><a href="https://www.postgresql.org/docs/current/sql-createtrigger.html">https://www.postgresql.org/docs/current/sql-createtrigger.html</a></li></ul></div></div><div id="slide-number" class="slide-number">
         1
      </div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/gotoSlide.js"></script><script type="text/javascript" src="js/hovercraft.js"></script><script type="text/javascript" src="js/MathJax/es5/tex-mml-chtml.js"></script><script type="text/javascript">
      document.getElementById("impress").addEventListener("impress:stepenter", update_slide_number, false);
    </script></body></html>